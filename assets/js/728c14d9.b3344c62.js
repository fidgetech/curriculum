"use strict";(self.webpackChunklhtp=self.webpackChunklhtp||[]).push([[37549],{28453:(e,t,n)=>{n.d(t,{R:()=>l,x:()=>o});var i=n(96540);const c={},s=i.createContext(c);function l(e){const t=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:l(e.components),i.createElement(s.Provider,{value:t},e.children)}},72731:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>r,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"react/react-fundamentals/4-2-3-5-showing-ticket-detail","title":"\ud83d\udcd3 4.2.3.5 Showing Ticket Detail","description":"In the lesson Planning Our Application: Part 3, we planned how to add a TicketDetail component to our Help Queue. Now let\'s build it!","source":"@site/versioned_docs/version-v1_3/4_react/2_react-fundamentals/4-2-3-05-showing-ticket-detail.md","sourceDirName":"4_react/2_react-fundamentals","slug":"/react/react-fundamentals/4-2-3-5-showing-ticket-detail","permalink":"/v1.3/react/react-fundamentals/4-2-3-5-showing-ticket-detail","draft":false,"unlisted":false,"tags":[],"version":"v1_3","frontMatter":{"title":"\ud83d\udcd3 4.2.3.5 Showing Ticket Detail","day":"wednesday","id":"4-2-3-5-showing-ticket-detail","hide_table_of_contents":true},"sidebar":"react","previous":{"title":"\ud83d\udcd3 4.2.3.4 Passing Arguments to Event Handlers","permalink":"/v1.3/react/react-fundamentals/4-2-3-4-passing-arguments-to-event-handlers"},"next":{"title":"\ud83d\udcd3 4.2.3.6 Deleting a Ticket","permalink":"/v1.3/react/react-fundamentals/4-2-3-6-deleting-a-ticket"}}');var c=n(74848),s=n(28453);const l={title:"\ud83d\udcd3 4.2.3.5 Showing Ticket Detail",day:"wednesday",id:"4-2-3-5-showing-ticket-detail",hide_table_of_contents:!0},o=void 0,r={},d=[{value:"The Big Picture",id:"the-big-picture",level:2},{value:"Our Roadmap",id:"our-roadmap",level:2},{value:"Step 1: Create the <code>TicketDetail</code> Component",id:"step-1-create-the-ticketdetail-component",level:2},{value:"Step 2: Add State to Track the Selected Ticket",id:"step-2-add-state-to-track-the-selected-ticket",level:2},{value:"Step 3: Write the Selection Handler Function",id:"step-3-write-the-selection-handler-function",level:2},{value:"Step 4: Update the Conditional Rendering",id:"step-4-update-the-conditional-rendering",level:2},{value:"Step 5: Pass the Function Through <code>TicketList</code> to <code>Ticket</code>",id:"step-5-pass-the-function-through-ticketlist-to-ticket",level:2},{value:"Update <code>TicketList</code>",id:"update-ticketlist",level:3},{value:"Update <code>Ticket</code>",id:"update-ticket",level:3},{value:"Step 6: Display the Actual Ticket Data",id:"step-6-display-the-actual-ticket-data",level:2},{value:"Step 7: Fix the &quot;Return to Ticket List&quot; Button",id:"step-7-fix-the-return-to-ticket-list-button",level:2},{value:"Recap: How Data Flows",id:"recap-how-data-flows",level:2},{value:"Summary",id:"summary",level:2},{value:"Troubleshooting Common Issues",id:"troubleshooting-common-issues",level:2}];function a(e){const t={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(t.p,{children:["In the lesson ",(0,c.jsx)(t.a,{href:"4-2-3-3-planning-our-application-part-3",children:"Planning Our Application: Part 3"}),", we planned how to add a ",(0,c.jsx)(t.code,{children:"TicketDetail"})," component to our Help Queue. Now let's build it!"]}),"\n",(0,c.jsx)(t.h2,{id:"the-big-picture",children:"The Big Picture"}),"\n",(0,c.jsx)(t.p,{children:"Before we write any code, let's understand what we're trying to accomplish:"}),"\n",(0,c.jsxs)(t.ol,{children:["\n",(0,c.jsx)(t.li,{children:"A user sees the ticket list"}),"\n",(0,c.jsx)(t.li,{children:"They click on a ticket"}),"\n",(0,c.jsx)(t.li,{children:"The detail view for that ticket appears"}),"\n",(0,c.jsx)(t.li,{children:'They click "Return to Ticket List" to go back'}),"\n"]}),"\n",(0,c.jsx)(t.p,{children:"To make this work, we need to answer two questions:"}),"\n",(0,c.jsxs)(t.ul,{children:["\n",(0,c.jsxs)(t.li,{children:[(0,c.jsxs)(t.strong,{children:["How does ",(0,c.jsx)(t.code,{children:"TicketControl"})," know which ticket was clicked?"]})," We'll pass a function ",(0,c.jsx)(t.em,{children:"down"})," to ",(0,c.jsx)(t.code,{children:"Ticket"})," that reports back when clicked."]}),"\n",(0,c.jsxs)(t.li,{children:[(0,c.jsx)(t.strong,{children:"How does the correct detail view appear?"})," We'll store the selected ticket in ",(0,c.jsx)(t.code,{children:"TicketControl"}),"'s state and use conditional rendering to show ",(0,c.jsx)(t.code,{children:"TicketDetail"})," with the right ticket when appropriate."]}),"\n"]}),"\n",(0,c.jsxs)(t.p,{children:["Think of it like a restaurant: the waiter (",(0,c.jsx)(t.code,{children:"Ticket"}),") doesn't cook the food \u2014 they just take your order and pass it back to the kitchen (",(0,c.jsx)(t.code,{children:"TicketControl"}),"). The kitchen decides what to do with that information."]}),"\n",(0,c.jsx)(t.h2,{id:"our-roadmap",children:"Our Roadmap"}),"\n",(0,c.jsx)(t.p,{children:"We'll work through this in seven steps:"}),"\n",(0,c.jsxs)(t.ol,{children:["\n",(0,c.jsxs)(t.li,{children:["Create a placeholder ",(0,c.jsx)(t.code,{children:"TicketDetail"})," component"]}),"\n",(0,c.jsxs)(t.li,{children:["Add ",(0,c.jsx)(t.code,{children:"selectedTicket"})," state to ",(0,c.jsx)(t.code,{children:"TicketControl"})]}),"\n",(0,c.jsx)(t.li,{children:"Write a function to handle ticket selection"}),"\n",(0,c.jsxs)(t.li,{children:["Update the conditional rendering in ",(0,c.jsx)(t.code,{children:"TicketControl"})]}),"\n",(0,c.jsxs)(t.li,{children:["Pass the function down through ",(0,c.jsx)(t.code,{children:"TicketList"})," to ",(0,c.jsx)(t.code,{children:"Ticket"})]}),"\n",(0,c.jsxs)(t.li,{children:["Display the actual ticket data in ",(0,c.jsx)(t.code,{children:"TicketDetail"})]}),"\n",(0,c.jsx)(t.li,{children:'Fix the "Return to Ticket List" button'}),"\n"]}),"\n",(0,c.jsx)(t.p,{children:"Let's go!"}),"\n",(0,c.jsx)(t.hr,{}),"\n",(0,c.jsxs)(t.h2,{id:"step-1-create-the-ticketdetail-component",children:["Step 1: Create the ",(0,c.jsx)(t.code,{children:"TicketDetail"})," Component"]}),"\n",(0,c.jsxs)(t.p,{children:["We'll start simple \u2014 just a placeholder that proves our component works. Create a new file called ",(0,c.jsx)(t.code,{children:"TicketDetail.js"})," in the ",(0,c.jsx)(t.code,{children:"src/components"})," folder with this content:"]}),"\n",(0,c.jsx)(t.pre,{children:(0,c.jsx)(t.code,{className:"language-js",metastring:'title="src/components/TicketDetail.js"',children:'import React from "react";\n\nfunction TicketDetail(props) {\n  return (\n    <React.Fragment>\n      <h1>Ticket Detail</h1>\n      <p>You clicked on a ticket!</p>\n      <hr />\n    </React.Fragment>\n  );\n}\n\nexport default TicketDetail;\n'})}),"\n",(0,c.jsx)(t.p,{children:"Nothing fancy yet. We'll add the actual ticket data later once we confirm everything is connected properly."}),"\n",(0,c.jsx)(t.hr,{}),"\n",(0,c.jsx)(t.h2,{id:"step-2-add-state-to-track-the-selected-ticket",children:"Step 2: Add State to Track the Selected Ticket"}),"\n",(0,c.jsxs)(t.p,{children:["Now we need ",(0,c.jsx)(t.code,{children:"TicketControl"})," to remember which ticket (if any) the user has selected."]}),"\n",(0,c.jsxs)(t.p,{children:["Add this new state variable alongside the existing ones in ",(0,c.jsx)(t.code,{children:"TicketControl.js"}),":"]}),"\n",(0,c.jsx)(t.pre,{children:(0,c.jsx)(t.code,{className:"language-js",metastring:'title="src/components/TicketControl.js"',children:"// Inside the TicketControl component function\nconst [formVisibleOnPage, setFormVisibleOnPage] = useState(false);\nconst [mainTicketList, setMainTicketList] = useState([]);\nconst [selectedTicket, setSelectedTicket] = useState(null); // Add this line\n"})}),"\n",(0,c.jsxs)(t.p,{children:[(0,c.jsxs)(t.strong,{children:["Why ",(0,c.jsx)(t.code,{children:"null"}),"?"]})," Because when the app loads, no ticket is selected yet (the user has not clicked on one). We use ",(0,c.jsx)(t.code,{children:"null"}),' to represent "nothing selected." Later we\'ll update this state to hold the actual ticket object when the user clicks a ticket.']}),"\n",(0,c.jsx)(t.hr,{}),"\n",(0,c.jsx)(t.h2,{id:"step-3-write-the-selection-handler-function",children:"Step 3: Write the Selection Handler Function"}),"\n",(0,c.jsx)(t.p,{children:"When a user clicks a ticket, we need a function that:"}),"\n",(0,c.jsxs)(t.ol,{children:["\n",(0,c.jsxs)(t.li,{children:["Takes the ticket's ",(0,c.jsx)(t.code,{children:"id"})]}),"\n",(0,c.jsx)(t.li,{children:"Finds the matching ticket in our list"}),"\n",(0,c.jsxs)(t.li,{children:["Stores it in ",(0,c.jsx)(t.code,{children:"selectedTicket"})," state"]}),"\n"]}),"\n",(0,c.jsxs)(t.p,{children:["Add this function inside ",(0,c.jsx)(t.code,{children:"TicketControl"}),":"]}),"\n",(0,c.jsx)(t.pre,{children:(0,c.jsx)(t.code,{className:"language-js",metastring:'title="src/components/TicketControl.js"',children:"const handleChangingSelectedTicket = (id) => {\n  const selection = mainTicketList.find(ticket => ticket.id === id); // Find ticket with given id\n  setSelectedTicket(selection); // Store the selected ticket in state\n};\n"})}),"\n",(0,c.jsx)(t.p,{children:(0,c.jsx)(t.strong,{children:"Breaking this down:"})}),"\n",(0,c.jsxs)(t.ul,{children:["\n",(0,c.jsxs)(t.li,{children:[(0,c.jsx)(t.code,{children:"find()"})," returns the first ticket where ",(0,c.jsx)(t.code,{children:"ticket.id === id"})]}),"\n",(0,c.jsxs)(t.li,{children:[(0,c.jsx)(t.code,{children:"setSelectedTicket(selection)"})," updates our state, triggering a re-render"]}),"\n"]}),"\n",(0,c.jsx)(t.admonition,{title:"find() vs filter()",type:"tip",children:(0,c.jsxs)(t.p,{children:[(0,c.jsxs)(t.strong,{children:["Why ",(0,c.jsx)(t.code,{children:"find()"})," instead of ",(0,c.jsx)(t.code,{children:"filter()"}),"?"]})," ",(0,c.jsx)(t.code,{children:"find()"})," returns a single item (the first match), while ",(0,c.jsx)(t.code,{children:"filter()"})," returns an array of all matches. Since ticket IDs are unique, we only need one ticket, so ",(0,c.jsx)(t.code,{children:"find()"})," is the right choice here."]})}),"\n",(0,c.jsx)(t.hr,{}),"\n",(0,c.jsx)(t.h2,{id:"step-4-update-the-conditional-rendering",children:"Step 4: Update the Conditional Rendering"}),"\n",(0,c.jsxs)(t.p,{children:["Now we need to actually ",(0,c.jsx)(t.em,{children:"show"})," the ",(0,c.jsx)(t.code,{children:"TicketDetail"})," component with the selected ticket when a ticket is selected."]}),"\n",(0,c.jsxs)(t.p,{children:["First, import the ",(0,c.jsx)(t.code,{children:"TicketDetail"})," component at the top of ",(0,c.jsx)(t.code,{children:"TicketControl.js"}),":"]}),"\n",(0,c.jsx)(t.pre,{children:(0,c.jsx)(t.code,{className:"language-js",children:"import TicketDetail from './TicketDetail';\n"})}),"\n",(0,c.jsxs)(t.p,{children:["Then update the conditional rendering logic. Here's the key insight: ",(0,c.jsx)(t.strong,{children:"we now have three possible views"}),", and we need to check them in the right order:"]}),"\n",(0,c.jsxs)(t.ul,{children:["\n",(0,c.jsxs)(t.li,{children:[(0,c.jsx)(t.strong,{children:"1."})," If a ticket is selected, show ",(0,c.jsx)(t.code,{children:"TicketDetail"})," with that ticket."]}),"\n",(0,c.jsxs)(t.li,{children:["If no ticket is selected, either show the form or the list depending on ",(0,c.jsx)(t.code,{children:"formVisibleOnPage"})," state:\n",(0,c.jsxs)(t.ul,{children:["\n",(0,c.jsxs)(t.li,{children:[(0,c.jsx)(t.strong,{children:"2."})," If ",(0,c.jsx)(t.code,{children:"formVisibleOnPage"})," is true, show ",(0,c.jsx)(t.code,{children:"NewTicketForm"}),"."]}),"\n",(0,c.jsxs)(t.li,{children:[(0,c.jsx)(t.strong,{children:"3."})," Otherwise, show ",(0,c.jsx)(t.code,{children:"TicketList"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(t.pre,{children:(0,c.jsx)(t.code,{className:"language-js",metastring:'title="src/components/TicketControl.js"',children:'let currentlyVisibleState = null;\nlet buttonText = null;\n\nif (selectedTicket !== null) {\n  // A ticket is selected \u2192 show its details\n  currentlyVisibleState = <TicketDetail ticket={selectedTicket} />;\n  buttonText = "Return to Ticket List";\n} else if (formVisibleOnPage) {\n  // No ticket selected, but form should show \u2192 show the form\n  currentlyVisibleState = (\n    <NewTicketForm onNewTicketCreation={handleAddingNewTicketToList} />\n  );\n  buttonText = "Return to Ticket List";\n} else {\n  // Default \u2192 show the ticket list\n  currentlyVisibleState = (\n    <TicketList\n      ticketList={mainTicketList}\n      onTicketSelection={handleChangingSelectedTicket}\n    />\n  );\n  buttonText = "Add Ticket";\n}\n'})}),"\n",(0,c.jsx)(t.p,{children:(0,c.jsx)(t.strong,{children:"Notice two important things:"})}),"\n",(0,c.jsxs)(t.ol,{children:["\n",(0,c.jsxs)(t.li,{children:["\n",(0,c.jsxs)(t.p,{children:["We check ",(0,c.jsx)(t.code,{children:"selectedTicket"})," ",(0,c.jsx)(t.em,{children:"first"}),". Order matters! If a ticket is selected, we want to show its details regardless of what ",(0,c.jsx)(t.code,{children:"formVisibleOnPage"})," says."]}),"\n"]}),"\n",(0,c.jsxs)(t.li,{children:["\n",(0,c.jsxs)(t.p,{children:["We pass ",(0,c.jsx)(t.code,{children:"handleChangingSelectedTicket"})," to ",(0,c.jsx)(t.code,{children:"TicketList"})," as a prop called ",(0,c.jsx)(t.code,{children:"onTicketSelection"}),". This is how we'll eventually connect clicks to our handler."]}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(t.hr,{}),"\n",(0,c.jsxs)(t.h2,{id:"step-5-pass-the-function-through-ticketlist-to-ticket",children:["Step 5: Pass the Function Through ",(0,c.jsx)(t.code,{children:"TicketList"})," to ",(0,c.jsx)(t.code,{children:"Ticket"})]}),"\n",(0,c.jsxs)(t.p,{children:["Here's a tricky part. Our click handler lives in ",(0,c.jsx)(t.code,{children:"TicketControl"}),", but the actual clicking happens in ",(0,c.jsx)(t.code,{children:"Ticket"}),". We need to pass the function through ",(0,c.jsx)(t.code,{children:"TicketList"})," to get it there."]}),"\n",(0,c.jsxs)(t.p,{children:[(0,c.jsx)(t.strong,{children:"Think of it like passing a note in class:"})," ",(0,c.jsx)(t.code,{children:"TicketControl"})," writes the note, hands it to ",(0,c.jsx)(t.code,{children:"TicketList"}),", who hands it to ",(0,c.jsx)(t.code,{children:"Ticket"}),"."]}),"\n",(0,c.jsxs)(t.h3,{id:"update-ticketlist",children:["Update ",(0,c.jsx)(t.code,{children:"TicketList"})]}),"\n",(0,c.jsx)(t.pre,{children:(0,c.jsx)(t.code,{className:"language-js",metastring:'title="src/components/TicketList.js"',children:'import React from "react";\nimport Ticket from "./Ticket";\nimport PropTypes from "prop-types";\n\nfunction TicketList(props) {\n  return (\n    <React.Fragment>\n      <hr />\n      {props.ticketList.map((ticket) =>\n        <Ticket\n          whenTicketClicked={props.onTicketSelection} // pass the function\n          names={ticket.names}\n          location={ticket.location}\n          issue={ticket.issue}\n          id={ticket.id} // pass the ticket\'s id\n          key={ticket.id}\n        />\n      )}\n    </React.Fragment>\n  );\n}\n\nTicketList.propTypes = {\n  ticketList: PropTypes.array,\n  onTicketSelection: PropTypes.func // added prop type\n};\n\nexport default TicketList;\n'})}),"\n",(0,c.jsx)(t.p,{children:(0,c.jsx)(t.strong,{children:"What changed:"})}),"\n",(0,c.jsxs)(t.ul,{children:["\n",(0,c.jsxs)(t.li,{children:["We receive ",(0,c.jsx)(t.code,{children:"onTicketSelection"})," from ",(0,c.jsx)(t.code,{children:"TicketControl"})," (via ",(0,c.jsx)(t.code,{children:"props.onTicketSelection"}),")"]}),"\n",(0,c.jsxs)(t.li,{children:["We pass it down to each ",(0,c.jsx)(t.code,{children:"Ticket"})," as ",(0,c.jsx)(t.code,{children:"whenTicketClicked"})]}),"\n",(0,c.jsxs)(t.li,{children:["We pass the ticket's ",(0,c.jsx)(t.code,{children:"id"})," as a prop (each ",(0,c.jsx)(t.code,{children:"Ticket"})," needs to know its own ID)"]}),"\n",(0,c.jsxs)(t.li,{children:["We updated TicketList.propTypes to include ",(0,c.jsx)(t.code,{children:"onTicketSelection"})," as a function"]}),"\n"]}),"\n",(0,c.jsxs)(t.h3,{id:"update-ticket",children:["Update ",(0,c.jsx)(t.code,{children:"Ticket"})]}),"\n",(0,c.jsxs)(t.p,{children:["Now ",(0,c.jsx)(t.code,{children:"Ticket"})," has access to the click handler function. Let's make it call that function when clicked:"]}),"\n",(0,c.jsx)(t.pre,{children:(0,c.jsx)(t.code,{className:"language-js",metastring:'title="src/components/Ticket.js"',children:'import React from "react";\nimport PropTypes from "prop-types";\n\nfunction Ticket(props) {\n  return (\n    <React.Fragment>\n      <div onClick={() => props.whenTicketClicked(props.id)}>\n        <h3>{props.location} - {props.names}</h3>\n        <p><em>{props.issue}</em></p>\n        <hr />\n      </div>\n    </React.Fragment>\n  );\n}\n\nTicket.propTypes = {\n  names: PropTypes.string,\n  location: PropTypes.string,\n  issue: PropTypes.string,\n  id: PropTypes.string,\n  whenTicketClicked: PropTypes.func\n};\n\nexport default Ticket;\n'})}),"\n",(0,c.jsx)(t.p,{children:(0,c.jsx)(t.strong,{children:"The crucial line:"})}),"\n",(0,c.jsx)(t.pre,{children:(0,c.jsx)(t.code,{className:"language-jsx",children:"<div onClick={() => props.whenTicketClicked(props.id)}>\n"})}),"\n",(0,c.jsxs)(t.p,{children:[(0,c.jsx)(t.strong,{children:"Why the arrow function?"})," If we wrote ",(0,c.jsx)(t.code,{children:"onClick={props.whenTicketClicked(props.id)}"}),', the function would run immediately when the component renders \u2014 not when clicked! The arrow function says "when clicked, ',(0,c.jsx)(t.em,{children:"then"}),' call this function with this ID."']}),"\n",(0,c.jsxs)(t.p,{children:["At this point, if you click a ticket, you should see the ",(0,c.jsx)(t.code,{children:"TicketDetail"})," placeholder we made earlier. (Note that the Return to Ticket List button won't work yet; we'll fix that before the end of this lesson.)"]}),"\n",(0,c.jsxs)(t.p,{children:["Note that we also updated ",(0,c.jsx)(t.code,{children:"Ticket.propTypes"})," to include ",(0,c.jsx)(t.code,{children:"id"})," and ",(0,c.jsx)(t.code,{children:"whenTicketClicked"}),"."]}),"\n",(0,c.jsx)(t.hr,{}),"\n",(0,c.jsx)(t.h2,{id:"step-6-display-the-actual-ticket-data",children:"Step 6: Display the Actual Ticket Data"}),"\n",(0,c.jsxs)(t.p,{children:["Now that clicking works, let's update ",(0,c.jsx)(t.code,{children:"TicketDetail"})," to show real ticket information:"]}),"\n",(0,c.jsx)(t.pre,{children:(0,c.jsx)(t.code,{className:"language-js",metastring:'title="src/components/TicketDetail.js"',children:'import React from "react";\nimport PropTypes from "prop-types";\n\nfunction TicketDetail(props) {\n  const { ticket } = props;  // Destructure for cleaner code\n\n  return (\n    <React.Fragment>\n      <h1>Ticket Detail</h1>\n      <h3>{ticket.location} - {ticket.names}</h3>\n      <p><em>{ticket.issue}</em></p>\n      <hr />\n    </React.Fragment>\n  );\n}\n\nTicketDetail.propTypes = {\n  ticket: PropTypes.object\n};\n\nexport default TicketDetail;\n'})}),"\n",(0,c.jsx)(t.admonition,{title:"About destructuring",type:"tip",children:(0,c.jsxs)(t.p,{children:[(0,c.jsx)(t.strong,{children:(0,c.jsx)(t.code,{children:"const { ticket } = props"})})," is shorthand for ",(0,c.jsx)(t.strong,{children:(0,c.jsx)(t.code,{children:"const ticket = props.ticket"})}),". It makes the code cleaner, especially when accessing multiple properties."]})}),"\n",(0,c.jsx)(t.hr,{}),"\n",(0,c.jsx)(t.h2,{id:"step-7-fix-the-return-to-ticket-list-button",children:'Step 7: Fix the "Return to Ticket List" Button'}),"\n",(0,c.jsx)(t.p,{children:'Try clicking a ticket, then clicking "Return to Ticket List." Uh oh \u2014 it shows the form instead of the list!'}),"\n",(0,c.jsxs)(t.p,{children:["The problem is in the ",(0,c.jsx)(t.code,{children:"handleClick"})," function in the ",(0,c.jsx)(t.code,{children:"TicketControl"})," component. We need to clear ",(0,c.jsx)(t.code,{children:"selectedTicket"})," when returning to the ticket list because otherwise the conditional rendering still thinks a ticket is selected."]}),"\n",(0,c.jsx)(t.pre,{children:(0,c.jsx)(t.code,{className:"language-js",metastring:'title="src/components/TicketControl.js"',children:"const handleClick = () => {\n  if (selectedTicket !== null) {\n    // We're on the detail page \u2192 go back to the list\n    setFormVisibleOnPage(false);\n    setSelectedTicket(null);\n  } else {\n    // We're on the form or list \u2192 toggle the form\n    setFormVisibleOnPage(!formVisibleOnPage);\n  }\n};\n"})}),"\n",(0,c.jsx)(t.p,{children:(0,c.jsx)(t.strong,{children:"The logic:"})}),"\n",(0,c.jsxs)(t.ul,{children:["\n",(0,c.jsxs)(t.li,{children:["If ",(0,c.jsx)(t.code,{children:"selectedTicket"})," has a value, we must be viewing ticket details. Clear it to go back to the list."]}),"\n",(0,c.jsx)(t.li,{children:"Otherwise, toggle the form like before."}),"\n"]}),"\n",(0,c.jsx)(t.hr,{}),"\n",(0,c.jsx)(t.h2,{id:"recap-how-data-flows",children:"Recap: How Data Flows"}),"\n",(0,c.jsx)(t.p,{children:"Let's trace what happens when a user clicks a ticket:"}),"\n",(0,c.jsx)(t.pre,{children:(0,c.jsx)(t.code,{children:"User clicks ticket in Ticket component\n    \u2193\nonClick calls props.whenTicketClicked(props.id)\n    \u2193\nThat function is actually handleChangingSelectedTicket from TicketControl\n    \u2193\nhandleChangingSelectedTicket finds the ticket and calls setSelectedTicket\n    \u2193\nState updates, component re-renders\n    \u2193\nConditional sees selectedTicket !== null\n    \u2193\nTicketDetail renders with the selected ticket\n"})}),"\n",(0,c.jsxs)(t.p,{children:["The function travels ",(0,c.jsx)(t.em,{children:"down"})," through props. The data (which ticket was clicked) travels back ",(0,c.jsx)(t.em,{children:"up"})," through that function call. This pattern \u2014 passing functions as props to handle events is fundamental to React."]}),"\n",(0,c.jsx)(t.hr,{}),"\n",(0,c.jsx)(t.h2,{id:"summary",children:"Summary"}),"\n",(0,c.jsx)(t.p,{children:"Here's what we accomplished:"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,c.jsxs)(t.table,{children:[(0,c.jsx)(t.thead,{children:(0,c.jsxs)(t.tr,{children:[(0,c.jsx)(t.th,{children:"Component"}),(0,c.jsx)(t.th,{children:"What It Does"})]})}),(0,c.jsxs)(t.tbody,{children:[(0,c.jsxs)(t.tr,{children:[(0,c.jsx)(t.td,{children:(0,c.jsx)(t.code,{children:"TicketControl"})}),(0,c.jsxs)(t.td,{children:["Holds ",(0,c.jsx)(t.code,{children:"selectedTicket"})," state; provides ",(0,c.jsx)(t.code,{children:"handleChangingSelectedTicket"})," function"]})]}),(0,c.jsxs)(t.tr,{children:[(0,c.jsx)(t.td,{children:(0,c.jsx)(t.code,{children:"TicketList"})}),(0,c.jsxs)(t.td,{children:["Passes the handler function down to each ",(0,c.jsx)(t.code,{children:"Ticket"})]})]}),(0,c.jsxs)(t.tr,{children:[(0,c.jsx)(t.td,{children:(0,c.jsx)(t.code,{children:"Ticket"})}),(0,c.jsx)(t.td,{children:"Calls the handler with its ID when clicked"})]}),(0,c.jsxs)(t.tr,{children:[(0,c.jsx)(t.td,{children:(0,c.jsx)(t.code,{children:"TicketDetail"})}),(0,c.jsx)(t.td,{children:"Displays the selected ticket's information"})]})]})]}),"\n",(0,c.jsx)(t.p,{children:'This pattern of "lifting state up" to a parent component and passing handlers down is one you\'ll use constantly in React. It might feel awkward at first, but with practice it becomes second nature.'}),"\n",(0,c.jsx)(t.p,{children:"If you've been holding your breath (hopefully not), you can breathe out now. All of these steps may seem overly complicated at first. There are a lot of moving parts in a React application, especially once we start passing around a lot of props. Good planning is very important. Ultimately, the content in this lesson will be more likely to click if you code along with it."}),"\n",(0,c.jsxs)(t.p,{children:["Practice is also important, and at least in the short term, try to look at bugs as a potential teacher as opposed to a source of frustration. Bugs ",(0,c.jsx)(t.em,{children:"will"})," happen, especially at first. It can be challenging to keep track of all the props that need to be passed around \u2014 along with all the other little details that come with adding a core piece of functionality. However, React error messages tend to be very informative, so follow your errors up and down the component tree until you see where everything connects."]}),"\n",(0,c.jsx)(t.hr,{}),"\n",(0,c.jsx)(t.h2,{id:"troubleshooting-common-issues",children:"Troubleshooting Common Issues"}),"\n",(0,c.jsx)(t.p,{children:(0,c.jsx)(t.strong,{children:'"Nothing happens when I click a ticket"'})}),"\n",(0,c.jsxs)(t.ul,{children:["\n",(0,c.jsxs)(t.li,{children:["Check that ",(0,c.jsx)(t.code,{children:"onClick"})," uses an arrow function: ",(0,c.jsx)(t.code,{children:"onClick={() => ...}"})]}),"\n",(0,c.jsx)(t.li,{children:"Verify the function is being passed down through each component"}),"\n",(0,c.jsxs)(t.li,{children:["Add ",(0,c.jsx)(t.code,{children:"console.log"})," statements to trace where the chain breaks"]}),"\n"]}),"\n",(0,c.jsx)(t.p,{children:(0,c.jsx)(t.strong,{children:'"I see the form instead of the ticket list"'})}),"\n",(0,c.jsxs)(t.ul,{children:["\n",(0,c.jsxs)(t.li,{children:["Make sure you updated ",(0,c.jsx)(t.code,{children:"handleClick"})," to check ",(0,c.jsx)(t.code,{children:"selectedTicket"})]}),"\n",(0,c.jsxs)(t.li,{children:["Verify the order of your conditionals (check ",(0,c.jsx)(t.code,{children:"selectedTicket"})," first)"]}),"\n"]}),"\n",(0,c.jsx)(t.p,{children:(0,c.jsx)(t.strong,{children:'"Props are undefined"'})}),"\n",(0,c.jsxs)(t.ul,{children:["\n",(0,c.jsx)(t.li,{children:"Double-check spelling of prop names at each level"}),"\n",(0,c.jsxs)(t.li,{children:["Make sure you're accessing ",(0,c.jsx)(t.code,{children:"props.propName"}),", not just ",(0,c.jsx)(t.code,{children:"propName"})]}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,c.jsx)(t,{...e,children:(0,c.jsx)(a,{...e})}):a(e)}}}]);