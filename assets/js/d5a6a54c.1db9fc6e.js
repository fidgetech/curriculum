"use strict";(self.webpackChunklhtp=self.webpackChunklhtp||[]).push([[31094],{13589:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>s,metadata:()=>i,toc:()=>r});const i=JSON.parse('{"id":"react/react-fundamentals/4-2-3-8-updating-a-ticket","title":"\ud83d\udcd3 4.2.3.8 Updating a Ticket","description":"In this lesson, we\'ll add the final piece of CRUD functionality to our Help Queue: the ability to update a ticket.","source":"@site/versioned_docs/version-v1_3/4_react/2_react-fundamentals/4-2-3-08-updating-a-ticket.md","sourceDirName":"4_react/2_react-fundamentals","slug":"/react/react-fundamentals/4-2-3-8-updating-a-ticket","permalink":"/v1.3/react/react-fundamentals/4-2-3-8-updating-a-ticket","draft":false,"unlisted":false,"tags":[],"version":"v1_3","frontMatter":{"title":"\ud83d\udcd3 4.2.3.8 Updating a Ticket","day":"wednesday","id":"4-2-3-8-updating-a-ticket","hide_table_of_contents":true},"sidebar":"react","previous":{"title":"\ud83d\udcd3 4.2.3.7 Reusing Components","permalink":"/v1.3/react/react-fundamentals/4-2-3-7-reusing-components"},"next":{"title":"\ud83d\udcd3 4.2.3.9 Leveraging LinkedIn","permalink":"/v1.3/react/react-fundamentals/4-2-3-9-leveraging-linkedin"}}');var c=n(74848),d=n(28453);const s={title:"\ud83d\udcd3 4.2.3.8 Updating a Ticket",day:"wednesday",id:"4-2-3-8-updating-a-ticket",hide_table_of_contents:!0},o=void 0,l={},r=[{value:"Planning the Component Structure",id:"planning-the-component-structure",level:2},{value:"The Two Behaviors We Need",id:"the-two-behaviors-we-need",level:2},{value:"Our Roadmap",id:"our-roadmap",level:2},{value:"Step 1: Add the <code>editing</code> State Variable",id:"step-1-add-the-editing-state-variable",level:2},{value:"Step 2: Write the <code>handleEditClick</code> Function",id:"step-2-write-the-handleeditclick-function",level:2},{value:"Step 3: Pass <code>handleEditClick</code> to <code>TicketDetail</code>",id:"step-3-pass-handleeditclick-to-ticketdetail",level:2},{value:"Step 4: Add an &quot;Update&quot; Button to <code>TicketDetail</code>",id:"step-4-add-an-update-button-to-ticketdetail",level:2},{value:"Step 5: Create the <code>EditTicketForm</code> Component",id:"step-5-create-the-editticketform-component",level:2},{value:"Step 6: Add Conditional Rendering for the Edit Form",id:"step-6-add-conditional-rendering-for-the-edit-form",level:2},{value:"Our Roadmap",id:"our-roadmap-1",level:2},{value:"Step 1: Write the <code>handleEditTicket</code> Function",id:"step-1-write-the-handleeditticket-function",level:2},{value:"Step 2: Pass the Function to <code>EditTicketForm</code>",id:"step-2-pass-the-function-to-editticketform",level:2},{value:"Step 3: Complete the <code>EditTicketForm</code> Component",id:"step-3-complete-the-editticketform-component",level:2},{value:"Fixing the Last Bug",id:"fixing-the-last-bug",level:2},{value:"Recap: The Complete Help Queue",id:"recap-the-complete-help-queue",level:2},{value:"A Note on Complexity",id:"a-note-on-complexity",level:2},{value:"Summary",id:"summary",level:2}];function a(e){const t={admonition:"admonition",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(t.p,{children:"In this lesson, we'll add the final piece of CRUD functionality to our Help Queue: the ability to update a ticket."}),"\n",(0,c.jsx)(t.h2,{id:"planning-the-component-structure",children:"Planning the Component Structure"}),"\n",(0,c.jsxs)(t.p,{children:["Before we start coding, let's think about where ",(0,c.jsx)(t.code,{children:"EditTicketForm"})," should live. We'll make it a direct child of ",(0,c.jsx)(t.code,{children:"TicketControl"}),":"]}),"\n",(0,c.jsx)(t.p,{children:(0,c.jsx)(t.img,{alt:"Our component tree will have our new EditTicketForm as a direct child of TicketControl.",src:n(52552).A+"",width:"651",height:"311"})}),"\n",(0,c.jsx)(t.p,{children:(0,c.jsx)(t.strong,{children:"Why this placement?"})}),"\n",(0,c.jsxs)(t.ul,{children:["\n",(0,c.jsxs)(t.li,{children:[(0,c.jsx)(t.code,{children:"TicketControl"})," already manages state"]}),"\n",(0,c.jsxs)(t.li,{children:[(0,c.jsx)(t.code,{children:"TicketControl"})," already handles conditional rendering"]}),"\n",(0,c.jsxs)(t.li,{children:["Props only need to be passed down one level to ",(0,c.jsx)(t.code,{children:"EditTicketForm"})]}),"\n"]}),"\n",(0,c.jsx)(t.p,{children:"This isn't the only valid approach, but it's straightforward and builds on patterns we've already established."}),"\n",(0,c.jsx)(t.h2,{id:"the-two-behaviors-we-need",children:"The Two Behaviors We Need"}),"\n",(0,c.jsx)(t.p,{children:"Let's think about this from the user's perspective:"}),"\n",(0,c.jsx)(t.p,{children:(0,c.jsx)(t.strong,{children:"Behavior 1: Navigate to the edit form"})}),"\n",(0,c.jsxs)(t.blockquote,{children:["\n",(0,c.jsx)(t.p,{children:'When viewing a ticket\'s details, clicking "Update Ticket" shows an edit form.'}),"\n"]}),"\n",(0,c.jsx)(t.p,{children:(0,c.jsx)(t.strong,{children:"Behavior 2: Submit the edit"})}),"\n",(0,c.jsxs)(t.blockquote,{children:["\n",(0,c.jsx)(t.p,{children:"When the edit form is submitted, the ticket updates and the user returns to the ticket list."}),"\n"]}),"\n",(0,c.jsx)(t.p,{children:"We'll implement these one at a time."}),"\n",(0,c.jsx)(t.hr,{}),"\n",(0,c.jsx)(t.h1,{id:"behavior-1-toggle-the-edit-form",children:"Behavior 1: Toggle the Edit Form"}),"\n",(0,c.jsx)(t.h2,{id:"our-roadmap",children:"Our Roadmap"}),"\n",(0,c.jsxs)(t.ol,{children:["\n",(0,c.jsxs)(t.li,{children:["Add an ",(0,c.jsx)(t.code,{children:"editing"})," state variable to ",(0,c.jsx)(t.code,{children:"TicketControl"})]}),"\n",(0,c.jsxs)(t.li,{children:["Add a ",(0,c.jsx)(t.code,{children:"handleEditClick"})," function to ",(0,c.jsx)(t.code,{children:"TicketControl"})]}),"\n",(0,c.jsxs)(t.li,{children:["Pass ",(0,c.jsx)(t.code,{children:"handleEditClick"})," to ",(0,c.jsx)(t.code,{children:"TicketDetail"})," as a prop"]}),"\n",(0,c.jsxs)(t.li,{children:['Add an "Update" button to ',(0,c.jsx)(t.code,{children:"TicketDetail"})]}),"\n",(0,c.jsx)(t.li,{children:"Create a placeholder component to represent the edit form"}),"\n",(0,c.jsxs)(t.li,{children:["Update conditional rendering in ",(0,c.jsx)(t.code,{children:"TicketControl"})," to show the edit form"]}),"\n"]}),"\n",(0,c.jsx)(t.hr,{}),"\n",(0,c.jsxs)(t.h2,{id:"step-1-add-the-editing-state-variable",children:["Step 1: Add the ",(0,c.jsx)(t.code,{children:"editing"})," State Variable"]}),"\n",(0,c.jsx)(t.p,{children:'Add a new state variable to track whether we\'re in "edit mode":'}),"\n",(0,c.jsx)(t.pre,{children:(0,c.jsx)(t.code,{className:"language-js",metastring:'title="src/components/TicketControl.js"',children:"const [formVisibleOnPage, setFormVisibleOnPage] = useState(false);\nconst [mainTicketList, setMainTicketList] = useState([]);\nconst [selectedTicket, setSelectedTicket] = useState(null);\nconst [editing, setEditing] = useState(false); // Add this line\n"})}),"\n",(0,c.jsxs)(t.p,{children:["We initialize ",(0,c.jsx)(t.code,{children:"editing"})," to ",(0,c.jsx)(t.code,{children:"false"})," because we don't want to show the edit form until the user goes to update a ticket."]}),"\n",(0,c.jsx)(t.hr,{}),"\n",(0,c.jsxs)(t.h2,{id:"step-2-write-the-handleeditclick-function",children:["Step 2: Write the ",(0,c.jsx)(t.code,{children:"handleEditClick"})," Function"]}),"\n",(0,c.jsxs)(t.p,{children:["Add a ",(0,c.jsx)(t.code,{children:"handleEditClick"})," function to ",(0,c.jsx)(t.code,{children:"TicketControl"}),' to handle when the user clicks "Update Ticket". This function simply flips ',(0,c.jsx)(t.code,{children:"editing"})," to ",(0,c.jsx)(t.code,{children:"true"}),":"]}),"\n",(0,c.jsx)(t.pre,{children:(0,c.jsx)(t.code,{className:"language-js",metastring:'title="src/components/TicketControl.js"',children:"const handleEditClick = () => {\n  setEditing(true);\n};\n"})}),"\n",(0,c.jsx)(t.hr,{}),"\n",(0,c.jsxs)(t.h2,{id:"step-3-pass-handleeditclick-to-ticketdetail",children:["Step 3: Pass ",(0,c.jsx)(t.code,{children:"handleEditClick"})," to ",(0,c.jsx)(t.code,{children:"TicketDetail"})]}),"\n",(0,c.jsxs)(t.p,{children:["Update the conditional rendering in ",(0,c.jsx)(t.code,{children:"TicketControl"})," to pass our new ",(0,c.jsx)(t.code,{children:"handleEditClick"})," function as a prop to ",(0,c.jsx)(t.code,{children:"TicketDetail"})," so that ",(0,c.jsx)(t.code,{children:"TicketDetail"}),' can call it when the user clicks the "Update Ticket" button:']}),"\n",(0,c.jsx)(t.pre,{children:(0,c.jsx)(t.code,{className:"language-js",metastring:'title="src/components/TicketControl.js"',children:'if (selectedTicket !== null) {\n  currentlyVisibleState = (\n    <TicketDetail\n      ticket={selectedTicket}\n      onClickingDelete={handleDeleteTicket}\n      onClickingEdit={handleEditClick} // Add this line\n    />\n  );\n  buttonText = "Return to Ticket List";\n}\n'})}),"\n",(0,c.jsx)(t.hr,{}),"\n",(0,c.jsxs)(t.h2,{id:"step-4-add-an-update-button-to-ticketdetail",children:['Step 4: Add an "Update" Button to ',(0,c.jsx)(t.code,{children:"TicketDetail"})]}),"\n",(0,c.jsxs)(t.p,{children:["Now update ",(0,c.jsx)(t.code,{children:"TicketDetail"})," to use the new prop:"]}),"\n",(0,c.jsx)(t.pre,{children:(0,c.jsx)(t.code,{className:"language-jsx",metastring:'title="src/components/TicketDetail.js"',children:'import React from "react";\nimport PropTypes from "prop-types";\n\nfunction TicketDetail(props) {\n  const { ticket, onClickingDelete, onClickingEdit } = props; // Destructure onClickingEdit\n\n  return (\n    <React.Fragment>\n      <h1>Ticket Detail</h1>\n      <h3>{ticket.location} - {ticket.names}</h3>\n      <p><em>{ticket.issue}</em></p>\n      <button onClick={onClickingEdit}>Update Ticket</button> {/* Call onClickingEdit when clicked */}\n      <button onClick={() => onClickingDelete(ticket.id)}>Close Ticket</button>\n      <hr />\n    </React.Fragment>\n  );\n}\n\nTicketDetail.propTypes = {\n  ticket: PropTypes.object,\n  onClickingDelete: PropTypes.func,\n  onClickingEdit: PropTypes.func // Add PropType for onClickingEdit\n};\n\nexport default TicketDetail;\n'})}),"\n",(0,c.jsx)(t.admonition,{type:"tip",children:(0,c.jsxs)(t.p,{children:[(0,c.jsx)(t.code,{children:"onClickingEdit"})," doesn't need an arrow function wrapper because we're not passing any arguments. So we can just write ",(0,c.jsx)(t.code,{children:"onClick={onClickingEdit}"}),"."]})}),"\n",(0,c.jsxs)(t.p,{children:['At this point, clicking "Update Ticket" will set ',(0,c.jsx)(t.code,{children:"editing"})," to ",(0,c.jsx)(t.code,{children:"true"}),". You can verify this in React DevTools."]}),"\n",(0,c.jsx)(t.hr,{}),"\n",(0,c.jsxs)(t.h2,{id:"step-5-create-the-editticketform-component",children:["Step 5: Create the ",(0,c.jsx)(t.code,{children:"EditTicketForm"})," Component"]}),"\n",(0,c.jsxs)(t.p,{children:["Create a new file ",(0,c.jsx)(t.code,{children:"EditTicketForm.js"})," in the ",(0,c.jsx)(t.code,{children:"src/components"})," directory. For now, we'll just make it a placeholder that uses our existing ",(0,c.jsx)(t.code,{children:"ReusableForm"})," component:"]}),"\n",(0,c.jsx)(t.pre,{children:(0,c.jsx)(t.code,{className:"language-js",metastring:'title="src/components/EditTicketForm.js"',children:'import React from "react";\nimport ReusableForm from "./ReusableForm";\n\nfunction EditTicketForm() {\n  return (\n    <React.Fragment>\n      <ReusableForm buttonText="Update Ticket" />\n    </React.Fragment>\n  );\n}\n\nexport default EditTicketForm;\n'})}),"\n",(0,c.jsx)(t.p,{children:"The \"Update Ticket\" button won't work correctly yet \u2014 we'll wire that up in Behavior 2."}),"\n",(0,c.jsx)(t.hr,{}),"\n",(0,c.jsx)(t.h2,{id:"step-6-add-conditional-rendering-for-the-edit-form",children:"Step 6: Add Conditional Rendering for the Edit Form"}),"\n",(0,c.jsxs)(t.p,{children:["First we need to add an import line for ",(0,c.jsx)(t.code,{children:"EditTicketForm"})," at the top of ",(0,c.jsx)(t.code,{children:"TicketControl"}),":"]}),"\n",(0,c.jsx)(t.pre,{children:(0,c.jsx)(t.code,{className:"language-js",metastring:'title="src/components/TicketControl.js"',children:"import EditTicketForm from './EditTicketForm';\n"})}),"\n",(0,c.jsxs)(t.p,{children:["Now add a new conditional at the top of the rendering logic in ",(0,c.jsx)(t.code,{children:"TicketControl"}),", so that when ",(0,c.jsx)(t.code,{children:"editing"})," is ",(0,c.jsx)(t.code,{children:"true"}),", we show the ",(0,c.jsx)(t.code,{children:"EditTicketForm"}),":"]}),"\n",(0,c.jsx)(t.pre,{children:(0,c.jsx)(t.code,{className:"language-js",metastring:'title="src/components/TicketControl.js"',children:'import EditTicketForm from \'./EditTicketForm\';\n\n// ... inside TicketControl function\n\nlet currentlyVisibleState = null;\nlet buttonText = null;\n\nif (editing) {\n  currentlyVisibleState = (\n    <EditTicketForm ticket={selectedTicket} />\n  );\n  buttonText = "Return to Ticket List";\n} else if (selectedTicket !== null) {\n  currentlyVisibleState = (\n    <TicketDetail\n      ticket={selectedTicket}\n      onClickingDelete={handleDeleteTicket}\n      onClickingEdit={handleEditClick}\n    />\n  );\n  buttonText = "Return to Ticket List";\n} else if (formVisibleOnPage) {\n  // ... rest of conditionals\n}\n'})}),"\n",(0,c.jsxs)(t.p,{children:[(0,c.jsxs)(t.strong,{children:["Why check ",(0,c.jsx)(t.code,{children:"editing"})," first?"]})," When editing, both ",(0,c.jsx)(t.code,{children:"editing"})," is ",(0,c.jsx)(t.code,{children:"true"})," AND ",(0,c.jsx)(t.code,{children:"selectedTicket"})," is not ",(0,c.jsx)(t.code,{children:"null"}),". We need to check ",(0,c.jsx)(t.code,{children:"editing"})," first so we show the form instead of the detail view."]}),"\n",(0,c.jsx)(t.p,{children:"Test it! You should be able to:"}),"\n",(0,c.jsxs)(t.ol,{children:["\n",(0,c.jsx)(t.li,{children:"Click a ticket to see its details"}),"\n",(0,c.jsx)(t.li,{children:'Click "Update Ticket" to see the edit form'}),"\n",(0,c.jsx)(t.li,{children:'Click "Return to Ticket List" to go back'}),"\n"]}),"\n",(0,c.jsx)(t.p,{children:"The form won't actually update anything yet; that's Behavior 2."}),"\n",(0,c.jsx)(t.hr,{}),"\n",(0,c.jsx)(t.h1,{id:"behavior-2-editing-a-ticket",children:"Behavior 2: Editing a Ticket"}),"\n",(0,c.jsx)(t.p,{children:"Now let's make the form actually work."}),"\n",(0,c.jsx)(t.h2,{id:"our-roadmap-1",children:"Our Roadmap"}),"\n",(0,c.jsxs)(t.ol,{children:["\n",(0,c.jsxs)(t.li,{children:["Write ",(0,c.jsx)(t.code,{children:"handleEditTicket"})," in ",(0,c.jsx)(t.code,{children:"TicketControl"})]}),"\n",(0,c.jsxs)(t.li,{children:["Pass it to ",(0,c.jsx)(t.code,{children:"EditTicketForm"})]}),"\n",(0,c.jsxs)(t.li,{children:["Add form submission handling to ",(0,c.jsx)(t.code,{children:"EditTicketForm"})]}),"\n"]}),"\n",(0,c.jsx)(t.hr,{}),"\n",(0,c.jsxs)(t.h2,{id:"step-1-write-the-handleeditticket-function",children:["Step 1: Write the ",(0,c.jsx)(t.code,{children:"handleEditTicket"})," Function"]}),"\n",(0,c.jsxs)(t.p,{children:["Add a ",(0,c.jsx)(t.code,{children:"handleEditTicket"})," function in ",(0,c.jsx)(t.code,{children:"TicketControl"}),". This handler needs to:"]}),"\n",(0,c.jsxs)(t.ul,{children:["\n",(0,c.jsx)(t.li,{children:"Replace the old ticket with the edited one"}),"\n",(0,c.jsxs)(t.li,{children:["Clear ",(0,c.jsx)(t.code,{children:"selectedTicket"})," and ",(0,c.jsx)(t.code,{children:"editing"})," to return to the list"]}),"\n"]}),"\n",(0,c.jsx)(t.pre,{children:(0,c.jsx)(t.code,{className:"language-js",metastring:'title="src/components/TicketControl.js"',children:"const handleEditTicket = (ticketToEdit) => {\n  // Create a new ticket list array, removing the old ticket and adding the edited one\n  const editedTicketList = mainTicketList\n    .filter(ticket => ticket.id !== selectedTicket.id)\n    .concat(ticketToEdit);\n\n  // Update state - replace the old ticket list with the new one\n  setMainTicketList(editedTicketList);\n\n  // Exit editing mode\n  setEditing(false);\n  setSelectedTicket(null);\n};\n"})}),"\n",(0,c.jsx)(t.p,{children:(0,c.jsx)(t.strong,{children:"Breaking this down:"})}),"\n",(0,c.jsx)(t.pre,{children:(0,c.jsx)(t.code,{className:"language-js",children:"const editedTicketList = mainTicketList\n  .filter(ticket => ticket.id !== selectedTicket.id)  // Remove old version\n  .concat(ticketToEdit);                               // Add new version\n"})}),"\n",(0,c.jsx)(t.p,{children:"We're not directly mutating the ticket \u2014 we're replacing it entirely. This is a common pattern in React: filter out the old, add the new."}),"\n",(0,c.jsx)(t.admonition,{title:"Method chaining",type:"tip",children:(0,c.jsxs)(t.p,{children:["Writing each chained method on its own line (",(0,c.jsx)(t.code,{children:".filter()"})," then ",(0,c.jsx)(t.code,{children:".concat()"}),") makes the code easier to read. It works exactly the same as writing it all on one line."]})}),"\n",(0,c.jsxs)(t.admonition,{title:"Preserving Order",type:"tip",children:[(0,c.jsxs)(t.p,{children:["Using ",(0,c.jsx)(t.code,{children:"filter().concat()"})," moves the edited ticket to the end of the list. If you need to preserve the ticket's position, you could use ",(0,c.jsx)(t.code,{children:"map()"})," instead:"]}),(0,c.jsx)(t.pre,{children:(0,c.jsx)(t.code,{className:"language-js",children:"// ternary operator inside map\n// if ticket.id matches, use ticketToEdit; otherwise, keep the original ticket\nconst editedTicketList = mainTicketList.map(ticket => \n  ticket.id === selectedTicket.id ? ticketToEdit : ticket\n);\n"})}),(0,c.jsx)(t.p,{children:"This replaces the matching ticket in place. Both approaches are valid - choose based on whether order matters in your application."})]}),"\n",(0,c.jsx)(t.hr,{}),"\n",(0,c.jsxs)(t.h2,{id:"step-2-pass-the-function-to-editticketform",children:["Step 2: Pass the Function to ",(0,c.jsx)(t.code,{children:"EditTicketForm"})]}),"\n",(0,c.jsxs)(t.p,{children:["Update the conditional in ",(0,c.jsx)(t.code,{children:"TicketControl"})," to pass our new function to ",(0,c.jsx)(t.code,{children:"EditTicketForm"}),":"]}),"\n",(0,c.jsx)(t.pre,{children:(0,c.jsx)(t.code,{className:"language-js",metastring:'title="src/components/TicketControl.js"',children:'if (editing) {\n  currentlyVisibleState = (\n    <EditTicketForm\n      ticket={selectedTicket}\n      onEditTicket={handleEditTicket}\n    />\n  );\n  buttonText = "Return to Ticket List";\n}\n'})}),"\n",(0,c.jsx)(t.hr,{}),"\n",(0,c.jsx)(t.hr,{}),"\n",(0,c.jsxs)(t.h2,{id:"step-3-complete-the-editticketform-component",children:["Step 3: Complete the ",(0,c.jsx)(t.code,{children:"EditTicketForm"})," Component"]}),"\n",(0,c.jsx)(t.p,{children:"Now we add the form submission logic:"}),"\n",(0,c.jsx)(t.pre,{children:(0,c.jsx)(t.code,{className:"language-js",metastring:'title="src/components/EditTicketForm.js"',children:'import React from "react";\nimport PropTypes from "prop-types";\nimport ReusableForm from "./ReusableForm";\n\nfunction EditTicketForm(props) {\n  const { ticket, onEditTicket } = props;\n\n  function handleEditTicketFormSubmission(event) {\n    event.preventDefault();\n    onEditTicket({\n      names: event.target.names.value,\n      location: event.target.location.value,\n      issue: event.target.issue.value,\n      id: ticket.id\n    });\n  }\n\n  return (\n    <React.Fragment>\n      <ReusableForm\n        formSubmissionHandler={handleEditTicketFormSubmission}\n        buttonText="Update Ticket"\n      />\n    </React.Fragment>\n  );\n}\n\nEditTicketForm.propTypes = {\n  ticket: PropTypes.object,\n  onEditTicket: PropTypes.func\n};\n\nexport default EditTicketForm;\n'})}),"\n",(0,c.jsx)(t.p,{children:(0,c.jsx)(t.strong,{children:"Walking through this:"})}),"\n",(0,c.jsxs)(t.ol,{children:["\n",(0,c.jsxs)(t.li,{children:["We import ",(0,c.jsx)(t.code,{children:"PropTypes"})," and accept ",(0,c.jsx)(t.code,{children:"props"})," as a parameter. Our placeholder didn't need these, but now we're using actual data"]}),"\n",(0,c.jsxs)(t.li,{children:["We destructure ",(0,c.jsx)(t.code,{children:"ticket"})," and ",(0,c.jsx)(t.code,{children:"onEditTicket"})," from props"]}),"\n",(0,c.jsxs)(t.li,{children:[(0,c.jsx)(t.code,{children:"handleEditTicketFormSubmission"})," does three things:\n",(0,c.jsxs)(t.ul,{children:["\n",(0,c.jsx)(t.li,{children:"Prevents the default form submission behavior"}),"\n",(0,c.jsx)(t.li,{children:"Builds a ticket object from the form values"}),"\n",(0,c.jsxs)(t.li,{children:["Calls ",(0,c.jsx)(t.code,{children:"onEditTicket"})," (which is really ",(0,c.jsx)(t.code,{children:"handleEditTicket"})," in ",(0,c.jsx)(t.code,{children:"TicketControl"}),")"]}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(t.li,{children:["We pass ",(0,c.jsx)(t.code,{children:"handleEditTicketFormSubmission"})," to ",(0,c.jsx)(t.code,{children:"ReusableForm"})," so it runs on submit"]}),"\n"]}),"\n",(0,c.jsxs)(t.p,{children:[(0,c.jsx)(t.strong,{children:"Key detail:"})," We use ",(0,c.jsx)(t.code,{children:"ticket.id"})," to preserve the original ID. The form provides new values for ",(0,c.jsx)(t.code,{children:"names"}),", ",(0,c.jsx)(t.code,{children:"location"}),", and ",(0,c.jsx)(t.code,{children:"issue"}),", but the ticket keeps its id."]}),"\n",(0,c.jsx)(t.hr,{}),"\n",(0,c.jsx)(t.h2,{id:"fixing-the-last-bug",children:"Fixing the Last Bug"}),"\n",(0,c.jsx)(t.p,{children:"Try this sequence:"}),"\n",(0,c.jsxs)(t.ol,{children:["\n",(0,c.jsx)(t.li,{children:"Click a ticket"}),"\n",(0,c.jsx)(t.li,{children:'Click "Update Ticket"'}),"\n",(0,c.jsx)(t.li,{children:'Click "Return to Ticket List"'}),"\n",(0,c.jsx)(t.li,{children:"Click another ticket and try to edit it"}),"\n"]}),"\n",(0,c.jsxs)(t.p,{children:["You'll get an error! The problem is in ",(0,c.jsx)(t.code,{children:"handleClick"}),":"]}),"\n",(0,c.jsx)(t.pre,{children:(0,c.jsx)(t.code,{className:"language-js",metastring:'title="src/components/TicketControl.js"',children:"const handleClick = () => {\n  if (selectedTicket !== null) {\n    setFormVisibleOnPage(false);\n    setSelectedTicket(null);\n    setEditing(false);  // Add this line!\n  } else {\n    setFormVisibleOnPage(!formVisibleOnPage);\n  }\n};\n"})}),"\n",(0,c.jsxs)(t.p,{children:[(0,c.jsx)(t.strong,{children:"What was happening:"}),' When clicking "Return to Ticket List" from the edit form, ',(0,c.jsx)(t.code,{children:"selectedTicket"})," was cleared but ",(0,c.jsx)(t.code,{children:"editing"})," stayed ",(0,c.jsx)(t.code,{children:"true"}),". The next time you tried to edit, the form tried to render without a valid ticket."]}),"\n",(0,c.jsx)(t.hr,{}),"\n",(0,c.jsx)(t.h2,{id:"recap-the-complete-help-queue",children:"Recap: The Complete Help Queue"}),"\n",(0,c.jsx)(t.p,{children:"We now have full CRUD functionality! Here's how our components work together:"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,c.jsxs)(t.table,{children:[(0,c.jsx)(t.thead,{children:(0,c.jsxs)(t.tr,{children:[(0,c.jsx)(t.th,{children:"Component"}),(0,c.jsx)(t.th,{children:"State"}),(0,c.jsx)(t.th,{children:"Responsibilities"})]})}),(0,c.jsxs)(t.tbody,{children:[(0,c.jsxs)(t.tr,{children:[(0,c.jsx)(t.td,{children:(0,c.jsx)(t.code,{children:"TicketControl"})}),(0,c.jsxs)(t.td,{children:[(0,c.jsx)(t.code,{children:"mainTicketList"}),", ",(0,c.jsx)(t.code,{children:"selectedTicket"}),", ",(0,c.jsx)(t.code,{children:"formVisibleOnPage"}),", ",(0,c.jsx)(t.code,{children:"editing"})]}),(0,c.jsx)(t.td,{children:"Manages all shared and local state; decides which view to render; provides handler functions to child components"})]}),(0,c.jsxs)(t.tr,{children:[(0,c.jsx)(t.td,{children:(0,c.jsx)(t.code,{children:"TicketList"})}),(0,c.jsx)(t.td,{children:"None"}),(0,c.jsxs)(t.td,{children:["Renders all tickets; passes click handler to each ",(0,c.jsx)(t.code,{children:"Ticket"})]})]}),(0,c.jsxs)(t.tr,{children:[(0,c.jsx)(t.td,{children:(0,c.jsx)(t.code,{children:"Ticket"})}),(0,c.jsx)(t.td,{children:"None"}),(0,c.jsx)(t.td,{children:"Renders one ticket's summary; calls handler when clicked"})]}),(0,c.jsxs)(t.tr,{children:[(0,c.jsx)(t.td,{children:(0,c.jsx)(t.code,{children:"TicketDetail"})}),(0,c.jsx)(t.td,{children:"None"}),(0,c.jsx)(t.td,{children:"Renders full ticket info; has Update and Delete buttons"})]}),(0,c.jsxs)(t.tr,{children:[(0,c.jsx)(t.td,{children:(0,c.jsx)(t.code,{children:"NewTicketForm"})}),(0,c.jsx)(t.td,{children:"None"}),(0,c.jsx)(t.td,{children:"Captures form input; calls handler to create ticket"})]}),(0,c.jsxs)(t.tr,{children:[(0,c.jsx)(t.td,{children:(0,c.jsx)(t.code,{children:"EditTicketForm"})}),(0,c.jsx)(t.td,{children:"None"}),(0,c.jsx)(t.td,{children:"Captures form input; calls handler to update ticket"})]}),(0,c.jsxs)(t.tr,{children:[(0,c.jsx)(t.td,{children:(0,c.jsx)(t.code,{children:"ReusableForm"})}),(0,c.jsx)(t.td,{children:"None"}),(0,c.jsx)(t.td,{children:"Renders form fields; shared by New and Edit forms"})]})]})]}),"\n",(0,c.jsxs)(t.p,{children:["Notice that ",(0,c.jsx)(t.code,{children:"TicketControl"})," holds all the state, and every other component is stateless \u2014 they just receive props and call handlers."]}),"\n",(0,c.jsx)(t.hr,{}),"\n",(0,c.jsx)(t.h2,{id:"a-note-on-complexity",children:"A Note on Complexity"}),"\n",(0,c.jsxs)(t.p,{children:["Take a look at the conditional rendering logic in ",(0,c.jsx)(t.code,{children:"TicketControl"}),":"]}),"\n",(0,c.jsx)(t.pre,{children:(0,c.jsx)(t.code,{className:"language-js",children:"if (editing) {\n  // show EditTicketForm\n} else if (selectedTicket !== null) {\n  // show TicketDetail\n} else if (formVisibleOnPage) {\n  // show NewTicketForm\n} else {\n  // show TicketList\n}\n"})}),"\n",(0,c.jsxs)(t.p,{children:["This works, but it's fragile. The order matters \u2014 if you check ",(0,c.jsx)(t.code,{children:"selectedTicket"})," before ",(0,c.jsx)(t.code,{children:"editing"}),", the edit form won't show. We're using three different variables (",(0,c.jsx)(t.code,{children:"editing"}),", ",(0,c.jsx)(t.code,{children:"selectedTicket"}),", ",(0,c.jsx)(t.code,{children:"formVisibleOnPage"}),") to control one thing: which view is visible."]}),"\n",(0,c.jsxs)(t.p,{children:["A cleaner approach might be a single ",(0,c.jsx)(t.code,{children:"currentView"})," variable set to ",(0,c.jsx)(t.code,{children:"'list'"}),", ",(0,c.jsx)(t.code,{children:"'detail'"}),", ",(0,c.jsx)(t.code,{children:"'edit'"}),", or ",(0,c.jsx)(t.code,{children:"'newTicket'"}),". We didn't do that here because we built the app incrementally, adding state as needed. That's realistic - code often evolves this way."]}),"\n",(0,c.jsx)(t.p,{children:"As you build your own applications, watch for this kind of complexity creeping in. It's a signal that refactoring might be worthwhile."}),"\n",(0,c.jsx)(t.hr,{}),"\n",(0,c.jsx)(t.h2,{id:"summary",children:"Summary"}),"\n",(0,c.jsx)(t.p,{children:"In this lesson, we added several behaviors to our Help Queue application. First, we planned out the new behaviors our application needs and listed all the steps we need to take to implement these behaviors. While it's not necessary to write down all of these steps, it can be helpful for newcomers to React."}),"\n",(0,c.jsx)(t.p,{children:"Next, we added functionality to show an edit form (local state) and then update a ticket in our mainTicketList (shared state). Once again, we had to deal with a lot of little pieces. It may even seem like we needed to add a huge and overly complicated amount of code when we could do a fairly simple implementation with vanilla JS."}),"\n",(0,c.jsx)(t.p,{children:"However, we've written dynamic, modular and scalable code that lends itself well to further expansion. If all the steps are still overwhelming, trust the process \u2014 learning a new library or framework is always challenging and React is no different. In a few weeks, working with these concepts will become second nature."})]})}function h(e={}){const{wrapper:t}={...(0,d.R)(),...e.components};return t?(0,c.jsx)(t,{...e,children:(0,c.jsx)(a,{...e})}):a(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>s,x:()=>o});var i=n(96540);const c={},d=i.createContext(c);function s(e){const t=i.useContext(d);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:s(e.components),i.createElement(d.Provider,{value:t},e.children)}},52552:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/adding-editticketform-component-updated-f5bf57447ff54d565e399d60e68d972c.jpg"}}]);