"use strict";(self.webpackChunklhtp=self.webpackChunklhtp||[]).push([[58727],{28453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>r});var s=n(96540);const i={},l=s.createContext(i);function o(e){const t=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(l.Provider,{value:t},e.children)}},33680:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"c-and-net/basic-web-applications/5-2-2-3-deleting-items","title":"\ud83d\udcd3 5.2.2.3 Deleting Items","description":"In the last lesson we discussed CRUD actions and their corresponding HTTP request methods. So far, our To Do List can create Items with a POST request via our form and read Items with a GET request so users can see the full To Do List.","source":"@site/versioned_docs/version-WIP/c-and-net/2_basic-web-applications/3-2-2-03-deleting-items.md","sourceDirName":"c-and-net/2_basic-web-applications","slug":"/c-and-net/basic-web-applications/5-2-2-3-deleting-items","permalink":"/WIP/c-and-net/basic-web-applications/5-2-2-3-deleting-items","draft":false,"unlisted":false,"tags":[],"version":"WIP","frontMatter":{"title":"\ud83d\udcd3 5.2.2.3 Deleting Items","day":"tuesday","id":"5-2-2-3-deleting-items","hide_table_of_contents":true},"sidebar":"c-and-net","previous":{"title":"\ud83d\udcd3 5.2.2.2 HTTP CRUD Methods","permalink":"/WIP/c-and-net/basic-web-applications/5-2-2-2-http-crud-methods"},"next":{"title":"\ud83d\udcd3 5.2.2.4 Finding Objects with Unique IDs","permalink":"/WIP/c-and-net/basic-web-applications/5-2-2-4-finding-objects-with-unique-ids"}}');var i=n(74848),l=n(28453);const o={title:"\ud83d\udcd3 5.2.2.3 Deleting Items",day:"tuesday",id:"5-2-2-3-deleting-items",hide_table_of_contents:!0},r=void 0,c={},d=[{value:"Clearing <code>Item</code> Lists",id:"clearing-item-lists",level:2},{value:"HTML Form",id:"html-form",level:3},{value:"Corresponding POST Route",id:"corresponding-post-route",level:3},{value:"Success Page",id:"success-page",level:3}];function a(e){const t={code:"code",div:"div",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(t.p,{children:["In the last lesson we discussed CRUD actions and their corresponding HTTP request methods. So far, our To Do List can create ",(0,i.jsx)(t.code,{children:"Item"}),"s with a POST request via our form and read ",(0,i.jsx)(t.code,{children:"Item"}),"s with a GET request so users can see the full To Do List."]}),"\n",(0,i.jsxs)(t.p,{children:["Let's add functionality to delete ",(0,i.jsx)(t.code,{children:"Item"}),"s. Then we'll walk through updating ",(0,i.jsx)(t.code,{children:"Item"}),"s in later lessons."]}),"\n",(0,i.jsxs)(t.h2,{id:"clearing-item-lists",children:["Clearing ",(0,i.jsx)(t.code,{children:"Item"})," Lists"]}),"\n",(0,i.jsx)(t.hr,{}),"\n",(0,i.jsxs)(t.p,{children:["We'll begin by adding functionality to delete all ",(0,i.jsx)(t.code,{children:"Item"}),"s, as this broader action should be simpler to begin with."]}),"\n",(0,i.jsx)(t.h3,{id:"html-form",children:"HTML Form"}),"\n",(0,i.jsxs)(t.p,{children:["First, we need a button users can click to invoke this action. We'll add one to the bottom of our ",(0,i.jsx)(t.code,{children:"Items/Index.cshtml"})," view:"]}),"\n",(0,i.jsx)(t.div,{className:"filename",children:"ToDoList/Views/Items/Index.cshtml"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-html",children:'...\n\n<form action="/items/delete" method="post">\n  <button type="submit" name="button">Clear All Items</button>\n</form>\n'})}),"\n",(0,i.jsx)(t.p,{children:"The entire updated file looks like this:"}),"\n",(0,i.jsx)(t.div,{className:"filename",children:"ToDoList/Views/Items/Index.cshtml"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-html",children:'<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset="utf-8">\n    <title>My To-Do List!</title>\n    <link \n      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" \n      rel="stylesheet" \n      integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" \n      crossorigin="anonymous">\n  </head>\n  <body>\n    @using ToDoList.Models;\n\n    <h1>To Do List</h1>\n    @if (Model.Count == 0)\n    {\n      <p>There are no items in the list.</p>\n    }\n    <ul>\n      @foreach (Item item in Model)\n      {\n        <li>@item.Description</li>\n      }\n    </ul>\n\n    <a href="/items/new">Add a new item.</a>\n\n    <form action="/items/delete" method="post">\n      <button type="submit" name="button">Clear All Items</button>\n    </form>\n  </body>\n</html>\n'})}),"\n",(0,i.jsxs)(t.p,{children:["Notice this button resides in ",(0,i.jsx)(t.code,{children:"<form>"})," tags. It's not a standalone ",(0,i.jsx)(t.code,{children:"<button>"})," element. Only forms can submit and use the POST method required to update the server. Deleting something is still considered a server update because data is changing. A few more things to notice:"]}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:["The ",(0,i.jsx)(t.code,{children:"action"})," attribute is ",(0,i.jsx)(t.code,{children:'"/items/delete"'}),". The route that will run when the button is clicked must have this same path."]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:["The ",(0,i.jsx)(t.code,{children:"method"})," attribute is ",(0,i.jsx)(t.code,{children:"post"}),". This will create a POST request to update the server. The corresponding route path must be defined with ",(0,i.jsx)(t.code,{children:"HttpPost()"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:["We also add ",(0,i.jsx)(t.code,{children:'type="submit"'})," to the button. This is always required to successfully send a POST request from a form, even if that form is just a button."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(t.h3,{id:"corresponding-post-route",children:"Corresponding POST Route"}),"\n",(0,i.jsxs)(t.p,{children:["Let\u2019s create the route that will handle this form's submission. We'll add the following to ",(0,i.jsx)(t.code,{children:"ItemsController.cs"})," below our ",(0,i.jsx)(t.code,{children:"Create()"})," route:"]}),"\n",(0,i.jsx)(t.div,{className:"filename",children:"ToDoList/Controllers/ItemsController.cs"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-csharp",children:'...\n\n    [HttpPost("/items/delete")]\n    public ActionResult DeleteAll()\n    {\n      Item.ClearAll();\n      return View();\n    }\n\n...\n'})}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:["Notice the ",(0,i.jsx)(t.code,{children:'"/items/delete"'})," path matches the ",(0,i.jsx)(t.code,{children:"action"})," attribute of the form exactly."]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:["We also use ",(0,i.jsx)(t.code,{children:"HttpPost()"})," to denote this route will handle POST requests, since our form's ",(0,i.jsx)(t.code,{children:"method"})," is set to ",(0,i.jsx)(t.code,{children:'"post"'}),"."]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:["Because the route's path and HTTP method match the form's path and ",(0,i.jsx)(t.code,{children:"action"})," attribute, this route will be invoked when our form is submitted."]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:["Once invoked by a POST request to ",(0,i.jsx)(t.code,{children:'"/items/delete"'})," (which will happen when our new form is submitted), the route calls the static ",(0,i.jsx)(t.code,{children:"ClearAll()"})," method, which we already defined in our ",(0,i.jsx)(t.code,{children:"Item.cs"})," model."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"The entire updated controller file looks like this:"}),"\n",(0,i.jsx)(t.div,{className:"filename",children:"ToDoList/Controllers/ItemsController.cs"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-csharp",children:'using Microsoft.AspNetCore.Mvc;\nusing ToDoList.Models;\nusing System.Collections.Generic;\n\nnamespace ToDoList.Controllers\n{\n  public class ItemsController : Controller\n  {\n    [HttpGet("/items")]\n    public ActionResult Index()\n    {\n      List<Item> allItems = Item.GetAll();\n      return View(allItems);\n    }\n\n    [HttpGet("/items/new")]\n    public ActionResult CreateForm()\n    {\n      return View();\n    }\n\n    [HttpPost("/items")]\n    public ActionResult Create(string description)\n    {\n      Item myItem = new Item(description);\n      return RedirectToAction("Index");\n    }\n\n    [HttpPost("/items/delete")]\n    public ActionResult DeleteAll()\n    {\n      Item.ClearAll();\n      return View();\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(t.h3,{id:"success-page",children:"Success Page"}),"\n",(0,i.jsxs)(t.p,{children:["Because our new ",(0,i.jsx)(t.code,{children:"DeleteAll()"})," route returns ",(0,i.jsx)(t.code,{children:"View()"}),", it will automatically look for a view file matching the route name. The route is named ",(0,i.jsx)(t.code,{children:"DeleteAll()"})," and exists on the ",(0,i.jsx)(t.code,{children:"ItemsController"}),", so we'll need a ",(0,i.jsx)(t.code,{children:"DeleteAll.cshtml"})," file in ",(0,i.jsx)(t.code,{children:"Views/Items"}),". Let's create this now:"]}),"\n",(0,i.jsx)(t.div,{className:"filename",children:"ToDoList/Views/Items/DeleteAll.cshtml"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-html",children:'<h1>Your list has been cleared!</h1>\n<p><a href="/items">Back to list.</a></p>\n'})}),"\n",(0,i.jsxs)(t.p,{children:["This will display a success message confirming ",(0,i.jsx)(t.code,{children:"Item"}),"s were deleted and include a link back to the ",(0,i.jsx)(t.code,{children:"/items"})," page. If we wanted, we could also choose to use a redirect to go back to the index or home page as well."]})]})}function h(e={}){const{wrapper:t}={...(0,l.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}}}]);