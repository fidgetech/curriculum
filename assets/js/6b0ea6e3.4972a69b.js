"use strict";(self.webpackChunklhtp=self.webpackChunklhtp||[]).push([[39395],{9596:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"intermediate-javascript/test-driven-development-and-environments-with-javascript/2-2-1-9-expanding-our-testing-tools-adding-setup-and-teardown","title":"\ud83d\udcd3 2.2.1.9 Expanding our Testing Tools: Adding Setup and Teardown","description":"In the last lesson, we wrote six tests for a triangle tracker application. In each test, we needed to instantiate a Triangle object to test either the constructor or the Triangle.prototype.checkType() method. These Triangle objects were all different, but what would happen if we needed to instantiate the same Triangle object for many tests?","source":"@site/versioned_docs/version-WIP/2_intermediate-javascript/2_test-driven-development-and-environments-with-javascript/2-2-1-09-expanding-our-testing-tools-adding-setup-and-teardown.md","sourceDirName":"2_intermediate-javascript/2_test-driven-development-and-environments-with-javascript","slug":"/intermediate-javascript/test-driven-development-and-environments-with-javascript/2-2-1-9-expanding-our-testing-tools-adding-setup-and-teardown","permalink":"/WIP/intermediate-javascript/test-driven-development-and-environments-with-javascript/2-2-1-9-expanding-our-testing-tools-adding-setup-and-teardown","draft":false,"unlisted":false,"tags":[],"version":"WIP","frontMatter":{"title":"\ud83d\udcd3 2.2.1.9 Expanding our Testing Tools: Adding Setup and Teardown","day":"monday","id":"2-2-1-9-expanding-our-testing-tools-adding-setup-and-teardown","hide_table_of_contents":true},"sidebar":"intermediate-javascript","previous":{"title":"\ud83d\udcd3 2.2.1.8 Testing Best Practices","permalink":"/WIP/intermediate-javascript/test-driven-development-and-environments-with-javascript/2-2-1-8-testing-best-practices"},"next":{"title":"\ud83d\udcd3 2.2.1.10 Improving Test Reports: Adding Test Coverage Information","permalink":"/WIP/intermediate-javascript/test-driven-development-and-environments-with-javascript/2-2-1-10-improving-test-reports-adding-test-coverage-information"}}');var i=n(74848),a=n(28453);const o={title:"\ud83d\udcd3 2.2.1.9 Expanding our Testing Tools: Adding Setup and Teardown",day:"monday",id:"2-2-1-9-expanding-our-testing-tools-adding-setup-and-teardown",hide_table_of_contents:!0},r=void 0,d={},c=[{value:"Using <code>beforeEach()</code> and <code>afterEach()</code>",id:"using-beforeeach-and-aftereach",level:2}];function l(e){const t={a:"a",code:"code",div:"div",h2:"h2",hr:"hr",p:"p",pre:"pre",strong:"strong",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(t.p,{children:["In the last lesson, we wrote six tests for a triangle tracker application. In each test, we needed to instantiate a ",(0,i.jsx)(t.code,{children:"Triangle"})," object to test either the constructor or the ",(0,i.jsx)(t.code,{children:"Triangle.prototype.checkType()"})," method. These ",(0,i.jsx)(t.code,{children:"Triangle"})," objects were all different, but what would happen if we needed to instantiate the same ",(0,i.jsx)(t.code,{children:"Triangle"})," object for many tests?"]}),"\n",(0,i.jsxs)(t.p,{children:["This is a very common use case because we might want to instantiate the same object in different tests so you can test it in different ways. Fortunately, testing frameworks like Jest account for this by having additional methods for ",(0,i.jsx)(t.strong,{children:"setup"})," and ",(0,i.jsx)(t.strong,{children:"teardown"})," between tests. Setup is commonly used for instantiating variables and objects. Teardown is used for reinitializing objects or any variables that don't automatically fall out of scope between tests."]}),"\n",(0,i.jsxs)(t.p,{children:["We can use Jest's ",(0,i.jsx)(t.code,{children:"beforeEach()"})," function for setup and ",(0,i.jsx)(t.code,{children:"afterEach()"})," function for teardown."]}),"\n",(0,i.jsxs)(t.h2,{id:"using-beforeeach-and-aftereach",children:["Using ",(0,i.jsx)(t.code,{children:"beforeEach()"})," and ",(0,i.jsx)(t.code,{children:"afterEach()"})]}),"\n",(0,i.jsx)(t.hr,{}),"\n",(0,i.jsxs)(t.p,{children:["Let's imagine that we have a ",(0,i.jsx)(t.code,{children:"Triangle"})," object that we want to reuse for multiple tests."]}),"\n",(0,i.jsxs)(t.p,{children:["If this is the case, we'd use ",(0,i.jsx)(t.code,{children:"beforeEach()"})," to DRY up the code. Here's an example:"]}),"\n",(0,i.jsx)(t.div,{className:"filename",children:"__tests__/triangle.test.js"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-javascript",children:"...\ndescribe('show how beforeEach() works', () => {\n  let reusableTriangle;\n\n  beforeEach(() => {\n    reusableTriangle = new Triangle(5, 5, 5);\n  });\n\n  test('should use the resuableTriangle and update the value of one side', () => {\n    reusableTriangle.side1 = 6;\n    console.log(reusableTriangle);\n  });\n\n  test('should show how this reusableTriangle is reset to sides of 5', () => {\n    console.log(reusableTriangle);\n  });\n});\n"})}),"\n",(0,i.jsxs)(t.p,{children:["Here we declare ",(0,i.jsx)(t.code,{children:"reusableTriangle"})," in the top-level scope of the ",(0,i.jsx)(t.code,{children:"describe()"})," function, and because of this, we can call on ",(0,i.jsx)(t.code,{children:"reusableTriangle"})," from within any test."]}),"\n",(0,i.jsxs)(t.p,{children:["The ",(0,i.jsx)(t.code,{children:"beforeEach()"})," function assigns an instantiated ",(0,i.jsx)(t.code,{children:"Triangle"})," object to the ",(0,i.jsx)(t.code,{children:"reusableTriangle"})," variable. The ",(0,i.jsx)(t.code,{children:"beforeEach()"})," function is run before each test is run, so a new ",(0,i.jsx)(t.code,{children:"Triangle"})," object will be created and set as the value of ",(0,i.jsx)(t.code,{children:"reusableTriangle"})," before each test!"]}),"\n",(0,i.jsxs)(t.p,{children:["A nice benefit of using the ",(0,i.jsx)(t.code,{children:"beforeEach()"})," function to define our example ",(0,i.jsx)(t.code,{children:"Triangle"})," object is that we now  don't need to do this in each test, which makes our code more DRY."]}),"\n",(0,i.jsxs)(t.p,{children:["If we run our tests, we'll see that the value of the first ",(0,i.jsx)(t.code,{children:"console.log()"})," is printed to the terminal: ",(0,i.jsx)(t.code,{children:"Triangle { side1: 6, side2: 5, side3: 5 }"}),". It may come as a bit of a surprise that ",(0,i.jsx)(t.code,{children:"console.log()"})," prints to the terminal, but that is built-in functionality that Node provides. The benefits of ",(0,i.jsx)(t.code,{children:"console.log()"})," aren't limited to the browser!"]}),"\n",(0,i.jsxs)(t.p,{children:["Then in the second ",(0,i.jsx)(t.code,{children:"consolg.log()"})," message, we'll see that the triangle's sides have all been reset to 5: ",(0,i.jsx)(t.code,{children:"Triangle { side1: 5, side2: 5, side3: 5 }"})]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Take note"})," that the example above will not be helpful for the Shape Tracker project, since we need to instantiate different triangles for each test to determine the triangle's type."]}),"\n",(0,i.jsxs)(t.p,{children:["There's also an ",(0,i.jsx)(t.code,{children:"afterEach()"})," function as well. The code inside of the ",(0,i.jsx)(t.code,{children:"afterEach()"})," function is run after each test has been run."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-js",children:"afterEach(() => {\n  // this code is run after each test\n});\n"})}),"\n",(0,i.jsx)(t.p,{children:"This function is particularly useful if you need to perform some kind of teardown after each test. For instance, if data from one test somehow ends up in another test, it could result in a failed test or other unexpected behavior."}),"\n",(0,i.jsxs)(t.p,{children:["Check the documentation on ",(0,i.jsx)(t.a,{href:"https://jestjs.io/docs/en/setup-teardown",children:"setup and teardown"})," for more information."]})]})}function h(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>r});var s=n(96540);const i={},a=s.createContext(i);function o(e){const t=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(a.Provider,{value:t},e.children)}}}]);