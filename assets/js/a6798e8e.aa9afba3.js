"use strict";(self.webpackChunklhtp=self.webpackChunklhtp||[]).push([[85610],{10117:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>d,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"intermediate-javascript/test-driven-development-and-environments-with-javascript/2-2-0-12-bundling-javascript","title":"\ud83d\udcd3 2.2.0.12 Bundling JavaScript","description":"Let\'s update our shape tracker application to use import and export statements. By the end of this lesson, we will be using webpack to bundle all of our JavaScript files for us.","source":"@site/docs/2_intermediate-javascript/2_test-driven-development-and-environments-with-javascript/2-2-0-12-bundling-javascript.md","sourceDirName":"2_intermediate-javascript/2_test-driven-development-and-environments-with-javascript","slug":"/intermediate-javascript/test-driven-development-and-environments-with-javascript/2-2-0-12-bundling-javascript","permalink":"/v1.2/intermediate-javascript/test-driven-development-and-environments-with-javascript/2-2-0-12-bundling-javascript","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"\ud83d\udcd3 2.2.0.12 Bundling JavaScript","day":"weekend","id":"2-2-0-12-bundling-javascript","hide_table_of_contents":true},"sidebar":"intermediate-javascript","previous":{"title":"\ud83d\udcd3 2.2.0.11 ES6 Imports and Exports","permalink":"/v1.2/intermediate-javascript/test-driven-development-and-environments-with-javascript/2-2-0-11-es6-imports-and-exports"},"next":{"title":"\ud83d\udcd3 2.2.0.13 Bundling CSS with webpack Loaders","permalink":"/v1.2/intermediate-javascript/test-driven-development-and-environments-with-javascript/2-2-0-13-bundling-css-with-webpack-loaders"}}');var s=t(74848),r=t(28453);const d={title:"\ud83d\udcd3 2.2.0.12 Bundling JavaScript",day:"weekend",id:"2-2-0-12-bundling-javascript",hide_table_of_contents:!0},o=void 0,a={},c=[{value:"Bundling JavaScript",id:"bundling-javascript",level:2},{value:"Adding <code>import</code> and <code>export</code> Statements",id:"adding-import-and-export-statements",level:3},{value:"Updating <code>index.html</code>",id:"updating-indexhtml",level:3},{value:"Running webpack",id:"running-webpack",level:3}];function l(e){const n={a:"a",code:"code",div:"div",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:["Let's update our shape tracker application to use ",(0,s.jsx)(n.code,{children:"import"})," and ",(0,s.jsx)(n.code,{children:"export"})," statements. By the end of this lesson, we will be using webpack to bundle all of our JavaScript files for us."]}),"\n",(0,s.jsx)(n.p,{children:"Remember, bundling JavaScript is webpack's core functionality. Bundling other modules like CSS, images, and other assets is made possible through loaders, which we'll begin to incorporate in the next lesson!"}),"\n",(0,s.jsx)(n.h2,{id:"bundling-javascript",children:"Bundling JavaScript"}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.p,{children:["First, let's start by adding a ",(0,s.jsx)(n.code,{children:"dist"})," directory. Next, move ",(0,s.jsx)(n.code,{children:"index.html"})," inside the ",(0,s.jsx)(n.code,{children:"dist"})," directory. If you already have a ",(0,s.jsx)(n.code,{children:"dist"})," directory in your project, simply move ",(0,s.jsx)(n.code,{children:"index.html"})," inside of it."]}),"\n",(0,s.jsxs)(n.p,{children:["Locating your HTML file within the ",(0,s.jsx)(n.code,{children:"dist"})," directory is ",(0,s.jsx)(n.a,{href:"https://webpack.js.org/guides/getting-started/#basic-setup",children:"the basic setup for a project that uses webpack"}),". However, for us this will be a temporary change. We will be moving ",(0,s.jsx)(n.code,{children:"index.html"})," back to the ",(0,s.jsx)(n.code,{children:"src"})," directory in a few lessons when we implement a plugin that directs webpack to create an output HTML file based on a template we provide."]}),"\n",(0,s.jsxs)(n.p,{children:["By the way, don't forget that we've added ",(0,s.jsx)(n.code,{children:"dist/"})," to our ",(0,s.jsx)(n.code,{children:".gitignore"})," file. If we were to push our updated code, changes to ",(0,s.jsx)(n.code,{children:"index.html"})," wouldn't get pushed. This is fine because this change is temporary \u2014 and there is no need to commit our code just yet. However, if you did want to explore using a basic webpack setup in the future, you'd want to update your ",(0,s.jsx)(n.code,{children:".gitignore"})," file to only ignore ",(0,s.jsx)(n.code,{children:"dist/bundle.js"})," and not the entire directory and HTML."]}),"\n",(0,s.jsx)(n.p,{children:"Here's our current project structure:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"shape-tracker/\n\u251c\u2500\u2500 dist\n\u2502   \u251c\u2500\u2500 index.html\n\u251c\u2500\u2500 src\n\u2502\xa0\xa0 \u251c\u2500\u2500 index.js\n\u2502\xa0\xa0 \u2514\u2500\u2500 triangle.js\n\u251c\u2500\u2500 css\n\u2502   \u2514\u2500\u2500 styles.css\n\u251c\u2500\u2500 package.json\n\u2514\u2500\u2500 .gitignore\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Note that we aren't including automatically generated files and directories like ",(0,s.jsx)(n.code,{children:"node_modules"})," and ",(0,s.jsx)(n.code,{children:"package-lock.json"})," in the structure above. We're only including the files and directories that we need to add manually."]}),"\n",(0,s.jsxs)(n.h3,{id:"adding-import-and-export-statements",children:["Adding ",(0,s.jsx)(n.code,{children:"import"})," and ",(0,s.jsx)(n.code,{children:"export"})," Statements"]}),"\n",(0,s.jsxs)(n.p,{children:["Next, let's update our JavaScript files to use ",(0,s.jsx)(n.code,{children:"import"})," and ",(0,s.jsx)(n.code,{children:"export"})," statements. We'll use a default export for ",(0,s.jsx)(n.code,{children:"Triangle"})," because it's the only thing we'll export from the file."]}),"\n",(0,s.jsx)(n.div,{className:"filename",children:"src/triangle.js"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"export default function Triangle(side1, side2, side3) {\n  ...\n}\n\n...\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Now we need to make sure we import our ",(0,s.jsx)(n.code,{children:"Triangle"})," constructor at the top of ",(0,s.jsx)(n.code,{children:"index.js"}),":"]}),"\n",(0,s.jsx)(n.div,{className:"filename",children:"src/index.js"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"import Triangle from './triangle.js';\n...\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"updating-indexhtml",children:["Updating ",(0,s.jsx)(n.code,{children:"index.html"})]}),"\n",(0,s.jsxs)(n.p,{children:["Finally, we'll make some small updates to the ",(0,s.jsx)(n.code,{children:"<head>"})," of ",(0,s.jsx)(n.code,{children:"index.html"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",children:'...\n<head>\n  <script type="text/javascript" src="bundle.js"><\/script>\n  <link rel="stylesheet" href="./../css/styles.css">\n  <title>Shape Tracker</title>\n</head>\n...\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Now we only have one JavaScript tag \u2014 for ",(0,s.jsx)(n.code,{children:"bundle.js"}),". That file doesn't exist yet, and that's because webpack creates it for us."]}),"\n",(0,s.jsxs)(n.p,{children:["We've also updated the ",(0,s.jsx)(n.strong,{children:"relative path"})," to our stylesheet to ",(0,s.jsx)(n.code,{children:"./../css/styles.css"}),". That's because we've moved ",(0,s.jsx)(n.code,{children:"index.html"})," to our ",(0,s.jsx)(n.code,{children:"dist"})," folder, and we now have to go out of the ",(0,s.jsx)(n.code,{children:"dist"})," folder in order to get to the ",(0,s.jsx)(n.code,{children:"css"})," directory to access ",(0,s.jsx)(n.code,{children:"styles.css"}),". Take note of a few things:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Two dots ",(0,s.jsx)(n.code,{children:"/../"})," in a path indicates that we are moving up a level from the directory we are in, while one dot ",(0,s.jsx)(n.code,{children:"./"})," in path indicates our current working directory."]}),"\n",(0,s.jsxs)(n.li,{children:["So the full path ",(0,s.jsx)(n.code,{children:"./../css/styles.css"})," says, to load the CSS in ",(0,s.jsx)(n.code,{children:"styles.css"}),":\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Start in this directory ",(0,s.jsx)(n.code,{children:"./"})]}),"\n",(0,s.jsxs)(n.li,{children:["Then move up a directory ",(0,s.jsx)(n.code,{children:"/../"})," \u2014 this is the project's root"]}),"\n",(0,s.jsxs)(n.li,{children:["Then go into the ",(0,s.jsx)(n.code,{children:"/css/"})," directory"]}),"\n",(0,s.jsxs)(n.li,{children:["Then locate ",(0,s.jsx)(n.code,{children:"styles.css"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Note that this path will change again in the next lesson when we use webpack to bundle our CSS."}),"\n",(0,s.jsx)(n.h3,{id:"running-webpack",children:"Running webpack"}),"\n",(0,s.jsxs)(n.p,{children:["Now run ",(0,s.jsx)(n.code,{children:"$ npm run build"})," in the root directory of the project to invoke webpack to do its job and bundle our JavaScript files."]}),"\n",(0,s.jsxs)(n.p,{children:["webpack will start by accessing the entry point at ",(0,s.jsx)(n.code,{children:"src/index.js"}),". Then, webpack will recursively add any dependencies (anything that needs to be imported from elsewhere). Since ",(0,s.jsx)(n.code,{children:"index.js"})," only imports ",(0,s.jsx)(n.code,{children:"Triangle"})," from ",(0,s.jsx)(n.code,{children:"triangle.js"})," and ",(0,s.jsx)(n.code,{children:"triangle.js"})," has no imports of its own, our project currently only has one dependency."]}),"\n",(0,s.jsx)(n.p,{children:"If all goes well, your output will look something like this:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"> shape-tracker@1.0.0 build /Users/staff/Desktop/shape-tracker\n> webpack\n\nHash: 7d88ba320f665950d074\nVersion: webpack 4.46.0\nTime: 70ms\nBuilt at: 06/01/2022 9:33:20 AM\n    Asset      Size  Chunks             Chunk Names\nbundle.js  1.27 KiB       0  [emitted]  main\nEntrypoint main = bundle.js\n[0] ./src/index.js + 1 modules 650 bytes {0} [built]\n    | ./src/index.js 443 bytes [built]\n    | ./src/triangle.js 207 bytes [built]\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Note:"})," If you get errors, you probably missed a step from previous lessons. Make sure you've actually added a ",(0,s.jsx)(n.code,{children:"webpack.config.js"})," file with a configuration and updated the scripts section of ",(0,s.jsx)(n.code,{children:"package.json"})," to include ",(0,s.jsx)(n.code,{children:'"build": "webpack --mode=development"'}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["Just like with before, we we'll see that webpack creates a ",(0,s.jsx)(n.code,{children:"bundle.js"})," file in the ",(0,s.jsx)(n.code,{children:"dist"})," folder. If we look inside of it, we'll see the code from both ",(0,s.jsx)(n.code,{children:"index.js"})," and ",(0,s.jsx)(n.code,{children:"triangle.js"}),". This means that webpack has done it's job to concatenate our files together."]}),"\n",(0,s.jsxs)(n.p,{children:["The code inside of ",(0,s.jsx)(n.code,{children:"bundle.js"})," is NOT minified. That's because we've configured webpack to build its bundle in development mode. Minifying code is not as important for development as being able to look through the bundle and debug any code within. We'll revisit the topic of debugging in an upcoming lesson."]}),"\n",(0,s.jsxs)(n.p,{children:["Now we can open our ",(0,s.jsx)(n.code,{children:"index.html"})," file in the browser and our code will work. Woo-hoo!"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"One important detail to note"})," is that if we go to the console and check the ",(0,s.jsx)(n.code,{children:"window"})," object, we'll no longer see ",(0,s.jsx)(n.code,{children:"Triangle"})," just hanging out in the global scope. We can also verify this by typing in the following:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"> window.Triangle;\nundefined\n"})}),"\n",(0,s.jsx)(n.p,{children:"Our JavaScript code is now modularized and code is scoped where it is needed. This is particularly important as our projects get larger."}),"\n",(0,s.jsx)(n.p,{children:"So far, we haven't reduced our code much \u2014 all we've done is remove a single script tag from our code. However, it's a big deal when a project has hundreds of dependencies. More importantly, our JavaScript logic is separated in different files \u2014 which is great for human organization \u2014 but then bundled into one file \u2014 which is great for speed and efficiency."}),"\n",(0,s.jsx)(n.p,{children:"We've barely scratched the surface of what webpack can do. In the next several lessons, we'll bundle our CSS, customize webpack for linting, and set up a live development server."})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>d,x:()=>o});var i=t(96540);const s={},r=i.createContext(s);function d(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:d(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);