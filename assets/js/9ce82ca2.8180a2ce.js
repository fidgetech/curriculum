"use strict";(self.webpackChunklhtp=self.webpackChunklhtp||[]).push([[61744],{14670:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>l,default:()=>h,frontMatter:()=>d,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"c-and-net/many-to-many-relationships/3-4-0-7-many-to-many-update-functionality","title":"\ud83d\udcd3 3.4.0.7 Many-to-Many Update Functionality","description":"We\'ve added create and read functionality for our Tag entity and ItemTag join entity. Now we\'re ready to move onto adding update and delete functionality.","source":"@site/versioned_docs/version-v1_3/3_c-and-net/4_many-to-many-relationships/3-4-0-07-many-to-many-update-functionality.md","sourceDirName":"3_c-and-net/4_many-to-many-relationships","slug":"/c-and-net/many-to-many-relationships/3-4-0-7-many-to-many-update-functionality","permalink":"/v1.3/c-and-net/many-to-many-relationships/3-4-0-7-many-to-many-update-functionality","draft":false,"unlisted":false,"tags":[],"version":"v1_3","frontMatter":{"title":"\ud83d\udcd3 3.4.0.7 Many-to-Many Update Functionality","day":"weekend","id":"3-4-0-7-many-to-many-update-functionality","hide_table_of_contents":true},"sidebar":"c-and-net","previous":{"title":"\ud83d\udcd3 3.4.0.6 Many-to-Many Create Functionality","permalink":"/v1.3/c-and-net/many-to-many-relationships/3-4-0-6-many-to-many-create-functionality"},"next":{"title":"\ud83d\udcd3 3.4.0.8 Many-to-Many Delete Functionality","permalink":"/v1.3/c-and-net/many-to-many-relationships/3-4-0-8-many-to-many-delete-functionality"}}');var i=t(74848),o=t(28453);const d={title:"\ud83d\udcd3 3.4.0.7 Many-to-Many Update Functionality",day:"weekend",id:"3-4-0-7-many-to-many-update-functionality",hide_table_of_contents:!0},l=void 0,s={},c=[{value:"UPDATE: Adding Update Functionality to <code>Tag</code>s",id:"update-adding-update-functionality-to-tags",level:2}];function r(e){const n={code:"code",div:"div",h2:"h2",hr:"hr",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:["We've added create and read functionality for our ",(0,i.jsx)(n.code,{children:"Tag"})," entity and ",(0,i.jsx)(n.code,{children:"ItemTag"})," join entity. Now we're ready to move onto adding update and delete functionality."]}),"\n",(0,i.jsxs)(n.p,{children:["We won't add full CRUD for the ",(0,i.jsx)(n.code,{children:"ItemTag"})," join entity, just CRD functionality. Instead of allowing users to update join relationships, we'll simply have them create or delete relationships."]}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"Tag"})," entity on the other hand will have full CRUD functionality. So in this lesson we'll update our ",(0,i.jsx)(n.code,{children:"TagsController"})," and views to have update functionality."]}),"\n",(0,i.jsxs)(n.h2,{id:"update-adding-update-functionality-to-tags",children:["UPDATE: Adding Update Functionality to ",(0,i.jsx)(n.code,{children:"Tag"}),"s"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.p,{children:["Let's start by creating ",(0,i.jsx)(n.code,{children:"Edit()"})," GET and POST actions in the ",(0,i.jsx)(n.code,{children:"TagsController.cs"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"Here's the new code we'll add:"}),"\n",(0,i.jsx)(n.div,{className:"filename",children:"Controllers/TagsController.cs"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'...\n\n    public ActionResult Edit(int id)\n    {\n      Tag thisTag = _db.Tags.FirstOrDefault(tags => tags.TagId == id);\n      return View(thisTag);\n    }\n\n    [HttpPost]\n    public ActionResult Edit(Tag tag)\n    {\n      _db.Tags.Update(tag);\n      _db.SaveChanges();\n      return RedirectToAction("Index");\n    }\n\n...\n'})}),"\n",(0,i.jsxs)(n.p,{children:["The above code is the exact same as the code for update functionality in the ",(0,i.jsx)(n.code,{children:"CategoriesController"}),": we pass the specific tag that we want to update to the view in the ",(0,i.jsx)(n.code,{children:"Edit()"})," GET action, and then we update our database with the new ",(0,i.jsx)(n.code,{children:"tag"})," in the ",(0,i.jsx)(n.code,{children:"Edit()"})," POST action. When we're done, we redirect to the ",(0,i.jsx)(n.code,{children:"Index()"})," action."]}),"\n",(0,i.jsxs)(n.p,{children:["Next, let's create a view for our edit functionality. Within the ",(0,i.jsx)(n.code,{children:"Views/Tags/"})," subdirectory, create a new file called ",(0,i.jsx)(n.code,{children:"Edit.cshtml"})," and add the following code:"]}),"\n",(0,i.jsx)(n.div,{className:"filename",children:"Views/Tags/Edit.cshtml"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-html",children:'@{\n  Layout = "_Layout";\n}\n\n@model ToDoList.Models.Tag\n\n<h2>Edit</h2>\n\n<h4>Edit this tag: @Html.DisplayFor(model => model.Title)</h4>\n\n@using (Html.BeginForm())\n{\n    @Html.HiddenFor(model => model.TagId)\n\n    @Html.LabelFor(model => model.Title)\n    @Html.EditorFor(model => model.Title)\n\n    <input type="submit" value="Save" />\n}\n\n<p>@Html.ActionLink("Back to list", "Index")</p>\n'})}),"\n",(0,i.jsxs)(n.p,{children:["Finally, let's finish up by adding a link to our new ",(0,i.jsx)(n.code,{children:"Edit"})," route to our tag's ",(0,i.jsx)(n.code,{children:"Details.cshtml"}),":"]}),"\n",(0,i.jsx)(n.div,{className:"filename",children:"Views/Tags/Details.cshtml"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'...\n<p>@Html.ActionLink("Edit Tag", "Edit", new { id = Model.TagId })</p>\n'})}),"\n",(0,i.jsxs)(n.p,{children:["Now, if we run our application we should be able to edit tags. Up next, we'll add delete functionality for ",(0,i.jsx)(n.code,{children:"Tag"}),"s and ",(0,i.jsx)(n.code,{children:"ItemTag"})," join entities."]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(r,{...e})}):r(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>d,x:()=>l});var a=t(96540);const i={},o=a.createContext(i);function d(e){const n=a.useContext(o);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),a.createElement(o.Provider,{value:n},e.children)}}}]);