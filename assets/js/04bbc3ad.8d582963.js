"use strict";(self.webpackChunklhtp=self.webpackChunklhtp||[]).push([[25134],{19425:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/state-diagram-70a9726d3292a8da19257341b1749cf4.jpg"},28453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>r});var s=n(96540);const a={},o=s.createContext(a);function i(e){const t=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),s.createElement(o.Provider,{value:t},e.children)}},39002:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>i,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"react/react-fundamentals/4-2-1-2-introduction-to-state","title":"\ud83d\udcd3 4.2.1.2 Introduction to State","description":"In this lesson, we\'ll cover the concept of state in React and learn how to add state to our components using React\'s useState hook. Then, over the next several lessons, we\'ll add state to our Help Queue application so we can dynamically add new tickets.","source":"@site/versioned_docs/version-v1_3/4_react/2_react-fundamentals/4-2-1-02-introduction-to-state.md","sourceDirName":"4_react/2_react-fundamentals","slug":"/react/react-fundamentals/4-2-1-2-introduction-to-state","permalink":"/v1.3/react/react-fundamentals/4-2-1-2-introduction-to-state","draft":false,"unlisted":false,"tags":[],"version":"v1_3","frontMatter":{"title":"\ud83d\udcd3 4.2.1.2 Introduction to State","day":"monday","id":"4-2-1-2-introduction-to-state","hide_table_of_contents":true},"sidebar":"react","previous":{"title":"\u270f\ufe0f 4.2.1.1 Help Queue, Social Media, Airbnb Clone","permalink":"/v1.3/react/react-fundamentals/4-2-1-1-help-queue-social-media-airbnb-clone"},"next":{"title":"\ud83d\udcd3 4.2.1.3 Planning Our Application: Part 2","permalink":"/v1.3/react/react-fundamentals/4-2-1-3-planning-our-application-part-2"}}');var a=n(74848),o=n(28453);const i={title:"\ud83d\udcd3 4.2.1.2 Introduction to State",day:"monday",id:"4-2-1-2-introduction-to-state",hide_table_of_contents:!0},r=void 0,c={},l=[{value:"What Is State?",id:"what-is-state",level:2},{value:"Local State vs Shared State",id:"local-state-vs-shared-state",level:2},{value:"Local State",id:"local-state",level:3},{value:"Shared State",id:"shared-state",level:3},{value:"The <code>useState</code> Hook",id:"the-usestate-hook",level:2},{value:"Setting Up",id:"setting-up",level:3},{value:"How <code>useState</code> Works",id:"how-usestate-works",level:3},{value:"Displaying and Updating State",id:"displaying-and-updating-state",level:3},{value:"Rules for Updating State",id:"rules-for-updating-state",level:2},{value:"Never Modify State Directly",id:"never-modify-state-directly",level:3},{value:"State Updates Are Asynchronous",id:"state-updates-are-asynchronous",level:3},{value:"Multiple State Variables",id:"multiple-state-variables",level:2},{value:"Summary",id:"summary",level:2}];function d(e){const t={admonition:"admonition",code:"code",h2:"h2",h3:"h3",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(t.p,{children:["In this lesson, we'll cover the concept of state in React and learn how to add state to our components using React's ",(0,a.jsx)(t.code,{children:"useState"})," hook. Then, over the next several lessons, we'll add state to our Help Queue application so we can dynamically add new tickets."]}),"\n",(0,a.jsx)(t.h2,{id:"what-is-state",children:"What Is State?"}),"\n",(0,a.jsx)(t.hr,{}),"\n",(0,a.jsxs)(t.p,{children:["We can use two types of data in a React component: ",(0,a.jsx)(t.strong,{children:"props"})," and ",(0,a.jsx)(t.strong,{children:"state"}),". We've already used props to pass data from parent components to child components."]}),"\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"State"})," is anything in an application that we need to store and change. For instance, in our Help Queue, each time we add a new ticket, we need to update the application's state to hold the new ticket. Likewise, we'd need to update the application's state to edit or delete a ticket."]}),"\n",(0,a.jsxs)(t.p,{children:["Here's the key difference: ",(0,a.jsx)(t.strong,{children:"state can change, but props cannot"}),". A component can modify its own state, but it cannot modify the props it receives. State is fluid and ever-changing; props are read-only."]}),"\n",(0,a.jsx)(t.h2,{id:"local-state-vs-shared-state",children:"Local State vs Shared State"}),"\n",(0,a.jsx)(t.hr,{}),"\n",(0,a.jsxs)(t.p,{children:["There are two types of state in a React application: ",(0,a.jsx)(t.strong,{children:"local state"})," and ",(0,a.jsx)(t.strong,{children:"shared state"}),"."]}),"\n",(0,a.jsx)(t.h3,{id:"local-state",children:"Local State"}),"\n",(0,a.jsx)(t.p,{children:"Local state lives in a single component and is never used in other components. It's simpler than shared state because we don't have to worry about passing data around."}),"\n",(0,a.jsx)(t.p,{children:'A common example of local state is toggling visibility \u2014 like whether to show a form or a list. We\'ll use local state in our Help Queue to determine whether users see the ticket list or the "add ticket" form.'}),"\n",(0,a.jsx)(t.p,{children:"Where should local state live? Easy \u2014 in the component that needs it!"}),"\n",(0,a.jsx)(t.h3,{id:"shared-state",children:"Shared State"}),"\n",(0,a.jsx)(t.p,{children:"Shared state is used by multiple components. For example, the main list of tickets in our Help Queue is shared state: the ticket list component needs it to display tickets, and the form component needs to add new tickets to it."}),"\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"Where should shared state live?"})," In the ",(0,a.jsx)(t.strong,{children:"lowest common ancestor"})," of all components that need it."]}),"\n",(0,a.jsx)(t.p,{children:"Here's what that means:"}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"The following diagram demonstrates how to lift state between multiple components",src:n(19425).A+"",width:"491",height:"491"})}),"\n",(0,a.jsx)(t.p,{children:"In this diagram, there are six components. If components D and E both need access to the same state, the lowest common ancestor is component B \u2014 so the state should live there."}),"\n",(0,a.jsx)(t.p,{children:'But what if component F also needs that state? Now component B is no longer a common ancestor of all three. The lowest common ancestor of D, E, and F is component A, so we\'d need to "lift" the state up to component A.'}),"\n",(0,a.jsxs)(t.p,{children:["This concept of ",(0,a.jsx)(t.strong,{children:"lifting state up"})," will become clearer as we build our Help Queue."]}),"\n",(0,a.jsxs)(t.h2,{id:"the-usestate-hook",children:["The ",(0,a.jsx)(t.code,{children:"useState"})," Hook"]}),"\n",(0,a.jsx)(t.hr,{}),"\n",(0,a.jsxs)(t.p,{children:["Now let's learn how to actually create state in a React component. React provides a built-in function called ",(0,a.jsx)(t.code,{children:"useState"})," that lets us add state to function components."]}),"\n",(0,a.jsxs)(t.p,{children:["Let's explore ",(0,a.jsx)(t.code,{children:"useState"})," with a simple counter app. You don't need to code along, but you're welcome to."]}),"\n",(0,a.jsx)(t.h3,{id:"setting-up",children:"Setting Up"}),"\n",(0,a.jsx)(t.p,{children:"Create a new React app:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-bash",children:"npx create-react-app counter-app\n"})}),"\n",(0,a.jsxs)(t.p,{children:["Replace the code in ",(0,a.jsx)(t.code,{children:"src/App.js"})," with this:"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-jsx",metastring:"title='src/App.js'",children:"import './App.css';\nimport Counter from './Counter';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Counter />\n    </div>\n  );\n}\n\nexport default App;\n"})}),"\n",(0,a.jsxs)(t.p,{children:["Now create ",(0,a.jsx)(t.code,{children:"src/Counter.js"}),":"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-jsx",metastring:"title='src/Counter.js'",children:"import React, { useState } from 'react';\n\nfunction Counter() {\n  const [count, setCount] = useState(0);\n\n  return (\n    <React.Fragment>\n      <h1>{count}</h1>\n      <button onClick={() => setCount(count + 1)}>Count!</button>\n    </React.Fragment>\n  );\n}\n\nexport default Counter;\n"})}),"\n",(0,a.jsx)(t.p,{children:"That's it! With just a few lines of code, we have a working counter with state. Let's break down how it works."}),"\n",(0,a.jsxs)(t.h3,{id:"how-usestate-works",children:["How ",(0,a.jsx)(t.code,{children:"useState"})," Works"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-js",children:"const [count, setCount] = useState(0);\n"})}),"\n",(0,a.jsx)(t.p,{children:"This single line does a lot:"}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:(0,a.jsx)(t.code,{children:"useState(0)"})})," \u2014 We call the ",(0,a.jsx)(t.code,{children:"useState"})," hook and pass in ",(0,a.jsx)(t.code,{children:"0"})," as the initial value for the ",(0,a.jsx)(t.code,{children:"count"})," state variable. This can be any data type: a number, string, boolean, array, object, or ",(0,a.jsx)(t.code,{children:"null"}),"."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsxs)(t.strong,{children:[(0,a.jsx)(t.code,{children:"useState"})," returns an array"]})," with exactly two elements:"]}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"The current state value"}),"\n",(0,a.jsx)(t.li,{children:"A function to update that value"}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"We destructure the array"})," into two variables:"]}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"count"})," \u2014 the current value (starts at ",(0,a.jsx)(t.code,{children:"0"}),")"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"setCount"})," \u2014 the function we'll call to update ",(0,a.jsx)(t.code,{children:"count"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(t.p,{children:["The naming convention is to name the updater function ",(0,a.jsx)(t.code,{children:"set"})," + the state variable name. So ",(0,a.jsx)(t.code,{children:"count"})," pairs with ",(0,a.jsx)(t.code,{children:"setCount"}),", ",(0,a.jsx)(t.code,{children:"hidden"})," would pair with ",(0,a.jsx)(t.code,{children:"setHidden"}),", and so on."]}),"\n",(0,a.jsx)(t.p,{children:"If the destructuring syntax is unfamiliar, here's what it would look like without it:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-js",children:"const countState = useState(0);\nconst count = countState[0];\nconst setCount = countState[1];\n"})}),"\n",(0,a.jsx)(t.p,{children:"The destructuring version is more concise, which is why it's standard practice."}),"\n",(0,a.jsx)(t.h3,{id:"displaying-and-updating-state",children:"Displaying and Updating State"}),"\n",(0,a.jsx)(t.p,{children:"In our JSX, we display the current count and create a button to increment it:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-jsx",children:"<h1>{count}</h1>\n<button onClick={() => setCount(count + 1)}>Count!</button>\n"})}),"\n",(0,a.jsxs)(t.p,{children:["When the button is clicked, we call ",(0,a.jsx)(t.code,{children:"setCount(count + 1)"}),". This updates the ",(0,a.jsx)(t.code,{children:"count"})," state to be one more than its current value."]}),"\n",(0,a.jsxs)(t.p,{children:["React also re-renders the ",(0,a.jsx)(t.code,{children:"Counter"})," component with the new state, because state updates trigger re-renders."]}),"\n",(0,a.jsx)(t.admonition,{type:"important",children:(0,a.jsxs)(t.p,{children:["We use an arrow function ",(0,a.jsx)(t.code,{children:"() => setCount(count + 1)"})," for the click handler. If we wrote ",(0,a.jsx)(t.code,{children:"onClick={setCount(count + 1)}"})," without the arrow function, it would run immediately when the component renders, not when clicked!"]})}),"\n",(0,a.jsx)(t.h2,{id:"rules-for-updating-state",children:"Rules for Updating State"}),"\n",(0,a.jsx)(t.hr,{}),"\n",(0,a.jsx)(t.h3,{id:"never-modify-state-directly",children:"Never Modify State Directly"}),"\n",(0,a.jsx)(t.p,{children:"Always use the updater function. Never do this:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-js",children:"// \u274c DON'T DO THIS!\ncount = count + 1;\n"})}),"\n",(0,a.jsx)(t.p,{children:"This won't work because React doesn't know the value changed. It won't re-render the component, so your UI won't update. Always use the setter function:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-js",children:"// \u2705 Do this instead\nsetCount(count + 1);\n"})}),"\n",(0,a.jsx)(t.h3,{id:"state-updates-are-asynchronous",children:"State Updates Are Asynchronous"}),"\n",(0,a.jsx)(t.p,{children:"React batches state updates for performance. This means if you try to log state right after updating it, you might see the old value:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-js",children:"setCount(5);\nconsole.log(count); // Might still show the old value!\n"})}),"\n",(0,a.jsx)(t.p,{children:"The component will re-render with the new value, but the update doesn't happen instantly within your function. Keep this in mind when debugging!"}),"\n",(0,a.jsx)(t.h2,{id:"multiple-state-variables",children:"Multiple State Variables"}),"\n",(0,a.jsx)(t.hr,{}),"\n",(0,a.jsx)(t.p,{children:"What if a component needs to track multiple pieces of state? You might be tempted to put everything in one object:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-js",children:"// This works, but isn't recommended\nconst [state, setState] = useState({ count: 0, hidden: false });\n"})}),"\n",(0,a.jsxs)(t.p,{children:["While this works, React recommends using ",(0,a.jsxs)(t.strong,{children:["separate ",(0,a.jsx)(t.code,{children:"useState"})," calls"]})," for each piece of state:"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-jsx",metastring:"title='src/Counter.js'",children:"import React, { useState } from 'react';\n\nfunction Counter() {\n  const [count, setCount] = useState(0);\n  const [hidden, setHidden] = useState(false);\n\n  return (\n    <React.Fragment>\n      {hidden ? <h1>Count Hidden</h1> : <h1>{count}</h1>}\n      <button onClick={() => setCount(count + 1)}>Count!</button>\n      <button onClick={() => setHidden(!hidden)}>Hide/Show</button>\n    </React.Fragment>\n  );\n}\n\nexport default Counter;\n"})}),"\n",(0,a.jsx)(t.p,{children:"This approach is better because:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"Each piece of state has its own clearly-named variable and updater"}),"\n",(0,a.jsx)(t.li,{children:"It's easier to read and understand what state the component manages"}),"\n",(0,a.jsx)(t.li,{children:"You can update one piece of state without worrying about the others"}),"\n",(0,a.jsxs)(t.li,{children:["It follows the principle of ",(0,a.jsx)(t.strong,{children:"separation of concerns"})]}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"summary",children:"Summary"}),"\n",(0,a.jsx)(t.hr,{}),"\n",(0,a.jsx)(t.p,{children:"Here's what we covered:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"State"})," is data that can change over time. Props cannot change; state can."]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Local state"})," lives in one component. ",(0,a.jsx)(t.strong,{children:"Shared state"})," is used by multiple components and should live in their lowest common ancestor."]}),"\n",(0,a.jsxs)(t.li,{children:["The ",(0,a.jsxs)(t.strong,{children:[(0,a.jsx)(t.code,{children:"useState"})," hook"]})," lets us add state to function components."]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"useState"})," returns an array: ",(0,a.jsx)(t.code,{children:"[currentValue, setterFunction]"}),"."]}),"\n",(0,a.jsx)(t.li,{children:"Always update state using the setter function, never by direct assignment."}),"\n",(0,a.jsxs)(t.li,{children:["Use separate ",(0,a.jsx)(t.code,{children:"useState"})," calls for separate pieces of state."]}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:"In the upcoming lessons, we'll apply these concepts to add both local and shared state to our Help Queue application."})]})}function h(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}}}]);