"use strict";(self.webpackChunklhtp=self.webpackChunklhtp||[]).push([[5391],{9890:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"introduction-to-programming/javascript-and-web-browsers/1-2-3-12-removing-event-listeners","title":"\ud83d\udcd3 1.2.3.12 Removing Event Listeners","description":"In this lesson, we\'ll learn how to remove event listeners with the removeEventListener() method. In the applications that you build at Epicodus, there won\'t be a lot of cases in which we\'ll need to remove event listeners, but it is helpful to know when and why we might want or need to do that.","source":"@site/versioned_docs/version-WIP/1_introduction-to-programming/2_javascript-and-web-browsers/1-2-3-12-removing-event-listeners.md","sourceDirName":"1_introduction-to-programming/2_javascript-and-web-browsers","slug":"/introduction-to-programming/javascript-and-web-browsers/1-2-3-12-removing-event-listeners","permalink":"/WIP/introduction-to-programming/javascript-and-web-browsers/1-2-3-12-removing-event-listeners","draft":false,"unlisted":false,"tags":[],"version":"WIP","frontMatter":{"title":"\ud83d\udcd3 1.2.3.12 Removing Event Listeners","day":"wednesday","id":"1-2-3-12-removing-event-listeners","hide_table_of_contents":true},"sidebar":"introduction-to-programming","previous":{"title":"\ud83d\udcd3 1.2.3.11 Using Function Declarations in Event Handling","permalink":"/WIP/introduction-to-programming/javascript-and-web-browsers/1-2-3-11-using-function-declarations-in-event-handling"},"next":{"title":"\u270f\ufe0f 1.2.3.13 Practice: Event Listeners","permalink":"/WIP/introduction-to-programming/javascript-and-web-browsers/1-2-3-13-practice-event-listeners"}}');var o=t(74848),s=t(28453);const r={title:"\ud83d\udcd3 1.2.3.12 Removing Event Listeners",day:"wednesday",id:"1-2-3-12-removing-event-listeners",hide_table_of_contents:!0},a=void 0,l={},d=[{value:"Removing Event Listeners with <code>removeEventListener()</code>",id:"removing-event-listeners-with-removeeventlistener",level:2},{value:"(Some) Function Expressions Don&#39;t Work with <code>removeEventListener()</code>",id:"some-function-expressions-dont-work-with-removeeventlistener",level:3},{value:"When and Why We Remove Event Listeners",id:"when-and-why-we-remove-event-listeners",level:2},{value:"A Practical Example",id:"a-practical-example",level:3},{value:"Completed Mad Libs Code",id:"completed-mad-libs-code",level:3},{value:"Summary",id:"summary",level:2}];function c(e){const n={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(n.p,{children:["In this lesson, we'll learn how to remove event listeners with the ",(0,o.jsx)(n.code,{children:"removeEventListener()"})," method. In the applications that you build at Epicodus, there won't be a lot of cases in which we'll need to remove event listeners, but it is helpful to know when and why we might want or need to do that."]}),"\n",(0,o.jsxs)(n.h2,{id:"removing-event-listeners-with-removeeventlistener",children:["Removing Event Listeners with ",(0,o.jsx)(n.code,{children:"removeEventListener()"})]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.p,{children:"There is a method to remove an event listener, just like there is a method for adding an event listener. Let's see how it works. First, we'll set up a click event listener on a heading element. We'll use the same example from the previous lesson of an educational application that explains HTML and what each element on the page is called. Here's a snippet of our HTML:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-html",children:"<h1>Heading 1</h1>\n"})}),"\n",(0,o.jsx)(n.p,{children:"And here is our event listener:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:'function alertHeading() {\n  window.alert("This is a heading element.");\n}\nlet h1 = document.querySelector("h1"); \nh1.addEventListener("click", alertHeading);\n'})}),"\n",(0,o.jsxs)(n.p,{children:["Notice that we're using a function declaration called ",(0,o.jsx)(n.code,{children:"alertHeading()"})," as the handler function for the click event. ",(0,o.jsx)(n.code,{children:"alertHeading()"})," is also called a callback function, because it is a function that is being used as an argument in another function. Because we're passing it in as the handler function for our click event listener, ",(0,o.jsx)(n.code,{children:"alertHeading()"})," will be called any time the user clicks on the H1 element."]}),"\n",(0,o.jsxs)(n.p,{children:["When we pass in ",(0,o.jsx)(n.code,{children:"alertHeading()"})," to the ",(0,o.jsx)(n.code,{children:"addEventListener()"})," method, we purposefully don't include parens so that we can pass in the definition of the function to the ",(0,o.jsx)(n.code,{children:"addEventListener()"})," method. If we included parens then we'd be calling it now, and we don't want that. We want the ",(0,o.jsx)(n.code,{children:"addEventListener()"})," method to be able to call the ",(0,o.jsx)(n.code,{children:"alertHeading()"})," function only when it needs to, when the click on the H1 element happens."]}),"\n",(0,o.jsx)(n.p,{children:"Now let's remove the click event listener:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:'function alertHeading() {\n  window.alert("This is a heading element.");\n}\nlet h1 = document.querySelector("h1"); \nh1.addEventListener("click", alertHeading);\nh1.removeEventListener("click", alertHeading);  // this line is new!\n'})}),"\n",(0,o.jsxs)(n.p,{children:["Right after we create the event listener we now remove it with ",(0,o.jsx)(n.code,{children:'h1.removeEventListener("click", alertHeading);'}),". Notice that we pass in ",(0,o.jsx)(n.strong,{children:"the exact same arguments"})," as we do into the ",(0,o.jsx)(n.code,{children:"addEventListener()"})," method. This is by design and how the ",(0,o.jsx)(n.code,{children:"removeEventListener()"})," method knows which event listener to remove."]}),"\n",(0,o.jsxs)(n.p,{children:["Let's break this down the ",(0,o.jsx)(n.code,{children:"removeEventListener()"})," method:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["This method takes two arguments:\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["The name of the event. In our example the event we're targeting is ",(0,o.jsx)(n.code,{children:'"click"'}),"."]}),"\n",(0,o.jsxs)(n.li,{children:['The name of the function we are using to handle the event. This function is often called the "handler function". In our example, this handler function is ',(0,o.jsx)(n.code,{children:"alertHeading"}),". (This function is also categorized as a callback function.)"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsxs)(n.strong,{children:["The two arguments we supply to the ",(0,o.jsx)(n.code,{children:"removeEventListener()"})," method call MUST match the same arguments that we supplied to the ",(0,o.jsx)(n.code,{children:"addEventListener()"})," method that originally created the event listener that we want to remove."]})}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"This last point is so important that we should look at scenarios of removing event listeners that fail."}),"\n",(0,o.jsxs)(n.h3,{id:"some-function-expressions-dont-work-with-removeeventlistener",children:["(Some) Function Expressions Don't Work with ",(0,o.jsx)(n.code,{children:"removeEventListener()"})]}),"\n",(0,o.jsxs)(n.p,{children:["When we set up an event listener with a function expression that's not saved to a variable, we can't target and remove it with ",(0,o.jsx)(n.code,{children:"removeEventListener()"}),". Let's see an example. In the following code snippet, we will fail to remove the event listener, even though the arguments in both ",(0,o.jsx)(n.code,{children:"addEventListener()"})," and ",(0,o.jsx)(n.code,{children:"removeEventListener()"})," are exactly the same."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:'let h1 = document.querySelector("h1"); \nh1.addEventListener("click", function() {\n  window.alert("This is a heading element.");\n});\nh1.removeEventListener("click", function() {\n  window.alert("This is a heading element.");\n});  \n'})}),"\n",(0,o.jsx)(n.p,{children:"In JavaScript, anonymous function expressions that are not stored into a variable are not identical even if they are defined using the same unchanging source-code. So even though each callback function has the exact same code:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:'function() {\n  window.alert("This is a heading element.");\n}\n'})}),"\n",(0,o.jsxs)(n.p,{children:["JavaScript considers them as two separate functions, and because of this, the ",(0,o.jsx)(n.code,{children:"removeEventListener()"})," method can't match its arguments to the ones we passed into the ",(0,o.jsx)(n.code,{children:"addEventListener()"})," method, and fails to find and remove the correct event listener."]}),"\n",(0,o.jsx)(n.p,{children:"We can still use function expressions that are stored in a variable, because the variable unequivocally represents one value, the function expression. The code snippet below demonstrates this."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:'const alertHeading = function() {\n  window.alert("This is a heading element.");\n};\nlet h1 = document.querySelector("h1"); \nh1.addEventListener("click", alertheading);\nh1.removeEventListener("click", alertHeading);  \n'})}),"\n",(0,o.jsxs)(n.p,{children:["So, just like when using function declarations, JavaScript knows that we're referencing the same function with the ",(0,o.jsx)(n.code,{children:"alertHeading"})," variable. The arguments for both methods will match and enable the ",(0,o.jsx)(n.code,{children:"removeEventListener()"})," method to find and remove the correct event listener."]}),"\n",(0,o.jsx)(n.h2,{id:"when-and-why-we-remove-event-listeners",children:"When and Why We Remove Event Listeners"}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.p,{children:"We remove event listeners in three cases:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"When we only want an event handler to run once. We can remove an event listener after it has been run to make it so the reaction happens once (or a different set number of times)."}),"\n",(0,o.jsx)(n.li,{children:"To reuse elements. Being able to add and remove event listeners allows us to use one element in multiple scenarios. For example, we could use one button in three different scenarios by adding and removing event listeners. The alternative would be to use three separate buttons with three separate event listeners."}),"\n",(0,o.jsx)(n.li,{children:"To improve performance or efficiency. If we have many, many event listeners in an application, removing the ones that are no longer needed can improve efficiency. This aspect of efficiency has to do with memory management. We won't learn about performance optimization at Epicodus, but this is an important topic to learn about down the road as you continue your growth as a developer."}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"In terms of a workflow for removing event listeners, a good rule to follow is to remove event listeners when you've removed the target it belongs to. Not just hide the target, but remove it completely from the DOM. We haven't yet learned how to add and remove elements from the DOM, but we will in the next course section."}),"\n",(0,o.jsxs)(n.p,{children:['There are cases where JavaScript\'s automatic "garbage collection" handles removing event listeners from the associated targets when they are removed from the DOM, but that is a subject that is not important to understand right now. If you want to learn about "garbage collection" and memory management, ',(0,o.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Memory_Management",children:"visit this reference page on MDN"}),". If you want to see a practical example of a memory issue in relation to event listeners, ",(0,o.jsxs)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener#memory_issues",children:["review this section on MDN's ",(0,o.jsx)(n.code,{children:"addEventListener()"})," reference page"]}),"."]}),"\n",(0,o.jsx)(n.p,{children:"Again, memory management and performance are topics that you should learn about after you leave Epicodus as part of your continuing education. The applications we build at Epicodus for the most part will be small and simple, and won't require cleaning up old, unused event handlers. The most common reason that you will remove an event listener is to reuse an HTML element in multiple scenarios/for different actions, or to react to an event only once."}),"\n",(0,o.jsx)(n.h3,{id:"a-practical-example",children:"A Practical Example"}),"\n",(0,o.jsx)(n.p,{children:"Let's review a more realistic example of removing an event listener."}),"\n",(0,o.jsx)(n.p,{children:"In the lesson \"Event Handling with Event Listeners\" we expanded the functionality of our Mad Libs project to not only show the Mad Libs story (with user inputted values), but also to display an advertisement and a button to reset the form. Let's update the event handling that displays the advertisement so that it only runs once. To make the code easier to follow, we'll first highlight the code just for the advertisement, and then we'll show all of the HTML and JS afterwards."}),"\n",(0,o.jsxs)(n.p,{children:["First, let's look only the code that creates the event listener on the form. We've omitted other code with ellipses ",(0,o.jsx)(n.code,{children:"..."}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:'// User Interface Logic\nwindow.addEventListener("load", function() {\n  ...\n  let form = document.querySelector("form");\n  ...\n  form.addEventListener("submit", function() {\n    window.alert("Do you need a new computer? Visit www.superextracomputersales.com to find the best deals!");\n  }); \n  ...\n});\n'})}),"\n",(0,o.jsxs)(n.p,{children:["In order to use the ",(0,o.jsx)(n.code,{children:"removeEventListener()"})," method, we need to use a function declaration, or store our function expression into a variable that we can call on. Let's make that update first:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:'// User Interface Logic\n\n// new function!\nfunction advertisement() {\n  window.alert("Do you need a new computer? Visit www.superextracomputersales.com to find the best deals!");\n}\n\nwindow.addEventListener("load", function() {\n  ...\n  let form = document.querySelector("form");\n  ...\n  form.addEventListener("submit", advertisement); \n  ...\n});\n'})}),"\n",(0,o.jsxs)(n.p,{children:["We've added a new function definition called ",(0,o.jsx)(n.code,{children:"advertisement()"})," that displays our ad. Take note of a few things about the placement of the ",(0,o.jsx)(n.code,{children:"advertisement()"})," function:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"This is considered user interface logic, because it handles accessing, manipulating or updating the DOM. Code that does not access or update the DOM is considered business logic (we'll see more examples of this in an upcoming lesson)."}),"\n",(0,o.jsxs)(n.li,{children:["We define ",(0,o.jsx)(n.code,{children:"advertisement()"})," outside of the ",(0,o.jsx)(n.code,{children:"window.onload"})," event handler. We only need to ",(0,o.jsx)(n.em,{children:"use"})," the function inside of the ",(0,o.jsx)(n.code,{children:"window.onload"})," event handler."]}),"\n",(0,o.jsxs)(n.li,{children:["We locate the definition of ",(0,o.jsx)(n.code,{children:"advertisement()"})," above where we use that function in our scripts."]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["Next, let's incorporate the ",(0,o.jsx)(n.code,{children:"removeEventListener()"})," method. We'll want to add this method into the new ",(0,o.jsx)(n.code,{children:"advertisement()"})," function so that we remove the event listener only after it has run once."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:'// User Interface Logic\nfunction advertisement() {\n  window.alert("Do you need a new computer? Visit www.superextracomputersales.com to find the best deals!");\n  // new line below!\n  document.querySelector("form").removeEventListener("submit", advertisement);\n}\n\nwindow.addEventListener("load", function() {\n  ...\n  let form = document.querySelector("form");\n  ...\n  form.addEventListener("submit", advertisement); \n  ...\n});\n'})}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"form"})," variable that we created in the ",(0,o.jsx)(n.code,{children:"window"}),"'s load event listener is not available outside of that event listener. In other words, the ",(0,o.jsx)(n.code,{children:"form"}),' variable is "scoped" to the ',(0,o.jsx)(n.code,{children:"window"}),"'s load event listener. So, within the ",(0,o.jsx)(n.code,{children:"advertisement()"})," function, we need to first use ",(0,o.jsx)(n.code,{children:'document.querySelector("form")'})," to get the ",(0,o.jsx)(n.code,{children:"HTMLFormElement"})," object, and then call the ",(0,o.jsx)(n.code,{children:"removeEventListener()"})," method on it. We could separate this code onto two lines if that's easier to read and understand:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:'let form = document.querySelector("form")\nform.removeEventListener("submit", advertisement);\n'})}),"\n",(0,o.jsxs)(n.p,{children:["And with that new line, we've successfully removed the event listener for the advertisement such that it will only display once and be removed. Take note that the issues of scope for the ",(0,o.jsx)(n.code,{children:"form"})," variable does not exist for event listeners. We can remove an event listener in one function that is originally defined in another."]}),"\n",(0,o.jsxs)(n.p,{children:["If you are feeling iffy about scope, don't worry, it ",(0,o.jsx)(n.em,{children:"is"})," a tricky concept to understand. We'll be exploring scope again in an upcoming lesson, so there will be more opportunity to practice soon."]}),"\n",(0,o.jsx)(n.h3,{id:"completed-mad-libs-code",children:"Completed Mad Libs Code"}),"\n",(0,o.jsxs)(n.p,{children:["Check out the cheat sheet for this lesson for the completed HTML and JS for the Mad Libs project. This includes the update to only run the advertisement once. If you want to, you are welcome to use the code to recreate this project to test out the changes we've made to the advertisement's functionality. In the next lesson, you'll practice using ",(0,o.jsx)(n.code,{children:"addEventListener()"})," and ",(0,o.jsx)(n.code,{children:"removeEventListener()"}),"."]}),"\n",(0,o.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsxs)(n.p,{children:["In this lesson we learned how to remove event listeners with the ",(0,o.jsx)(n.code,{children:"removeEventListener()"})," method. To use this method successfully, there's a few things to note:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"We must use a function declaration or a function expression that's stored into a variable when we create and remove an event listener."}),"\n",(0,o.jsxs)(n.li,{children:["The two arguments we supply to the ",(0,o.jsx)(n.code,{children:"removeEventListener()"})," method call MUST match the same arguments that we supplied to the ",(0,o.jsx)(n.code,{children:"addEventListener()"})," method that originally created the event listener that we want to remove."]}),"\n",(0,o.jsx)(n.li,{children:"The most common reason that you will remove an event listener is to reuse an HTML element in multiple scenarios/for different actions, or to react to an event only once."}),"\n",(0,o.jsx)(n.li,{children:"Issues related to scope that affect variables do not affect event listeners. We can remove an event listener in one function (or scope) that is originally defined in another function (or scope)."}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>a});var i=t(96540);const o={},s=i.createContext(o);function r(e){const n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);