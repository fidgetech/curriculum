<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-c-and-net/authentication-with-identity/3-5-2-1-making-an-api-call-with-restsharp" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">üìì 3.5.2.1 Making an API Call with RestSharp | LHTP</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://fidgetechcode.org/v1.2/c-and-net/authentication-with-identity/3-5-2-1-making-an-api-call-with-restsharp"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="üìì 3.5.2.1 Making an API Call with RestSharp | LHTP"><meta data-rh="true" name="description" content="In this lesson, we&#x27;ll learn how to make an API call with a console application and a popular REST API client library called RestSharp. We will start with a console application in order to focus on learning the basic process of making an API call and parsing the response. Then we&#x27;ll practice making API calls from an ASP.NET Core MVC app."><meta data-rh="true" property="og:description" content="In this lesson, we&#x27;ll learn how to make an API call with a console application and a popular REST API client library called RestSharp. We will start with a console application in order to focus on learning the basic process of making an API call and parsing the response. Then we&#x27;ll practice making API calls from an ASP.NET Core MVC app."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://fidgetechcode.org/v1.2/c-and-net/authentication-with-identity/3-5-2-1-making-an-api-call-with-restsharp"><link data-rh="true" rel="alternate" href="https://fidgetechcode.org/v1.2/c-and-net/authentication-with-identity/3-5-2-1-making-an-api-call-with-restsharp" hreflang="en"><link data-rh="true" rel="alternate" href="https://fidgetechcode.org/v1.2/c-and-net/authentication-with-identity/3-5-2-1-making-an-api-call-with-restsharp" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://UJLAF3EEM6-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"üìì 3.5.2.1 Making an API Call with RestSharp","item":"https://fidgetechcode.org/v1.2/c-and-net/authentication-with-identity/3-5-2-1-making-an-api-call-with-restsharp"}]}</script><link rel="search" type="application/opensearchdescription+xml" title="LHTP" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.2d582d67.css">
<script src="/assets/js/runtime~main.9595a730.js" defer="defer"></script>
<script src="/assets/js/main.70da24cb.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://fidgetech.org" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/img/fidgetech-logo.png" alt="" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/fidgetech-logo.png" alt="" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Fidgetech</b></a><a class="navbar__item navbar__link" href="/v1.2">Courses</a><a href="https://fidgetech.org/fidgetech-catalog" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Handbook<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Versions</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/v1.2">Version 1.2</a></li><li><a class="dropdown__link" href="/v1.3">Version 1.3</a></li></ul></div></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Meta+k)" aria-keyshortcuts="Meta+k"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 24 24" aria-hidden="true"><circle cx="11" cy="11" r="8" stroke="currentColor" fill="none" stroke-width="1.4"></circle><path d="m21 21-4.3-4.3" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v1.2/c-and-net"><span title="C# and .NET" class="linkLabel_WmDU">C# and .NET</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/v1.2/c-and-net/lessons-1-5-getting-started-with-c/3-0-0-01-welcome-to-c"><span title="3.0 (Lessons 1-5) Getting Started with C#" class="categoryLinkLabel_W154">3.0 (Lessons 1-5) Getting Started with C#</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/v1.2/c-and-net/lessons-6-18-data-types-and-variables/3-0-0-06-using-a-c-repl"><span title="3.0 (Lessons 6-18) Data Types and Variables" class="categoryLinkLabel_W154">3.0 (Lessons 6-18) Data Types and Variables</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/v1.2/c-and-net/lessons-19-31-basic-console-apps/3-0-0-19-expectations-and-game-plan-for-building-a-c-console-app"><span title="3.0 (Lessons 19-31) Basic Console Apps" class="categoryLinkLabel_W154">3.0 (Lessons 19-31) Basic Console Apps</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/v1.2/c-and-net/lessons-32-44-tdd-and-debugging/3-0-0-32-what-well-learn-in-this-section"><span title="3.0 (Lessons 32-44) TDD and Debugging" class="categoryLinkLabel_W154">3.0 (Lessons 32-44) TDD and Debugging</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/v1.2/c-and-net/test-driven-development-with-c/3-1-0-1-test-driven-development-with-c-objectives"><span title="3.1 Test-Driven Development with C#" class="categoryLinkLabel_W154">3.1 Test-Driven Development with C#</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/v1.2/c-and-net/basic-web-applications/3-2-0-1basic-web-applications-objectives"><span title="3.2 Basic Web Applications" class="categoryLinkLabel_W154">3.2 Basic Web Applications</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/v1.2/c-and-net/database-basics/3-3-0-01-database-basics-objectives"><span title="3.3 Database Basics" class="categoryLinkLabel_W154">3.3 Database Basics</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/v1.2/c-and-net/many-to-many-relationships/3-4-0-1-many-to-many-objectives"><span title="3.4 Many-To-Many Relationships" class="categoryLinkLabel_W154">3.4 Many-To-Many Relationships</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/v1.2/c-and-net/authentication-with-identity/3-5-0-1-authentication-with-identity-objectives"><span title="3.5 Authentication with Identity" class="categoryLinkLabel_W154">3.5 Authentication with Identity</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v1.2/c-and-net/authentication-with-identity/3-5-0-1-authentication-with-identity-objectives"><span title="üìì 3.5.0.1 Authentication with Identity Objectives" class="linkLabel_WmDU">üìì 3.5.0.1 Authentication with Identity Objectives</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v1.2/c-and-net/authentication-with-identity/3-5-0-2-async-and-await"><span title="üìì 3.5.0.2 Async and Await" class="linkLabel_WmDU">üìì 3.5.0.2 Async and Await</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v1.2/c-and-net/authentication-with-identity/3-5-0-3-introduction-to-authentication-authorization-and-identity"><span title="üìì 3.5.0.3 Introduction to Authentication, Authorization, and Identity" class="linkLabel_WmDU">üìì 3.5.0.3 Introduction to Authentication, Authorization, and Identity</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v1.2/c-and-net/authentication-with-identity/3-5-0-4-identity-setup-and-configuration"><span title="üìì 3.5.0.4 Identity Setup and Configuration" class="linkLabel_WmDU">üìì 3.5.0.4 Identity Setup and Configuration</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v1.2/c-and-net/authentication-with-identity/3-5-0-5-the-identity-model"><span title="üìì 3.5.0.5 The Identity Model" class="linkLabel_WmDU">üìì 3.5.0.5 The Identity Model</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v1.2/c-and-net/authentication-with-identity/3-5-0-6-authentication-with-identity-user-registration-controller"><span title="üìì 3.5.0.6 Authentication with Identity: User Registration Controller" class="linkLabel_WmDU">üìì 3.5.0.6 Authentication with Identity: User Registration Controller</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v1.2/c-and-net/authentication-with-identity/3-5-0-7-authentication-with-identity-user-registration-viewmodel-validation-and-views"><span title="üìì 3.5.0.7 Authentication with Identity: User Registration ViewModel, Validation, and Views" class="linkLabel_WmDU">üìì 3.5.0.7 Authentication with Identity: User Registration ViewModel, Validation, and Views</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v1.2/c-and-net/authentication-with-identity/3-5-0-8-authentication-with-identity-user-login-and-logout"><span title="üìì 3.5.0.8 Authentication with Identity: User Login and Logout" class="linkLabel_WmDU">üìì 3.5.0.8 Authentication with Identity: User Login and Logout</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v1.2/c-and-net/authentication-with-identity/3-5-0-9-adding-authorization-and-associating-users-with-items"><span title="üìì 3.5.0.9 Adding Authorization and Associating Users with Items" class="linkLabel_WmDU">üìì 3.5.0.9 Adding Authorization and Associating Users with Items</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v1.2/c-and-net/authentication-with-identity/3-5-1-1-prior-course-section-survey"><span title="üìì 3.5.1.1 Prior Course Section Survey" class="linkLabel_WmDU">üìì 3.5.1.1 Prior Course Section Survey</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v1.2/c-and-net/authentication-with-identity/3-5-1-2-library-catalog-recipe-box-week-long-project---part-1"><span title="‚úèÔ∏è 3.5.1.2 Library Catalog, Recipe Box Week-Long Project - Part 1" class="linkLabel_WmDU">‚úèÔ∏è 3.5.1.2 Library Catalog, Recipe Box Week-Long Project - Part 1</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v1.2/c-and-net/authentication-with-identity/3-5-1-3-further-exploration-opportunities-with-identity"><span title="üìì 3.5.1.3 Further Exploration Opportunities with Identity" class="linkLabel_WmDU">üìì 3.5.1.3 Further Exploration Opportunities with Identity</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v1.2/c-and-net/authentication-with-identity/3-5-1-4-jokes-and-appropriate-humor"><span title="üìì 3.5.1.4 Jokes and Appropriate Humor" class="linkLabel_WmDU">üìì 3.5.1.4 Jokes and Appropriate Humor</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/v1.2/c-and-net/authentication-with-identity/3-5-2-1-making-an-api-call-with-restsharp"><span title="üìì 3.5.2.1 Making an API Call with RestSharp" class="linkLabel_WmDU">üìì 3.5.2.1 Making an API Call with RestSharp</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v1.2/c-and-net/authentication-with-identity/3-5-2-2-deserializing-api-responses-with-newtonsoft-json"><span title="üìì 3.5.2.2 Deserializing API Responses with Newtonsoft.Json" class="linkLabel_WmDU">üìì 3.5.2.2 Deserializing API Responses with Newtonsoft.Json</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v1.2/c-and-net/authentication-with-identity/3-5-2-3-api-calls-in-an-asp-net-core-mvc-app"><span title="üìì 3.5.2.3 API Calls in an ASP.NET Core MVC App" class="linkLabel_WmDU">üìì 3.5.2.3 API Calls in an ASP.NET Core MVC App</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v1.2/c-and-net/authentication-with-identity/3-5-3-1-library-catalog-recipe-box-week-long-project---part-2"><span title="‚úèÔ∏è 3.5.3.1 Library Catalog, Recipe Box Week-Long Project - Part 2" class="linkLabel_WmDU">‚úèÔ∏è 3.5.3.1 Library Catalog, Recipe Box Week-Long Project - Part 2</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v1.2/c-and-net/authentication-with-identity/3-5-3-2-whiteboard-practice"><span title="üìì 3.5.3.2 Whiteboard Practice" class="linkLabel_WmDU">üìì 3.5.3.2 Whiteboard Practice</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v1.2/c-and-net/authentication-with-identity/3-5-4-1-library-catalog-recipe-box-week-long-project---part-3"><span title="‚úèÔ∏è 3.5.4.1 Library Catalog, Recipe Box Week-Long Project - Part 3" class="linkLabel_WmDU">‚úèÔ∏è 3.5.4.1 Library Catalog, Recipe Box Week-Long Project - Part 3</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v1.2/c-and-net/authentication-with-identity/3-5-4-2-weekly-technical-interview-prep"><span title="üìì 3.5.4.2 Weekly Technical Interview Prep" class="linkLabel_WmDU">üìì 3.5.4.2 Weekly Technical Interview Prep</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v1.2/c-and-net/authentication-with-identity/3-5-5-1-authentication-with-identity-independent-project"><span title="‚úèÔ∏è 3.5.5.1 Authentication with Identity Independent Project" class="linkLabel_WmDU">‚úèÔ∏è 3.5.5.1 Authentication with Identity Independent Project</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/v1.2/c-and-net/building-an-api/3-6-0-01-building-an-api-objectives"><span title="3.6 Building an API" class="categoryLinkLabel_W154">3.6 Building an API</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/v1.2/c-and-net/team-project/3-7-0-1-team-project-objectives"><span title="3.7 Team Project" class="categoryLinkLabel_W154">3.7 Team Project</span></a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">3.5 Authentication with Identity</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">üìì 3.5.2.1 Making an API Call with RestSharp</span></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: v1.2</span><div class="theme-doc-markdown markdown"><header><h1>üìì 3.5.2.1 Making an API Call with RestSharp</h1></header><p>In this lesson, we&#x27;ll learn how to make an API call with a console application and a popular REST API client library called <a href="https://restsharp.dev/" target="_blank" rel="noopener noreferrer" class="">RestSharp</a>. We will start with a console application in order to focus on learning the basic process of making an API call and parsing the response. Then we&#x27;ll practice making API calls from an ASP.NET Core MVC app.</p>
<p>In the following lessons we&#x27;ll also learn how to deserialize the JSON that&#x27;s returned from (most) API calls. Throughout the lessons, we&#x27;ll learn how to protect our API keys.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="project-setup">Project Setup<a href="#project-setup" class="hash-link" aria-label="Direct link to Project Setup" title="Direct link to Project Setup" translate="no">‚Äã</a></h2>
<hr>
<p>We&#x27;ll use the New York Times&#x27; Top Stories API for this example project. In order to use the Top Stories API, you&#x27;ll need to create a free <a href="https://developer.nytimes.com/" target="_blank" rel="noopener noreferrer" class="">New York Times developer account</a>. Follow the <a href="https://developer.nytimes.com/get-started" target="_blank" rel="noopener noreferrer" class="">Get Started</a> steps to create an application and get your own API key. We recommend doing this first as API keys can sometimes take a little while to become activated.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="creating-basic-project-files-and-folders">Creating Basic Project Files and Folders<a href="#creating-basic-project-files-and-folders" class="hash-link" aria-label="Direct link to Creating Basic Project Files and Folders" title="Direct link to Creating Basic Project Files and Folders" translate="no">‚Äã</a></h3>
<p>For this example project you may build your own console app from scratch or use the <code>dotnet new</code> project scaffolding tool. A tool that scaffolds a project for us builds the folders and files with some boilerplate code, and it&#x27;s a handy way to get started quickly on a new project. We&#x27;ll use this tool again in future projects, so you will have a chance to practice with it at some point. More information on using the scaffolding tool is below.</p>
<p>If you opt to build your own console app from scratch, build out this project structure to start and make sure to add the appropriate code to the <code>ConsoleApiCall.csproj</code> file:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ConsoleApiCall</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚îú‚îÄ‚îÄ Models/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚îú‚îÄ‚îÄ Program.cs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚îî‚îÄ‚îÄ ConsoleApiCall.csproj</span><br></span></code></pre></div></div>
<p><strong>Don&#x27;t initialize or save your changes to Git until you&#x27;ve completed the setup steps for protecting your API key.</strong></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="a-few-notes-on-using-the-dotnet-new-scaffolding-tool">A Few Notes on Using the <code>dotnet new</code> Scaffolding Tool<a href="#a-few-notes-on-using-the-dotnet-new-scaffolding-tool" class="hash-link" aria-label="Direct link to a-few-notes-on-using-the-dotnet-new-scaffolding-tool" title="Direct link to a-few-notes-on-using-the-dotnet-new-scaffolding-tool" translate="no">‚Äã</a></h3>
<p>To use the <code>dotnet new</code> project scaffolding tool, open the command line, navigate to your desktop or another destination folder, and enter in the following command:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ dotnet new console -o ConsoleApiCall -f net6.0</span><br></span></code></pre></div></div>
<p>Note that the <code>-o</code> flag allows us to specify the &quot;output directory&quot;, the directory where all of the scaffolded files will be added. The <code>-f</code> flag allows us to specify the framework version we want our project to use.</p>
<p>It&#x27;s also important to note that the <code>dotnet new</code> scaffolding tool generates its console apps with a few newer features enabled:</p>
<ul>
<li class="">Implicit <code>using</code>s are enabled, which allows us to avoid having to explicitly list using directives.</li>
<li class="">Nullable types are enabled, which allows us to use nullable types anywhere in our program. If we don&#x27;t enable nullable types globally through the <code>.csproj</code> file, then we have to explicitly create nullable contexts with <code>#nullable enable</code> in the specific locations where we want to use nullable types.</li>
<li class="">Top level statements are enabled, which makes it so that we don&#x27;t need to explicitly include the entry point&#x27;s <code>Main()</code> method. Note that only one class in our project can have this method, and usually it is <code>Program</code>.</li>
</ul>
<p>The first two features correspond to settings that we can enable for our entire app in our project&#x27;s <code>.csproj</code>. The third feature is always enabled, and optional:</p>
<div class="filename">ConsoleApiCall.csproj</div>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&lt;</span><span class="token class-name">Project</span><span class="token plain"> Sdk</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;Microsoft.NET.Sdk&quot;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">PropertyGroup</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">OutputType</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">Exe</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">OutputType</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">TargetFramework</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">net6</span><span class="token punctuation" style="color:#393A34">.</span><span class="token number" style="color:#36acaa">0</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">TargetFramework</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">ImplicitUsings</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">enable</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">ImplicitUsings</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">Nullable</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">enable</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">Nullable</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">PropertyGroup</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">Project</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre></div></div>
<p><strong>We&#x27;re going to opt out of these features for now.</strong> This is in order to...</p>
<ol>
<li class="">Understand which using directives we need to use certain tools.</li>
<li class="">Remind ourselves about C# console app&#x27;s entry point.</li>
<li class="">Avoid managing nullable variables throughout our app. When nullable types are enabled, we need to explicitly list which types could be <code>null</code> in our apps, which is a lot more than you might think. For example, <a href="https://learn.microsoft.com/en-us/dotnet/api/system.console.readline?view=net-6.0" target="_blank" rel="noopener noreferrer" class="">the <code>System.Console.ReadLine()</code> method</a> returns the user input, or <code>null</code> if there&#x27;s nothing returned. If nullable types are enabled across our app, we would need to make sure that we&#x27;re explicitly marking the variable that holds the user input as nullable: <code>string? userResponse = System.Console.ReadLine();</code>. When nullable types are not enabled we don&#x27;t have to do this additional work. Since we haven&#x27;t spent a lot of time working with nullable types, it&#x27;s easier right now to simply enable them as needed in our app, instead of as a setting for our whole app. To review more information about nullable types, start with the LearnHowToProgram.com lesson on <a class="" href="/v1.2/c-and-net/test-driven-development-with-c/3-1-2-6-nullable-types">Nullable Types</a>.</li>
</ol>
<p>Make sure to remove or comment out these configurations in your <code>ConsoleApiCall.csproj</code>:</p>
<div class="filename">ConsoleApiCall.csproj</div>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&lt;</span><span class="token class-name">Project</span><span class="token plain"> Sdk</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;Microsoft.NET.Sdk&quot;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">PropertyGroup</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">OutputType</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">Exe</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">OutputType</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">TargetFramework</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">net6</span><span class="token punctuation" style="color:#393A34">.</span><span class="token number" style="color:#36acaa">0</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">TargetFramework</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">!</span><span class="token operator" style="color:#393A34">--</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">ImplicitUsings</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">enable</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">ImplicitUsings</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">!</span><span class="token operator" style="color:#393A34">--</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">Nullable</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">enable</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">Nullable</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">PropertyGroup</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">Project</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre></div></div>
<p>Note that you are welcome to choose your own path with these configurations, but the instructions in these lessons will not include how using these features may affect the warning or errors you get in your app.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="add-restsharp">Add RestSharp<a href="#add-restsharp" class="hash-link" aria-label="Direct link to Add RestSharp" title="Direct link to Add RestSharp" translate="no">‚Äã</a></h3>
<p>Next, Let&#x27;s add the RestSharp package to our project:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ dotnet add package RestSharp --version 108.0.3</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="create-an-environment-variable-for-the-api-key">Create an Environment Variable for the API Key<a href="#create-an-environment-variable-for-the-api-key" class="hash-link" aria-label="Direct link to Create an Environment Variable for the API Key" title="Direct link to Create an Environment Variable for the API Key" translate="no">‚Äã</a></h3>
<p>The last step for setup is to protect our API key in an environment variable. There are many ways we can do this, and we&#x27;ll take a simple approach in this lesson.</p>
<p>First, we&#x27;ll create a <code>.gitignore</code> with the file and folders listed within that we do not want tracked in our Git history:</p>
<div class="filename">.gitignore</div>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">EnvironmentVariables.cs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">obj</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bin</span><br></span></code></pre></div></div>
<p>Next, we&#x27;ll commit the change we made to our <code>.gitignore</code> to our Git history.</p>
<p>Next, let&#x27;s create the file that we&#x27;ve ignored. It&#x27;s in this file that we&#x27;ll put our API key.</p>
<div class="filename">EnvironmentVariables.cs</div>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">namespace</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">ConsoleApiCall</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">Keys</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">EnvironmentVariables</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token class-name keyword" style="color:#00009f">string</span><span class="token plain"> ApiKey </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;[YOUR-API-KEY-HERE]&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>Replace <code>&quot;[YOUR-API-KEY-HERE]&quot;</code> with your own API key.</p>
<p>Wherever we need to use our API key in our application we can do so by adding a using directive for <code>ConsoleApiCall.Keys</code> and calling <code>EnvironmentVariables.ApiKey</code>. We&#x27;ll do just that later in this lesson.</p>
<p>Keep in mind that this is very basic protection for our API key. We could still accidentally commit our API key to our Git history and publish it to the web.  To learn about other ways we can manage secrets, visit the <a href="https://learn.microsoft.com/en-us/aspnet/core/security/app-secrets?view=aspnetcore-6.0" target="_blank" rel="noopener noreferrer" class="">MS Docs on application secrets</a>.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="adding-code-to-make-an-api-call">Adding Code To Make An API Call<a href="#adding-code-to-make-an-api-call" class="hash-link" aria-label="Direct link to Adding Code To Make An API Call" title="Direct link to Adding Code To Make An API Call" translate="no">‚Äã</a></h2>
<hr>
<p>Open the <code>ConsoleApiCall/</code> project directory in VS Code and we&#x27;ll get started. The <code>dotnet new</code> command has already added a basic <code>Program.cs</code> file for us:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// See https://aka.ms/new-console-template for more information</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">WriteLine</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Hello, World!&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>Take note that the code in <code>Program.cs</code> is making use of top-level statements and implicit using directives, which allows us to omit the <code>Main()</code> method and not explicitly include the <code>using System;</code> namespace directive to use the <code>Console.WriteLine()</code> method.</p>
<p>Let&#x27;s update <code>Program.cs</code> to include basic code to make an API call. We&#x27;ll also explicitly list all of our using directives and our <code>Program.Main()</code> method, the entry point to our C# console applications.</p>
<p>Here&#x27;s how we&#x27;ll update <code>Program.cs</code>:</p>
<div class="filename">Program.cs</div>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">System</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">System</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">Threading</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">Tasks</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">RestSharp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">ConsoleApiCall</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">Keys</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">namespace</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">ApiTest</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">Program</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token class-name">Task</span><span class="token class-name punctuation" style="color:#393A34">&lt;</span><span class="token class-name keyword" style="color:#00009f">string</span><span class="token class-name punctuation" style="color:#393A34">&gt;</span><span class="token plain"> apiCallTask </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ApiHelper</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ApiCall</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">EnvironmentVariables</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ApiKey</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token class-name keyword" style="color:#00009f">string</span><span class="token plain"> result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> apiCallTask</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Result</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">WriteLine</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">ApiHelper</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token return-type class-name">Task</span><span class="token return-type class-name punctuation" style="color:#393A34">&lt;</span><span class="token return-type class-name keyword" style="color:#00009f">string</span><span class="token return-type class-name punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ApiCall</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name keyword" style="color:#00009f">string</span><span class="token plain"> apiKey</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token class-name">RestClient</span><span class="token plain"> client </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">RestClient</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;https://api.nytimes.com/svc/topstories/v2&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token class-name">RestRequest</span><span class="token plain"> request </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">RestRequest</span><span class="token punctuation" style="color:#393A34">(</span><span class="token interpolation-string string" style="color:#e3116c">$&quot;home.json?api-key=</span><span class="token interpolation-string interpolation punctuation" style="color:#393A34">{</span><span class="token interpolation-string interpolation expression language-csharp">apiKey</span><span class="token interpolation-string interpolation punctuation" style="color:#393A34">}</span><span class="token interpolation-string string" style="color:#e3116c">&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Method</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Get</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token class-name">RestResponse</span><span class="token plain"> response </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ExecuteAsync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">request</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> response</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Content</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>Let&#x27;s take time to understand this new code, and then try running it afterwards.</p>
<p>We&#x27;ll first take a look at the <code>ApiCall</code> static method that we&#x27;ve created:</p>
<ul>
<li class="">
<p>We create a class called <code>ApiHelper</code> that contains a static method <code>ApiCall</code> which takes an <code>apiKey</code> parameter.</p>
</li>
<li class="">
<p>We want our API calls to run asynchronously so that the application is responsive and free to run other tasks while the HTTP request/response loop executes. In order to achieve this, we add the <code>async</code> keyword to our method declaration.</p>
</li>
<li class="">
<p>Whenever a method is declared as <code>async</code>, we need to return a <code>Task</code> type. We specify the return type of our Task object (a <code>string</code>) in the angle brackets, but a generic <code>Task</code> can also be returned.</p>
</li>
<li class="">
<p>Note that we use the base URL <em><a href="https://api.nytimes.com/svc/topstories/v2" target="_blank" rel="noopener noreferrer" class="">https://api.nytimes.com/svc/topstories/v2</a></em> from the Top Stories API. We instantiate a RestSharp <code>RestClient</code> object and store the connection in a variable called <code>client</code>.</p>
</li>
<li class="">
<p>Next, we create a <code>RestRequest</code> object. This is our actual request. We include the path to the endpoint we are looking for (<code>home.json</code>) along with our API key.  We also specify that we will be using a GET Http method.</p>
</li>
<li class="">
<p>Note that we utilize C#&#x27;s string interpolation to place the <code>apiKey</code> variable into the <code>RestRequest</code> by placing a <code>$</code> before a string and then placing any interpolated values in curly braces.</p>
</li>
<li class="">
<p>Then we use the <code>await</code> keyword to specify that we need to receive a result before we attempt to define <code>response</code>. We call the <code>RestClient</code>&#x27;s <code>ExecuteAsync</code> method and pass in our request object.</p>
</li>
<li class="">
<p>Finally, we return the <code>Content</code> property of the <code>RestResponse response</code> variable, which is a string representation of the response content.</p>
</li>
</ul>
<p>Now, let&#x27;s take a a look at the <code>Program.Main()</code> method:</p>
<ul>
<li class="">
<p>In the <code>Main()</code> method, we create a variable to store the returned <code>Task&lt;string&gt;</code> from our <code>async</code> function and then call the <code>ApiHelper</code> class&#x27; <code>ApiCall</code> method. It&#x27;s here that we pass in our New York Times API key via our environment variable  <code>EnvironmentVariables.ApiKey</code>.</p>
</li>
<li class="">
<p>Then, we create a variable to store the <code>Result</code> of the <code>Task</code>, which in our case is a string representation of the API call&#x27;s response content.</p>
</li>
<li class="">
<p>Lastly, we write the result to the console.</p>
</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="run-the-program">Run the Program<a href="#run-the-program" class="hash-link" aria-label="Direct link to Run the Program" title="Direct link to Run the Program" translate="no">‚Äã</a></h2>
<hr>
<p>Next, run the program with <code>dotnet run</code>. We&#x27;ll get a long, very dense response that has all the data for the New York Times&#x27; top stories.</p>
<p>To make better sense of this data, we can paste the response into a JSON formatter like this <a href="http://jsonviewer.stack.hu/" target="_blank" rel="noopener noreferrer" class="">one</a>. Copy the data into the formatter and then click the &quot;Format&quot; button. Of course, Postman can help us read this data, too.</p>
<p>However, this isn&#x27;t an ideal way to deal with API responses. In the next lesson, we&#x27;ll learn how to parse and deserialize JSON data in our C# applications.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="repository-reference">Repository Reference<a href="#repository-reference" class="hash-link" aria-label="Direct link to Repository Reference" title="Direct link to Repository Reference" translate="no">‚Äã</a></h3>
<p>Follow the link below to view how a sample version of the project should look at this point. Note that this is a link to a specific branch in the repository.</p>
<p><strong><a href="https://github.com/epicodus-lessons/c-sharp-newyorktimes-api-call/tree/1_api_call_in_console_app" target="_blank" rel="noopener noreferrer" class=""><i class="glyphicon glyphicon-folder-open"></i> Example GitHub Repo for Sample New York Times API Call: <code>1_api_call_in_console_app</code></a></strong></p></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/v1.2/c-and-net/authentication-with-identity/3-5-1-4-jokes-and-appropriate-humor"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">üìì 3.5.1.4 Jokes and Appropriate Humor</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/v1.2/c-and-net/authentication-with-identity/3-5-2-2-deserializing-api-responses-with-newtonsoft-json"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">üìì 3.5.2.2 Deserializing API Responses with Newtonsoft.Json</div></a></nav></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2026 Fidgetech</div></div></div></footer></div>
</body>
</html>