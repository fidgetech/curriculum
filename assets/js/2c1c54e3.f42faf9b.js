"use strict";(self.webpackChunklhtp=self.webpackChunklhtp||[]).push([[67221],{16834:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>d,frontMatter:()=>s,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"c-and-net/building-an-api/3-6-1-3-configuring-application-urls-to-run-two-asp-net-core-applications","title":"\ud83d\udcd3 3.6.1.3 Configuring Application URLs to Run Two ASP.NET Core Applications","description":"Over the next few days, we\'ll build an application that will make calls to the API we built in the first part of this section. In order to do this, we\'ll need to have two applications running simultaneously. However, if we try running two applications on the same port, we\'ll get the following error:","source":"@site/docs/3_c-and-net/6_building-an-api/3-6-1-03-configuring-application-urls-to-run-two-asp-net-core-applications.md","sourceDirName":"3_c-and-net/6_building-an-api","slug":"/c-and-net/building-an-api/3-6-1-3-configuring-application-urls-to-run-two-asp-net-core-applications","permalink":"/v1.2/c-and-net/building-an-api/3-6-1-3-configuring-application-urls-to-run-two-asp-net-core-applications","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"\ud83d\udcd3 3.6.1.3 Configuring Application URLs to Run Two ASP.NET Core Applications","day":"monday","id":"3-6-1-3-configuring-application-urls-to-run-two-asp-net-core-applications","hide_table_of_contents":true},"sidebar":"c-and-net","previous":{"title":"\u270f\ufe0f 3.6.1.2 Building an API Part 1","permalink":"/v1.2/c-and-net/building-an-api/3-6-1-2-building-an-api-part-1"},"next":{"title":"\u270f\ufe0f Building an API Part 2 (day 2)","permalink":"/v1.2/c-and-net/building-an-api/building-an-api-part-2-day-2"}}');var r=t(74848),i=t(28453);const s={title:"\ud83d\udcd3 3.6.1.3 Configuring Application URLs to Run Two ASP.NET Core Applications",day:"monday",id:"3-6-1-3-configuring-application-urls-to-run-two-asp-net-core-applications",hide_table_of_contents:!0},a=void 0,l={},c=[{value:"Changing Port Numbers in <code>Properties/launchSettings.json</code>",id:"changing-port-numbers-in-propertieslaunchsettingsjson",level:2},{value:"Configuring <code>WebHost.UseUrls()</code>",id:"configuring-webhostuseurls",level:2},{value:"Choose Your Preferred Port Numbers",id:"choose-your-preferred-port-numbers",level:2},{value:"The Ports We&#39;ll Use in the Cretaceous Park Example Projects",id:"the-ports-well-use-in-the-cretaceous-park-example-projects",level:3}];function p(e){const n={a:"a",code:"code",div:"div",h2:"h2",h3:"h3",hr:"hr",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"Over the next few days, we'll build an application that will make calls to the API we built in the first part of this section. In order to do this, we'll need to have two applications running simultaneously. However, if we try running two applications on the same port, we'll get the following error:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Unhandled Exception: System.IO.IOException: Failed to bind to address https://127.0.0.1:5001: address already in use. ---\x3e Microsoft.AspNetCore.Connections.AddressInUseException: Address already in use ---\x3e System.Net.Sockets.SocketException: Address already in use\n"})}),"\n",(0,r.jsx)(n.p,{children:"Fortunately, this is easy to fix. We just need to specify a different port number for one of the applications we are running."}),"\n",(0,r.jsx)(n.p,{children:"There are many ways to do this. We'll list two simple configurations here."}),"\n",(0,r.jsxs)(n.h2,{id:"changing-port-numbers-in-propertieslaunchsettingsjson",children:["Changing Port Numbers in ",(0,r.jsx)(n.code,{children:"Properties/launchSettings.json"})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.p,{children:["In our ASP.NET Core projects, we can add a file called ",(0,r.jsx)(n.code,{children:"Properties/launchSettings.json"})," with a number of configurations on how we want to run our projects: in what environment? What port number? Should a browser window be launched? Projects that are scaffolded with the ",(0,r.jsx)(n.code,{children:"dotnet new"})," command come with these files. Here's a code snippet from a ",(0,r.jsx)(n.code,{children:"Properties/launchSettings.json"})," file:"]}),"\n",(0,r.jsx)(n.div,{className:"filename",children:"Properties/launchSettings.json"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'  "project_name_here": {\n      "commandName": "Project",\n      "launchBrowser": true,\n      "applicationUrl": "https://localhost:5001;http://localhost:5000",\n      "environmentVariables": {\n        "ASPNETCORE_ENVIRONMENT": "Development"\n      }\n    }\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Well, for our application to listen on a different port, we can simply update the ",(0,r.jsx)(n.code,{children:'"applicationUrl"'})," to specify different ports such as ",(0,r.jsx)(n.code,{children:'"https://localhost:5003;http://localhost:5004"'}),"."]}),"\n",(0,r.jsxs)(n.h2,{id:"configuring-webhostuseurls",children:["Configuring ",(0,r.jsx)(n.code,{children:"WebHost.UseUrls()"})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.p,{children:["Alternatively, we can update our ",(0,r.jsx)(n.code,{children:"Program.cs"})," file to specify a port number via ",(0,r.jsx)(n.a,{href:"https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.hosting.hostingabstractionswebhostbuilderextensions.useurls?view=aspnetcore-6.0",children:(0,r.jsx)(n.code,{children:"builder.WebHost.UseUrls()"})}),":"]}),"\n",(0,r.jsx)(n.div,{className:"filename",children:"Program.cs"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",children:'...\n\nWebApplicationBuilder builder = WebApplication.CreateBuilder(args);\n\nbuilder.WebHost.UseUrls("http://*:8080");    \n\n...\n'})}),"\n",(0,r.jsx)(n.h2,{id:"choose-your-preferred-port-numbers",children:"Choose Your Preferred Port Numbers"}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:"You can pick whatever port numbers that you prefer. You may run into conflicts if you pick a port number that's already in use, like our MySQL server running on port 3306. If we try to use port 3306 and run our API, we'll get an error message similar to the following one:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Unable to bind to http://localhost:3306 on the IPv6 loopback interface: 'An attempt was made to access a socket in a way forbidden by its access permissions.'.\n"})}),"\n",(0,r.jsx)(n.h3,{id:"the-ports-well-use-in-the-cretaceous-park-example-projects",children:"The Ports We'll Use in the Cretaceous Park Example Projects"}),"\n",(0,r.jsxs)(n.p,{children:["In the Cretaceous Park API example project, we'll assume the ports are ",(0,r.jsx)(n.code,{children:"https://localhost:5001"})," and ",(0,r.jsx)(n.code,{children:"http://localhost:5000"}),". As noted in an earlier lesson, we'll use HTTP in development, so we'll make all requests to ",(0,r.jsx)(n.code,{children:"http://localhost:5000"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["For the Cretaceous Park Client (that we'll create in upcoming lessons), we'll assume the ports are ",(0,r.jsx)(n.code,{children:"https://localhost:7277"})," and ",(0,r.jsx)(n.code,{children:"http://localhost:5187"}),"."]})]})}function d(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>a});var o=t(96540);const r={},i=o.createContext(r);function s(e){const n=o.useContext(i);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),o.createElement(i.Provider,{value:n},e.children)}}}]);