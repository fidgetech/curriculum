"use strict";(self.webpackChunklhtp=self.webpackChunklhtp||[]).push([[60072],{28453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>o});var t=i(96540);const s={},a=t.createContext(s);function r(e){const n=t.useContext(a);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),t.createElement(a.Provider,{value:n},e.children)}},63846:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"intermediate-javascript/asynchrony-and-apis/2-3-0-8-protecting-api-keys","title":"\ud83d\udcd3 2.3.0.8 Protecting API Keys","description":"In the real world, API keys shouldn\'t be stored in client-side JavaScript files. This simply isn\'t secure, especially if the API has a rate limit, charges for use, or provides access to sensitive information. If your API key is accessible directly in the source code, anyone can access it, including bots!","source":"@site/docs/2_intermediate-javascript/3_asynchrony-and-apis/2-3-0-08-protecting-api-keys.md","sourceDirName":"2_intermediate-javascript/3_asynchrony-and-apis","slug":"/intermediate-javascript/asynchrony-and-apis/2-3-0-8-protecting-api-keys","permalink":"/v1.2/intermediate-javascript/asynchrony-and-apis/2-3-0-8-protecting-api-keys","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"\ud83d\udcd3 2.3.0.8 Protecting API Keys","day":"weekend","id":"2-3-0-8-protecting-api-keys","hide_table_of_contents":true},"sidebar":"intermediate-javascript","previous":{"title":"\ud83d\udcd3 2.3.0.7 Making API Calls with JavaScript","permalink":"/v1.2/intermediate-javascript/asynchrony-and-apis/2-3-0-7-making-api-calls-with-javascript"},"next":{"title":"\ud83d\udcd3 2.3.0.9 Exception Handling for API Calls","permalink":"/v1.2/intermediate-javascript/asynchrony-and-apis/2-3-0-9-exception-handling-for-api-calls"}}');var s=i(74848),a=i(28453);const r={title:"\ud83d\udcd3 2.3.0.8 Protecting API Keys",day:"weekend",id:"2-3-0-8-protecting-api-keys",hide_table_of_contents:!0},o=void 0,c={},l=[{value:"Protecting API Keys",id:"protecting-api-keys",level:2},{value:"Adding <code>.env</code> to <code>.gitignore</code>",id:"adding-env-to-gitignore",level:3},{value:"Creating a <code>.env</code> File",id:"creating-a-env-file",level:3},{value:"Configuring webpack",id:"configuring-webpack",level:3},{value:"Accessing Environmental Variables",id:"accessing-environmental-variables",level:3},{value:"Summary",id:"summary",level:2}];function d(e){const n={code:"code",div:"div",em:"em",h2:"h2",h3:"h3",hr:"hr",p:"p",pre:"pre",strong:"strong",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"In the real world, API keys shouldn't be stored in client-side JavaScript files. This simply isn't secure, especially if the API has a rate limit, charges for use, or provides access to sensitive information. If your API key is accessible directly in the source code, anyone can access it, including bots!"}),"\n",(0,s.jsx)(n.p,{children:"Thankfully, we can easily conceal API keys in our applications, and that's just what we'll learn how to do in this lesson."}),"\n",(0,s.jsx)(n.p,{children:"It's worth noting that we'll be learning a method of protecting and managing API keys for development. In production, your JavaScript application would typically make a request to your own web server, which safely stores your API key; then your web server would make the appropriate request to the API, and then handle delivering the response to your application."}),"\n",(0,s.jsx)(n.h2,{id:"protecting-api-keys",children:"Protecting API Keys"}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.p,{children:["When we write code in development, we can store our API key in a ",(0,s.jsx)(n.code,{children:".env"})," file stored on our local machines. ",(0,s.jsx)(n.code,{children:".env"})," is a place where we can store any ",(0,s.jsx)(n.strong,{children:"environmental variables"})," we want to keep secret (such as an API key). These are variables that are specific to your environment and shouldn't be shared with others. ",(0,s.jsx)(n.code,{children:".env"})," is a common file extension for a configuration file used to set variables containing sensitive information. In fact, the file is a convention used across many frameworks including Node and Rails."]}),"\n",(0,s.jsxs)(n.p,{children:["Once we have a ",(0,s.jsx)(n.code,{children:".env"})," file, we need to add it to our ",(0,s.jsx)(n.code,{children:".gitignore"}),". This way, we don't accidentally push sensitive information to GitHub."]}),"\n",(0,s.jsxs)(n.p,{children:["Anyone who wants to clone and use our application can simply create their own local ",(0,s.jsx)(n.code,{children:".env"})," file with their own API key. Because of this, ",(0,s.jsx)(n.strong,{children:"you are required to include instructions for getting and setting up an API key in your README for this section's independent project."})," A README should have all instructions for setting up a project, so the reason for this requirement should be clear."]}),"\n",(0,s.jsxs)(n.h3,{id:"adding-env-to-gitignore",children:["Adding ",(0,s.jsx)(n.code,{children:".env"})," to ",(0,s.jsx)(n.code,{children:".gitignore"})]}),"\n",(0,s.jsxs)(n.p,{children:["Before using an API key in our application or creating a ",(0,s.jsx)(n.code,{children:".env"})," file, we need to make we're ignoring it. This should always be your first step."]}),"\n",(0,s.jsxs)(n.p,{children:["Let's add ",(0,s.jsx)(n.code,{children:".env"})," to our ",(0,s.jsx)(n.code,{children:".gitignore"})," file now. At this point, your ",(0,s.jsx)(n.code,{children:".gitignore"})," file should look something like this:"]}),"\n",(0,s.jsx)(n.div,{className:"filename",children:".gitignore"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"node_modules/\ndist/\ncoverage/\n.env\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"creating-a-env-file",children:["Creating a ",(0,s.jsx)(n.code,{children:".env"})," File"]}),"\n",(0,s.jsxs)(n.p,{children:["Next, let's create a ",(0,s.jsx)(n.code,{children:".env"})," file in the root directory of our project where we can store our sensitive variables:"]}),"\n",(0,s.jsx)(n.div,{className:"filename",children:".env"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"API_KEY=3d68a17ddd5ea407ab91f2d278342017\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Note that the API key above is a fake one \u2014 you will need to replace it with your own. It's ",(0,s.jsx)(n.em,{children:"not"})," a string \u2014 so don't use quotes or backticks!"]}),"\n",(0,s.jsxs)(n.p,{children:["The variable that we're storing the key in is ",(0,s.jsx)(n.code,{children:"API_KEY"}),". Note that the naming convention here for variables is all uppercase with underscores between each words."]}),"\n",(0,s.jsx)(n.p,{children:"We can add as many variables as we want (such as if we are working on a project that uses multiple APIs and keys). While we are only protecting API keys, there are many other sensitive variables not related to APIs we might potentially want to store in the future."}),"\n",(0,s.jsx)(n.h3,{id:"configuring-webpack",children:"Configuring webpack"}),"\n",(0,s.jsxs)(n.p,{children:["Next, we'll use a webpack plugin called ",(0,s.jsx)(n.code,{children:"dotenv-webpack"})," to make our environmental variables available inside our application:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"$ npm install dotenv-webpack@2.0.0 --save-dev\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Because it's a plugin, we need to first ",(0,s.jsx)(n.code,{children:"require"})," it and then add it to the ",(0,s.jsx)(n.code,{children:"plugins"})," array in ",(0,s.jsx)(n.code,{children:"webpack.config.js"}),":"]}),"\n",(0,s.jsx)(n.div,{className:"filename",children:"webpack.config.js"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"...\nconst Dotenv = require('dotenv-webpack');\n\nmodule.exports = {\n  ...\n  plugins: [\n    ...\n    new Dotenv()\n  ],\n  ...\n  }\n};\n"})}),"\n",(0,s.jsx)(n.h3,{id:"accessing-environmental-variables",children:"Accessing Environmental Variables"}),"\n",(0,s.jsxs)(n.p,{children:["To access environmental variables in our application, we need to preface the environmental variable with ",(0,s.jsx)(n.code,{children:"process.env"}),". Here's an example using our API_KEY from above:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"process.env.API_KEY\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Note that it's necessary to use a template literal so the key is expressed as a string within our API call. (Remember, it's not a string in our ",(0,s.jsx)(n.code,{children:".env"})," file.) For that reason, it's added to our code like this: ",(0,s.jsx)(n.code,{children:"${process.env.API_KEY}"}),". Here's how it should look if we add it to our API call from the last lesson:"]}),"\n",(0,s.jsx)(n.div,{className:"filename",children:"src/index.js"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"function getWeather () {\n  ...\n  const url = `http://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${process.env.API_KEY}`\n  ...\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.p,{children:["You should ",(0,s.jsx)(n.em,{children:"always"})," be careful storing any sensitive information in your application. Even if it's just the key for an API that's free for public use, you should always be in the habit of keeping this information private. This means storing all keys in a local ",(0,s.jsx)(n.code,{children:".env"})," file that's ",(0,s.jsx)(n.em,{children:"never"})," pushed to GitHub."]}),"\n",(0,s.jsxs)(n.p,{children:["If you create GitHub templates for projects that use webpack, make sure that ",(0,s.jsx)(n.code,{children:"dotenv-webpack"})," is added to your ",(0,s.jsx)(n.code,{children:"package.json"})," and ",(0,s.jsx)(n.code,{children:".env"})," is added to your ",(0,s.jsx)(n.code,{children:".gitignore"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["Once again, when you push projects to GitHub that require API keys, make sure to include instructions in the README so that other users can clone your project and use their own API keys to see what you've built. That means including ",(0,s.jsx)(n.em,{children:"all"})," steps for getting a key \u2014 from the link to sign up for an account to any steps to getting an API key to the name of the API key variables that should be added to the ",(0,s.jsx)(n.code,{children:".env"})," file. Including accurate instructions for getting and setting up an API key is a requirement for this section's independent project."]}),"\n",(0,s.jsx)(n.p,{children:"Up next, we'll add error handling to our OpenWeather API app."})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);