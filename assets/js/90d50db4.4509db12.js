"use strict";(self.webpackChunklhtp=self.webpackChunklhtp||[]).push([[87391],{8146:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>d,default:()=>h,frontMatter:()=>s,metadata:()=>i,toc:()=>r});const i=JSON.parse('{"id":"react/react-fundamentals/4-2-3-6-deleting-a-ticket","title":"\ud83d\udcd3 4.2.3.6 Deleting a Ticket","description":"In the last lesson, we added the ability for a user to see an individual ticket\'s detail page. We had to alter or create four different components in order to add this relatively small piece of functionality.","source":"@site/versioned_docs/version-v1_3/4_react/2_react-fundamentals/4-2-3-06-deleting-a-ticket.md","sourceDirName":"4_react/2_react-fundamentals","slug":"/react/react-fundamentals/4-2-3-6-deleting-a-ticket","permalink":"/v1.3/react/react-fundamentals/4-2-3-6-deleting-a-ticket","draft":false,"unlisted":false,"tags":[],"version":"v1_3","frontMatter":{"title":"\ud83d\udcd3 4.2.3.6 Deleting a Ticket","day":"wednesday","id":"4-2-3-6-deleting-a-ticket","hide_table_of_contents":true},"sidebar":"react","previous":{"title":"\ud83d\udcd3 4.2.3.5 Showing Ticket Detail","permalink":"/v1.3/react/react-fundamentals/4-2-3-5-showing-ticket-detail"},"next":{"title":"\ud83d\udcd3 4.2.3.7 Reusing Components","permalink":"/v1.3/react/react-fundamentals/4-2-3-7-reusing-components"}}');var c=n(74848),l=n(28453);const s={title:"\ud83d\udcd3 4.2.3.6 Deleting a Ticket",day:"wednesday",id:"4-2-3-6-deleting-a-ticket",hide_table_of_contents:!0},d=void 0,o={},r=[{value:"Our Roadmap",id:"our-roadmap",level:2},{value:"Step 1: Write the <code>handleDeleteTicket</code> Function",id:"step-1-write-the-handledeleteticket-function",level:2},{value:"Step 2: Pass the Function to <code>TicketDetail</code>",id:"step-2-pass-the-function-to-ticketdetail",level:2},{value:"Step 3: Add the Delete Button to <code>TicketDetail</code>",id:"step-3-add-the-delete-button-to-ticketdetail",level:2},{value:"Recap",id:"recap",level:2},{value:"What&#39;s Next?",id:"whats-next",level:2}];function a(e){const t={admonition:"admonition",code:"code",em:"em",h2:"h2",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(t.p,{children:"In the last lesson, we added the ability for a user to see an individual ticket's detail page. We had to alter or create four different components in order to add this relatively small piece of functionality."}),"\n",(0,c.jsxs)(t.p,{children:["Some good news: adding delete functionality is going to be much easier. This is because we planned out our application carefully. We will only need to alter two components - ",(0,c.jsx)(t.code,{children:"TicketControl"})," (which holds our shared state) and ",(0,c.jsx)(t.code,{children:"TicketDetail"})," (where the delete button will live)."]}),"\n",(0,c.jsxs)(t.p,{children:["If we'd chosen to place ",(0,c.jsx)(t.code,{children:"TicketDetail"})," below ",(0,c.jsx)(t.code,{children:"Ticket"})," in the component tree, we'd have a prop-drilling nightmare. Our function for deleting tickets would need to pass through ",(0,c.jsx)(t.code,{children:"TicketList"}),", ",(0,c.jsx)(t.code,{children:"Ticket"}),", and ",(0,c.jsx)(t.code,{children:"TicketDetail"})," - three layers of props for one button click!"]}),"\n",(0,c.jsx)(t.h2,{id:"our-roadmap",children:"Our Roadmap"}),"\n",(0,c.jsxs)(t.ol,{children:["\n",(0,c.jsxs)(t.li,{children:["Write a ",(0,c.jsx)(t.code,{children:"handleDeleteTicket"})," function in ",(0,c.jsx)(t.code,{children:"TicketControl"})]}),"\n",(0,c.jsxs)(t.li,{children:["Pass this function as a prop to ",(0,c.jsx)(t.code,{children:"TicketDetail"})]}),"\n",(0,c.jsx)(t.li,{children:"Add a delete button that triggers the function"}),"\n"]}),"\n",(0,c.jsx)(t.p,{children:"Let's go!"}),"\n",(0,c.jsx)(t.hr,{}),"\n",(0,c.jsxs)(t.h2,{id:"step-1-write-the-handledeleteticket-function",children:["Step 1: Write the ",(0,c.jsx)(t.code,{children:"handleDeleteTicket"})," Function"]}),"\n",(0,c.jsxs)(t.p,{children:["We'll start by adding a function to ",(0,c.jsx)(t.code,{children:"TicketControl"})," that deletes a ticket from ",(0,c.jsx)(t.code,{children:"mainTicketList"})," based on its ID:"]}),"\n",(0,c.jsx)(t.pre,{children:(0,c.jsx)(t.code,{className:"language-js",metastring:'title="src/components/TicketControl.js"',children:"const handleDeleteTicket = (id) => {\n  const newMainTicketList = mainTicketList.filter(ticket => ticket.id !== id);\n  setMainTicketList(newMainTicketList);\n  setSelectedTicket(null);\n};\n"})}),"\n",(0,c.jsx)(t.p,{children:(0,c.jsx)(t.strong,{children:"Breaking this down:"})}),"\n",(0,c.jsxs)(t.ul,{children:["\n",(0,c.jsxs)(t.li,{children:[(0,c.jsx)(t.code,{children:"filter()"})," returns all tickets where ",(0,c.jsx)(t.code,{children:"ticket.id !== id"})," - in other words, every ticket ",(0,c.jsx)(t.em,{children:"except"})," the one we're deleting"]}),"\n",(0,c.jsxs)(t.li,{children:[(0,c.jsx)(t.code,{children:"setMainTicketList(newMainTicketList)"})," updates state with our filtered list"]}),"\n",(0,c.jsxs)(t.li,{children:[(0,c.jsx)(t.code,{children:"setSelectedTicket(null)"})," returns the user to the ticket list view"]}),"\n"]}),"\n",(0,c.jsx)(t.admonition,{title:"filter() for deletion",type:"tip",children:(0,c.jsxs)(t.p,{children:["In the last lesson, we used ",(0,c.jsx)(t.code,{children:"find()"})," to get a single matching ticket. Here we use ",(0,c.jsx)(t.code,{children:"filter()"})," to get all tickets ",(0,c.jsx)(t.em,{children:"except"})," the one we're deleting."]})}),"\n",(0,c.jsx)(t.hr,{}),"\n",(0,c.jsxs)(t.h2,{id:"step-2-pass-the-function-to-ticketdetail",children:["Step 2: Pass the Function to ",(0,c.jsx)(t.code,{children:"TicketDetail"})]}),"\n",(0,c.jsxs)(t.p,{children:["Next, pass ",(0,c.jsx)(t.code,{children:"handleDeleteTicket"})," as a prop to ",(0,c.jsx)(t.code,{children:"TicketDetail"}),". Update the conditional rendering in ",(0,c.jsx)(t.code,{children:"TicketControl"}),":"]}),"\n",(0,c.jsx)(t.pre,{children:(0,c.jsx)(t.code,{className:"language-js",metastring:'title="src/components/TicketControl.js"',children:'if (selectedTicket !== null) {\n  currentlyVisibleState = (\n    <TicketDetail\n      ticket={selectedTicket}\n      onClickingDelete={handleDeleteTicket}\n    />\n  );\n  buttonText = "Return to Ticket List";\n}\n'})}),"\n",(0,c.jsx)(t.hr,{}),"\n",(0,c.jsxs)(t.h2,{id:"step-3-add-the-delete-button-to-ticketdetail",children:["Step 3: Add the Delete Button to ",(0,c.jsx)(t.code,{children:"TicketDetail"})]}),"\n",(0,c.jsxs)(t.p,{children:["Now we just need a button that calls ",(0,c.jsx)(t.code,{children:"onClickingDelete"})," when clicked:"]}),"\n",(0,c.jsx)(t.pre,{children:(0,c.jsx)(t.code,{className:"language-jsx",metastring:'title="src/components/TicketDetail.js"',children:'import React from "react";\nimport PropTypes from "prop-types";\n\nfunction TicketDetail(props) {\n  const { ticket, onClickingDelete } = props;\n\n  return (\n    <React.Fragment>\n      <h1>Ticket Detail</h1>\n      <h3>{ticket.location} - {ticket.names}</h3>\n      <p><em>{ticket.issue}</em></p>\n      <button onClick={() => onClickingDelete(ticket.id)}>Close Ticket</button>\n      <hr />\n    </React.Fragment>\n  );\n}\n\nTicketDetail.propTypes = {\n  ticket: PropTypes.object,\n  onClickingDelete: PropTypes.func\n};\n\nexport default TicketDetail;\n'})}),"\n",(0,c.jsx)(t.p,{children:(0,c.jsx)(t.strong,{children:"What changed:"})}),"\n",(0,c.jsxs)(t.ul,{children:["\n",(0,c.jsxs)(t.li,{children:["We destructure ",(0,c.jsx)(t.code,{children:"onClickingDelete"})," from props alongside ",(0,c.jsx)(t.code,{children:"ticket"})]}),"\n",(0,c.jsxs)(t.li,{children:["The button's ",(0,c.jsx)(t.code,{children:"onClick"})," uses an arrow function to pass ",(0,c.jsx)(t.code,{children:"ticket.id"})," to the handler"]}),"\n",(0,c.jsxs)(t.li,{children:["We added a PropType for ",(0,c.jsx)(t.code,{children:"onClickingDelete"})]}),"\n"]}),"\n",(0,c.jsx)(t.hr,{}),"\n",(0,c.jsx)(t.h2,{id:"recap",children:"Recap"}),"\n",(0,c.jsxs)(t.p,{children:["That's it \u2014 just two files changed! This is the payoff from planning our component tree well. Because ",(0,c.jsx)(t.code,{children:"TicketDetail"})," is a direct child of ",(0,c.jsx)(t.code,{children:"TicketControl"}),", we passed one prop through one level."]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,c.jsxs)(t.table,{children:[(0,c.jsx)(t.thead,{children:(0,c.jsxs)(t.tr,{children:[(0,c.jsx)(t.th,{children:"Component"}),(0,c.jsx)(t.th,{children:"What Changed"})]})}),(0,c.jsxs)(t.tbody,{children:[(0,c.jsxs)(t.tr,{children:[(0,c.jsx)(t.td,{children:(0,c.jsx)(t.code,{children:"TicketControl"})}),(0,c.jsxs)(t.td,{children:["Added ",(0,c.jsx)(t.code,{children:"handleDeleteTicket"})," function; passed it to ",(0,c.jsx)(t.code,{children:"TicketDetail"})]})]}),(0,c.jsxs)(t.tr,{children:[(0,c.jsx)(t.td,{children:(0,c.jsx)(t.code,{children:"TicketDetail"})}),(0,c.jsxs)(t.td,{children:["Added delete button that calls ",(0,c.jsx)(t.code,{children:"onClickingDelete"})]})]})]})]}),"\n",(0,c.jsx)(t.hr,{}),"\n",(0,c.jsx)(t.h2,{id:"whats-next",children:"What's Next?"}),"\n",(0,c.jsx)(t.p,{children:"We're ready to add update functionality \u2014 the last piece of CRUD. But first, we'll extract our form into a reusable component. This will save us from duplicating code when we create the edit form."})]})}function h(e={}){const{wrapper:t}={...(0,l.R)(),...e.components};return t?(0,c.jsx)(t,{...e,children:(0,c.jsx)(a,{...e})}):a(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>s,x:()=>d});var i=n(96540);const c={},l=i.createContext(c);function s(e){const t=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:s(e.components),i.createElement(l.Provider,{value:t},e.children)}}}]);