"use strict";(self.webpackChunklhtp=self.webpackChunklhtp||[]).push([[19128],{28453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>a});var s=t(96540);const i={},o=s.createContext(i);function r(e){const n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(o.Provider,{value:n},e.children)}},92269:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"c-and-net/basic-web-applications/3-2-3-4-objects-within-objects-interface-part-1","title":"\ud83d\udcd3 3.2.3.4 Objects Within Objects Interface Part 1","description":"In the last two lessons, we updated our back end logic to support Category objects. All To Do List Items will now belong to a parent Category, allowing our users to better organize their tasks. As we\'ve discussed, this setup is referred to as objects within objects.","source":"@site/versioned_docs/version-v1_3/3_c-and-net/2_basic-web-applications/3-2-3-04-objects-within-objects-interface-part-1.md","sourceDirName":"3_c-and-net/2_basic-web-applications","slug":"/c-and-net/basic-web-applications/3-2-3-4-objects-within-objects-interface-part-1","permalink":"/v1.3/c-and-net/basic-web-applications/3-2-3-4-objects-within-objects-interface-part-1","draft":false,"unlisted":false,"tags":[],"version":"v1_3","frontMatter":{"title":"\ud83d\udcd3 3.2.3.4 Objects Within Objects Interface Part 1","day":"wednesday","id":"3-2-3-4-objects-within-objects-interface-part-1","hide_table_of_contents":true},"sidebar":"c-and-net","previous":{"title":"\ud83d\udcd3 3.2.3.3 Saving Objects Within Other Objects","permalink":"/v1.3/c-and-net/basic-web-applications/3-2-3-3-saving-objects-within-other-objects"},"next":{"title":"\ud83d\udcd3 3.2.3.5 Objects Within Objects Interface Part 2","permalink":"/v1.3/c-and-net/basic-web-applications/3-2-3-5-objects-within-objects-interface-part-2"}}');var i=t(74848),o=t(28453);const r={title:"\ud83d\udcd3 3.2.3.4 Objects Within Objects Interface Part 1",day:"wednesday",id:"3-2-3-4-objects-within-objects-interface-part-1",hide_table_of_contents:!0},a=void 0,c={},l=[{value:"Integrating <code>Category</code>s into the MVC Front End",id:"integrating-categorys-into-the-mvc-front-end",level:2},{value:"Index Route",id:"index-route",level:3},{value:"New Route",id:"new-route",level:3},{value:"Create Route",id:"create-route",level:3},{value:"Show Route",id:"show-route",level:3}];function d(e){const n={code:"code",div:"div",em:"em",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:["In the last two lessons, we updated our back end logic to support ",(0,i.jsx)(n.code,{children:"Category"})," objects. All To Do List ",(0,i.jsx)(n.code,{children:"Item"}),"s will now belong to a parent ",(0,i.jsx)(n.code,{children:"Category"}),", allowing our users to better organize their tasks. As we've discussed, this setup is referred to as ",(0,i.jsx)(n.strong,{children:"objects within objects"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["With our back end logic now in place, we can begin to integrate new ",(0,i.jsx)(n.code,{children:"Category"})," functionality into our MVC user interface. The next two lessons will walk through updating our MVC application to work with our new ",(0,i.jsx)(n.code,{children:"Category"}),"s."]}),"\n",(0,i.jsxs)(n.h2,{id:"integrating-categorys-into-the-mvc-front-end",children:["Integrating ",(0,i.jsx)(n.code,{children:"Category"}),"s into the MVC Front End"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.p,{children:["First, we need a page to display all ",(0,i.jsx)(n.code,{children:"Category"}),"s. We'll add a ",(0,i.jsx)(n.code,{children:"CategoriesController"})," to manage areas of our app that work with ",(0,i.jsx)(n.code,{children:"Category"})," objects. We'll start by creating a ",(0,i.jsx)(n.code,{children:"CategoriesController.cs"})," file in the ",(0,i.jsx)(n.code,{children:"ToDoList/Controllers"})," directory. Within it, we'll add standard controller setup:"]}),"\n",(0,i.jsx)(n.div,{className:"filename",children:"ToDoList/Controllers/CategoriesController.cs"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:"using System.Collections.Generic;\nusing System;\nusing Microsoft.AspNetCore.Mvc;\nusing ToDoList.Models;\n\nnamespace ToDoList.Controllers\n{\n  public class CategoriesController : Controller\n  {\n\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"index-route",children:"Index Route"}),"\n",(0,i.jsxs)(n.p,{children:["Next, let's define our ",(0,i.jsx)(n.code,{children:"Category"}),"-related routes. Just like ",(0,i.jsx)(n.code,{children:"Item"})," routes, these will adhere to RESTful conventions."]}),"\n",(0,i.jsxs)(n.p,{children:["First, we'll create an ",(0,i.jsx)(n.code,{children:"Index()"})," route to display all ",(0,i.jsx)(n.code,{children:"Category"}),"s:"]}),"\n",(0,i.jsx)(n.div,{className:"filename",children:"ToDoList/Controllers/CategoriesController.cs"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'using System.Collections.Generic;\nusing System;\nusing Microsoft.AspNetCore.Mvc;\nusing ToDoList.Models;\n\nnamespace ToDoList.Controllers\n{\n  public class CategoriesController : Controller\n  {\n\n    [HttpGet("/categories")]\n    public ActionResult Index()\n    {\n      List<Category> allCategories = Category.GetAll();\n      return View(allCategories);\n    }\n\n  }\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:["Next, we'll add the corresponding view in a new ",(0,i.jsx)(n.code,{children:"Views"})," subdirectory at ",(0,i.jsx)(n.code,{children:"ToDoList/Views/Categories"}),". We'll call the file ",(0,i.jsx)(n.code,{children:"Index.cshtml"}),":"]}),"\n",(0,i.jsx)(n.div,{className:"filename",children:"ToDoList/Views/Categories/Index.cshtml"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-html",children:'<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset="utf-8">\n    <title>My To-Do List!</title>\n    <link \n      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" \n      rel="stylesheet" \n      integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" \n      crossorigin="anonymous">\n  </head>\n  <body>\n    @using ToDoList.Models;\n\n    <h1>Categories</h1>\n\n    @if (@Model.Count == 0)\n    {\n      <h3>No categories have been added yet!</h3>\n    } \n\n    @foreach (Category category in Model)\n    {\n      <h3><a href=\'/categories/@category.Id\'>@category.Name</a></h3>\n    }\n\n    <p><a href=\'/\'>Back home</a></p>\n  </body>\n</html>\n'})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["If no ",(0,i.jsx)(n.code,{children:"Category"}),"s exist in the model data, we display a message."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["If ",(0,i.jsx)(n.code,{children:"Category"}),"s do exist, we loop through them and display their names."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"<h3>"})," displaying their name is also a link to the path ",(0,i.jsx)(n.code,{children:"'/categories/@category.Id'"}),". This will navigate to a detail page for specific ",(0,i.jsx)(n.code,{children:"Category"}),"s. We'll create this soon."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"new-route",children:"New Route"}),"\n",(0,i.jsxs)(n.p,{children:["Let's also ensure users can create new ",(0,i.jsx)(n.code,{children:"Category"}),"s with a form. We'll add a ",(0,i.jsx)(n.code,{children:"New()"})," route:"]}),"\n",(0,i.jsx)(n.div,{className:"filename",children:"ToDoList/Controllers/CategoriesController.cs"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'...\n\n  [HttpGet("/categories/new")]\n  public ActionResult New()\n  {\n    return View();\n  }\n\n...\n'})}),"\n",(0,i.jsx)(n.p,{children:"Here's the corresponding view. Notice this all follows RESTful convention:"}),"\n",(0,i.jsx)(n.div,{className:"filename",children:"ToDoList/Views/Categories/New.cshtml"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-html",children:'<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset="utf-8">\n    <title>My To-Do List!</title>\n    <link \n      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" \n      rel="stylesheet" \n      integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" \n      crossorigin="anonymous">\n  </head>\n  <body>\n    <h1>Add a category</h1>\n    <p>Add a category here:</p>\n\n    <form action="/categories" method="post">\n      <label for="categoryName">Category name</label>\n      <input id="categoryName" name="categoryName" type="text">\n      <button type="submit">Add</button>\n    </form>\n\n    <p><a href="/">Back home</a></p>\n    <p><a href="/categories">Back to categories.</a></p>\n  </body>\n</html>\n'})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The form's ",(0,i.jsx)(n.code,{children:"method"})," is ",(0,i.jsx)(n.code,{children:'"post"'}),". That means submitting this form will create and send an HTTP POST request."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"action"})," attribute is ",(0,i.jsx)(n.code,{children:'"/categories"'}),". That means the path included with our POST request will be ",(0,i.jsx)(n.code,{children:'"/categories"'}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"create-route",children:"Create Route"}),"\n",(0,i.jsxs)(n.p,{children:["To process submissions from this form, we'll need a route that handles POST requests with ",(0,i.jsx)(n.code,{children:'"/categories"'})," paths. We'll call it ",(0,i.jsx)(n.code,{children:"Create()"})," in order to follow RESTful conventions."]}),"\n",(0,i.jsx)(n.div,{className:"filename",children:"ToDoList/Controllers/CategoriesController.cs"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'...\n\n  [HttpPost("/categories")]\n  public ActionResult Create(string categoryName)\n  {\n    Category newCategory = new Category(categoryName);\n    return RedirectToAction("Index");\n  }\n\n...\n'})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["We specify this route handles POST requests with a ",(0,i.jsx)(n.code,{children:'"/categories"'})," path by using the ",(0,i.jsx)(n.code,{children:'[HttpPost("/categories")]'})," route decorator. This both matches our form and RESTful routing conventions."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The route accepts a ",(0,i.jsx)(n.code,{children:"categoryName"})," argument. This refers to the contents of the ",(0,i.jsx)(n.code,{children:"categoryName"})," form field in the ",(0,i.jsx)(n.code,{children:"New.cshtml"})," view."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Within the route, we create a new ",(0,i.jsx)(n.code,{children:"Category"})," with this name and then call the ",(0,i.jsx)(n.code,{children:"RedirectToAction"}),' method with "Index" passed in as the argument to send the user back to the Index route.']}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"show-route",children:"Show Route"}),"\n",(0,i.jsxs)(n.p,{children:["In the ",(0,i.jsx)(n.code,{children:"Category"})," index view, we added links to each ",(0,i.jsx)(n.code,{children:"Category"})," name:"]}),"\n",(0,i.jsx)(n.div,{className:"filename",children:"ToDoList/Views/Categories/Index.cshtml"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-html",children:"...\n\n@foreach (Category category in Model)\n{\n  <h3><a href='/categories/@category.Id'>@category.Name</a></h3>\n}\n\n...\n"})}),"\n",(0,i.jsxs)(n.p,{children:["This is so a user can click an individual ",(0,i.jsx)(n.code,{children:"Category"})," from the list of all categories and navigate to a detail page displaying its information, including a list of the ",(0,i.jsx)(n.code,{children:"Item"}),"s associated with it. Let's create this detail page."]}),"\n",(0,i.jsxs)(n.p,{children:["Following RESTful routing convention, the route will be named ",(0,i.jsx)(n.code,{children:"Show()"}),":"]}),"\n",(0,i.jsx)(n.div,{className:"filename",children:"ToDoList/Controllers/CategoriesController.cs"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-csharp",children:'...\n\n  [HttpGet("/categories/{id}")]\n  public ActionResult Show(int id)\n  {\n    Dictionary<string, object> model = new Dictionary<string, object>();\n    Category selectedCategory = Category.Find(id);\n    List<Item> categoryItems = selectedCategory.Items;\n    model.Add("category", selectedCategory);\n    model.Add("items", categoryItems);\n    return View(model);\n  }\n\n...\n'})}),"\n",(0,i.jsxs)(n.p,{children:["We're doing something new here. Because this page will display both a ",(0,i.jsx)(n.code,{children:"Category"})," ",(0,i.jsx)(n.em,{children:"and"})," all ",(0,i.jsx)(n.code,{children:"Item"})," objects saved within that ",(0,i.jsx)(n.code,{children:"Category"}),", we must pass two types of objects to the view. However, ",(0,i.jsx)(n.code,{children:"View()"})," can only accept one model argument. To work around this, we do the following:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Create a new ",(0,i.jsx)(n.code,{children:"Dictionary"})," called ",(0,i.jsx)(n.code,{children:"model"})," because a ",(0,i.jsx)(n.code,{children:"Dictionary"})," can hold multiple key-value pairs."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Add both the ",(0,i.jsx)(n.code,{children:"Category"})," and its associated ",(0,i.jsx)(n.code,{children:"Item"}),"s to this ",(0,i.jsx)(n.code,{children:"Dictionary"}),". These will be stored with the keys ",(0,i.jsx)(n.code,{children:'"category"'})," and ",(0,i.jsx)(n.code,{children:'"items"'}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"Dictionary"}),", which is named ",(0,i.jsx)(n.code,{children:"model"}),", will be passed into ",(0,i.jsx)(n.code,{children:"View()"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Let's make this route's view next:"}),"\n",(0,i.jsx)(n.div,{className:"filename",children:"ToDoList/Views/Categories/Show.cshtml"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-html",children:'<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset="utf-8">\n    <title>My To-Do List!</title>\n    <link \n      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" \n      rel="stylesheet" \n      integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" \n      crossorigin="anonymous">\n  </head>\n  <body>\n    @using ToDoList.Models;\n\n    <h3>Here are all the items in this category:</h3>\n\n    <ol>\n    @foreach (Item item in @Model["items"])\n    {\n      <li><a href=\'/categories/@Model["category"].Id/items/@item.Id\'>@item.Description</a></li>\n    }\n    </ol>\n\n    <p><a href=\'/categories/@Model["category"].Id/items/new\'>Add a new item</a></p>\n    <p><a href=\'/categories\'>Return to category list</a></p>\n    <p><a href=\'/\'>Return to Main Page</a></p>\n  </body>\n</html>\n'})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["We loop through all ",(0,i.jsx)(n.code,{children:"Items"})," in the model. We passed the view a ",(0,i.jsx)(n.code,{children:"Dictionary"})," containing key-value pairs, so we access ",(0,i.jsx)(n.code,{children:"Item"}),"s with ",(0,i.jsx)(n.code,{children:'@Model["items"]'})," square bracket notation."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["For each ",(0,i.jsx)(n.code,{children:"Item"}),", we display its description in a ",(0,i.jsx)(n.code,{children:"<li>"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["We've also made each ",(0,i.jsx)(n.code,{children:"<li>"})," a link to the path ",(0,i.jsx)(n.code,{children:"'/categories/@Model[\"category\"].Id/items/@item.Id'"}),". This will be the item's detail view. We already have an ",(0,i.jsx)(n.code,{children:"Item"})," detail page associated with the ",(0,i.jsx)(n.code,{children:"Show()"})," route on the ",(0,i.jsx)(n.code,{children:"ItemsController"}),", but it's not at this super long path! Don't worry, this is intentional. We'll discuss what's up in the next lesson."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["At this point, we can build and run our application and see our new pages in the browser. We can even create new ",(0,i.jsx)(n.code,{children:"Category"})," objects with our form. However, some functionality like the ",(0,i.jsx)(n.em,{children:"Add a new item"})," link on the Category detail page does not yet work yet. We'll complete this in the next lesson and also discuss how objects within other objects affect RESTful convention."]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);