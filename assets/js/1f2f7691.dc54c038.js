"use strict";(self.webpackChunklhtp=self.webpackChunklhtp||[]).push([[75691],{28453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>c});var r=n(96540);const o={},s=r.createContext(o);function i(e){const t=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),r.createElement(s.Provider,{value:t},e.children)}},67921:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>i,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"introduction-to-programming/arrays-looping/1-3-2-4-text-analyzer-with-tdd-numberofoccurrencesintext","title":"\ud83d\udcd3 1.3.2.4 Text Analyzer with TDD: numberOfOccurrencesInText()","description":"In this lesson, we\'ll complete the tests and functionality for a new function in the Text Analyzer project, called numberOfOccurrencesInText(). The goal of this lesson is to demonstrate the TDD process, including all of the decisions we need to make along the way.","source":"@site/versioned_docs/version-v1_3/1_introduction-to-programming/3_arrays-looping/1-3-2-04-text-analyzer-with-tdd-numberofoccurrencesintext.md","sourceDirName":"1_introduction-to-programming/3_arrays-looping","slug":"/introduction-to-programming/arrays-looping/1-3-2-4-text-analyzer-with-tdd-numberofoccurrencesintext","permalink":"/v1.3/introduction-to-programming/arrays-looping/1-3-2-4-text-analyzer-with-tdd-numberofoccurrencesintext","draft":false,"unlisted":false,"tags":[],"version":"v1_3","frontMatter":{"title":"\ud83d\udcd3 1.3.2.4 Text Analyzer with TDD: numberOfOccurrencesInText()","day":"tuesday","id":"1-3-2-4-text-analyzer-with-tdd-numberofoccurrencesintext","hide_table_of_contents":true},"sidebar":"introduction-to-programming","previous":{"title":"\ud83d\udcd3 1.3.2.3 Text Analyzer with TDD: wordCounter()","permalink":"/v1.3/introduction-to-programming/arrays-looping/1-3-2-3-text-analyzer-with-tdd-wordcounter"},"next":{"title":"\u270f\ufe0f 1.3.2.5 Practice: Extending Text Analyzer Business Logic with TDD","permalink":"/v1.3/introduction-to-programming/arrays-looping/1-3-2-5-practice-extending-text-analyzer-business-logic-with-tdd"}}');var o=n(74848),s=n(28453);const i={title:"\ud83d\udcd3 1.3.2.4 Text Analyzer with TDD: numberOfOccurrencesInText()",day:"tuesday",id:"1-3-2-4-text-analyzer-with-tdd-numberofoccurrencesintext",hide_table_of_contents:!0},c=void 0,a={},d=[{value:"Writing and Testing a Second Function for Text Analyzer",id:"writing-and-testing-a-second-function-for-text-analyzer",level:2},{value:"Our First Test",id:"our-first-test",level:3},{value:"Our Second Test",id:"our-second-test",level:3},{value:"Our Third Test",id:"our-third-test",level:3},{value:"Our Fourth Test",id:"our-fourth-test",level:3},{value:"Our Fifth Test",id:"our-fifth-test",level:3},{value:"Important Considerations",id:"important-considerations",level:4},{value:"Our Sixth Test",id:"our-sixth-test",level:3}];function l(e){const t={a:"a",code:"code",div:"div",em:"em",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(t.p,{children:["In this lesson, we'll complete the tests and functionality for a new function in the Text Analyzer project, called ",(0,o.jsx)(t.code,{children:"numberOfOccurrencesInText()"}),". The goal of this lesson is to demonstrate the TDD process, including all of the decisions we need to make along the way."]}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.strong,{children:"You should code along with this and following lessons that build out the Text Analyzer project. In the upcoming practice lesson, you'll be tasked with adding more functionality to this project."})}),"\n",(0,o.jsx)(t.h2,{id:"writing-and-testing-a-second-function-for-text-analyzer",children:"Writing and Testing a Second Function for Text Analyzer"}),"\n",(0,o.jsx)(t.hr,{}),"\n",(0,o.jsxs)(t.p,{children:["Let's get a little more practice by writing a second function. This one will also use a loop as well. The purpose of this function will be to determine how many times a specific word occurs in a passage. We'll call this function... um... ",(0,o.jsx)(t.code,{children:"wordCounter()"}),"? No. We've got to be clear with our code and that's already taken. We'll call it ",(0,o.jsx)(t.code,{children:"numberOfOccurrencesInText()"}),". The name is a bit lengthy but this function states exactly what it does which will help us communicate with other developers."]}),"\n",(0,o.jsx)(t.p,{children:"Let's say we have the following passage of text:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{children:'"red blue red red green red"\n'})}),"\n",(0,o.jsxs)(t.p,{children:["If we ask our function how many times the color ",(0,o.jsx)(t.em,{children:"red"})," occurs, it should correctly return 4."]}),"\n",(0,o.jsxs)(t.p,{children:["However, that is ",(0,o.jsx)(t.em,{children:"not"})," our first test. We can start even smaller than that."]}),"\n",(0,o.jsx)(t.h3,{id:"our-first-test",children:"Our First Test"}),"\n",(0,o.jsx)(t.p,{children:"How small can we go? We can start with how many times a word occurs in an empty string, which should be 0 no matter what. That's probably as small as we can go."}),"\n",(0,o.jsxs)(t.p,{children:["We'll want to start a new group of tests for this function, which means a new ",(0,o.jsx)(t.strong,{children:"Describe"})," block. We can add this test below the other tests in our README."]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{children:'Describe: numberOfOccurrencesInText()\n\nTest: "It should return 0 occurrences of a word for an empty string."\nCode:\nconst text = "";\nconst word = "red";\nnumberOfOccurrencesInText(word, text);\nExpected Output: 0\n'})}),"\n",(0,o.jsx)(t.p,{children:"Once again, this basic test can really help us get started. Let's take a look."}),"\n",(0,o.jsx)(t.div,{className:"filename",children:"js/scripts.js"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-js",children:"// Business Logic\n\n// wordCounter() function omitted for brevity.\n\nfunction numberOfOccurrencesInText(word, text) {\n  return 0;\n}\n"})}),"\n",(0,o.jsxs)(t.p,{children:["We add the ",(0,o.jsx)(t.code,{children:"numberOfOccurrencesInText()"})," function beneath our ",(0,o.jsx)(t.code,{children:"wordCounter()"})," function. See how nicely our business logic is coming together because we aren't thinking about the UI? When we start working on our user interface logic, it will be much easier to keep things separate."]}),"\n",(0,o.jsxs)(t.p,{children:["While our function is basic so far, it allows us to establish a couple of key things. First, this function needs two parameters, one for the ",(0,o.jsx)(t.code,{children:"word"})," we want to find and one for the ",(0,o.jsx)(t.code,{children:"text"})," itself. Secondly, just like with our ",(0,o.jsx)(t.code,{children:"wordCounter()"})," function, it will return a number."]}),"\n",(0,o.jsx)(t.h3,{id:"our-second-test",children:"Our Second Test"}),"\n",(0,o.jsx)(t.p,{children:"Next, let's see what happens when we are searching text that is just one word."}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{children:'Test: "It should return 1 occurrence of a word when the word and the text are the same."\nCode:\nconst text = "red";\nconst word = "red";\nnumberOfOccurrencesInText(word, text);\nExpected Output: 1\n'})}),"\n",(0,o.jsx)(t.p,{children:"Let's update our function. Once again, we are aiming to keep it as simple as possible. It's okay if it looks nothing like the final product yet. We are just taking baby steps."}),"\n",(0,o.jsx)(t.div,{className:"filename",children:"js/scripts.js"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-js",children:"function numberOfOccurrencesInText(word, text) {\n  if (word === text) {\n    return 1;\n  }\n  return 0;\n}\n"})}),"\n",(0,o.jsx)(t.p,{children:"We add a simple conditional. If the word equals the text, we should return 1. Otherwise, we should return 0. Very simple. Both tests will pass now."}),"\n",(0,o.jsx)(t.h3,{id:"our-third-test",children:"Our Third Test"}),"\n",(0,o.jsx)(t.p,{children:"Are we ready to move onto multiple words? Well, we should verify that it doesn't return a match if the word and the text aren't the same first."}),"\n",(0,o.jsx)(t.p,{children:"Here's the test:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{children:'Test: "It should return 0 occurrences of a word when the word and the text are different."\nCode:\nconst text = "red";\nconst word = "blue";\nnumberOfOccurrencesInText(word, text);\nExpected Output: 0\n'})}),"\n",(0,o.jsx)(t.p,{children:"This test will pass already so you might wonder what the point is. Well, first of all, it's always good to verify, not assume. You don't ever want to tell the team lead or your boss that you assumed something would work when everything goes terribly awry. Also, with automated testing, we might find later in the process that something breaks this specific test while all of our other tests pass correctly. Then we could more easily go back and fix the issue."}),"\n",(0,o.jsx)(t.h3,{id:"our-fourth-test",children:"Our Fourth Test"}),"\n",(0,o.jsx)(t.p,{children:"Let's move onto multiple words."}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{children:'Test: "It should return the number of occurrences of a word."\nCode:\nconst text = "red blue red red red green";\nconst word = "red";\nnumberOfOccurrencesInText(word, text);\nExpected Output: 4\n'})}),"\n",(0,o.jsx)(t.p,{children:"You might be wondering why we are moving up to so many words and occurrences already. Why not just move up to two words first? Well, they should work exactly the same \u2014 and we are less likely to get a false positive. On the other hand, our function already returns 1 sometimes \u2014 if we just have two words and one of them is red, well, our code may return the right answer even if it's broken \u2014 just as a broken clock is right twice a day."}),"\n",(0,o.jsx)(t.p,{children:"Let's update our code to get our new test passing:"}),"\n",(0,o.jsx)(t.div,{className:"filename",children:"js/scripts.js"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-js",children:'function numberOfOccurrencesInText(word, text) {\n  const textArray = text.split(" ");\n  let wordCount = 0;\n  textArray.forEach(function(element) {\n    if (word === element) {\n      wordCount++\n    }\n  });\n  return wordCount;\n}\n'})}),"\n",(0,o.jsx)(t.p,{children:"This doesn't look very different from our previous code \u2014 but we actually modified the conditional from our previous test to use within our loop. Instead of having to write all the code at once, we took the time to get a sense of what our parameters are and return argument should look like, and we also got a good start on our conditional."}),"\n",(0,o.jsxs)(t.p,{children:["Once again, we split the text passage into an array and create a ",(0,o.jsx)(t.code,{children:"wordCount"})," that starts at 0. We loop through this array, and if the ",(0,o.jsx)(t.code,{children:"word"})," we've passed into our function is equal to the ",(0,o.jsx)(t.code,{children:"element"})," in ",(0,o.jsx)(t.code,{children:"textArray"}),", we've found an instance of the word and we can increment ",(0,o.jsx)(t.code,{children:"wordCount"})," by one. Finally, we return ",(0,o.jsx)(t.code,{children:"wordCount"}),"."]}),"\n",(0,o.jsx)(t.p,{children:"It works! Yay!"}),"\n",(0,o.jsx)(t.h3,{id:"our-fifth-test",children:"Our Fifth Test"}),"\n",(0,o.jsx)(t.p,{children:"But what about..."}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{children:'"Red RED red"\n'})}),"\n",(0,o.jsxs)(t.p,{children:["We need to account for upper and lowercase. ",(0,o.jsx)(t.code,{children:'"Red"'})," and ",(0,o.jsx)(t.code,{children:'"red"'})," are still the same word \u2014 but our function will not recognize this. Once again, let's start with a test."]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{children:'Test: "It should return a word match regardless of case."\nCode:\nconst text = "red RED Red green Green GREEN";\nconst word = "Red";\nnumberOfOccurrencesInText(word, text);\nExpected Output: 3\n'})}),"\n",(0,o.jsxs)(t.p,{children:["Note that our test will be a bit more thorough because we are also changing the case of the ",(0,o.jsx)(t.code,{children:"word"})," variable. It should be evident here that we need to do something that makes both the ",(0,o.jsx)(t.code,{children:"word"})," and all instances of that word in the ",(0,o.jsx)(t.code,{children:"text"})," variable consistent, such as lower-casing them. If the words that are being compared are different cases, our function won't see them as a match."]}),"\n",(0,o.jsx)(t.p,{children:"Try getting the test passing on your own first. The passing code is below:"}),"\n",(0,o.jsx)(t.div,{className:"filename",children:"js/scripts.js"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-js",children:'function numberOfOccurrencesInText(word, text) {\n  const textArray = text.split(" ");\n  let wordCount = 0;\n  textArray.forEach(function(element) {\n    if (word.toLowerCase() === element.toLowerCase()) {\n      wordCount++;\n    }\n  });\n  return wordCount;\n}\n'})}),"\n",(0,o.jsxs)(t.p,{children:["As we can see, we just need to call ",(0,o.jsx)(t.code,{children:"String.prototype.toLowerCase()"})," on both ",(0,o.jsx)(t.code,{children:"word"})," and ",(0,o.jsx)(t.code,{children:"element"})," to get the test passing."]}),"\n",(0,o.jsx)(t.h4,{id:"important-considerations",children:"Important Considerations"}),"\n",(0,o.jsxs)(t.p,{children:["This is one of those tests where we really do need to think carefully about what we are testing and how we can make sure that our function works as expected. It would be easy to write a test that just lowercases the text and doesn't take account of the fact that a user might type in ",(0,o.jsx)(t.code,{children:'"RED"'})," instead of ",(0,o.jsx)(t.code,{children:'"red"'})," for the ",(0,o.jsx)(t.code,{children:"word"})," parameter. Fortunately, our test accounts for both the case of the ",(0,o.jsx)(t.code,{children:"word"})," parameter ",(0,o.jsx)(t.em,{children:"and"})," the case of each ",(0,o.jsx)(t.code,{children:"element"})," in the ",(0,o.jsx)(t.code,{children:"text"})," array."]}),"\n",(0,o.jsxs)(t.p,{children:["It may also be tempting to just lowercase a user's input in the user interface section of the code \u2014 similarly to how we've used ",(0,o.jsx)(t.code,{children:"parseInt()"})," to make sure that a number input on a form is converted from a string to a number. However, this wouldn't be a good separation of logic. Remember, it's our function's job to correctly analyze any strings it receives. If we did that in the UI instead, it would be harder to test, harder to track, and more prone to bugs. Our function would also be less resilient and reusable."]}),"\n",(0,o.jsx)(t.h3,{id:"our-sixth-test",children:"Our Sixth Test"}),"\n",(0,o.jsx)(t.p,{children:"Let's move onto our next test. Can you think of anything else that still needs to be tested? Are there any other situations where our function won't correctly compute a matching string when it should?"}),"\n",(0,o.jsx)(t.p,{children:"What about this string?"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-js",children:'"Red! Red. I like red, don\'t you?"\n'})}),"\n",(0,o.jsx)(t.p,{children:"If we split this string by spaces, we'll get the following array:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-js",children:'["Red!", "Red.", "I", "like", "red,", "don\'t", "you?"]\n'})}),"\n",(0,o.jsxs)(t.p,{children:["Well, ",(0,o.jsx)(t.code,{children:'"red"'})," should match ",(0,o.jsx)(t.code,{children:'"red."'})," Currently, though, it won't. So let's write a test."]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{children:'Test: "It should return a word match regardless of punctuation."\nCode:\nconst text = "Red! Red. I like red, green, and yellow.";\nconst word = "Red";\nnumberOfOccurrencesInText(word, text);\nExpected Output: 3\n'})}),"\n",(0,o.jsx)(t.p,{children:"Now let's get our test passing. There are several ways in which we can solve this problem."}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:["\n",(0,o.jsxs)(t.p,{children:["One way is to use the method ",(0,o.jsx)(t.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/includes",children:(0,o.jsx)(t.code,{children:"String.prototype.includes()"})}),", which checks to see if a string ",(0,o.jsx)(t.em,{children:"includes"})," another string or character. We're going to use this approach. ",(0,o.jsx)(t.code,{children:"String.prototype.includes()"})," is a very handy string method and one which you'll likely use multiple times throughout this section."]}),"\n"]}),"\n",(0,o.jsxs)(t.li,{children:["\n",(0,o.jsxs)(t.p,{children:["The other approach is to use a regular expression. We are going to cover this approach in a ",(0,o.jsx)(t.em,{children:"further exploration"})," lesson on regular expressions. ",(0,o.jsx)(t.em,{children:"Further exploration"})," means it's ",(0,o.jsx)(t.em,{children:"not"})," required to learn about regular expressions and you won't need to use them in this section or on the independent project, though you can experiment with them if you like."]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(t.p,{children:["Let's solve the problem using ",(0,o.jsx)(t.code,{children:"String.prototype.includes()"}),". First, let's see what this method actually does."]}),"\n",(0,o.jsxs)(t.p,{children:[(0,o.jsx)(t.code,{children:"String.prototype.includes()"})," returns a boolean. If a string contains another string, the method will return ",(0,o.jsx)(t.code,{children:"true"}),". For instance, the string ",(0,o.jsx)(t.code,{children:'"epicodus"'})," contains the string ",(0,o.jsx)(t.code,{children:'"epic"'}),". If the string doesn't include the substring, the method will return ",(0,o.jsx)(t.code,{children:"false"}),". We can do something like this:"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-js",children:'function includesRarestLetter(word) {\n  if (word.toLowerCase().includes("q")) {\n    return true;\n  }\n  return false;\n}\n'})}),"\n",(0,o.jsxs)(t.p,{children:["Q is the rarest letter in the English alphabet and this function checks whether a word contains the letter, returning ",(0,o.jsx)(t.code,{children:"true"})," if it does and false otherwise."]}),"\n",(0,o.jsxs)(t.p,{children:["We can also use ",(0,o.jsx)(t.code,{children:"String.prototype.includes()"})," with longer strings as well \u2014 such as checking whether a substring includes ",(0,o.jsx)(t.code,{children:'"red"'}),". Let's try this in the DevTools console:"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-js",children:'> "red! red. red?".includes("red");\ntrue\n'})}),"\n",(0,o.jsx)(t.p,{children:"Let's update our function to get our newest test passing:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-js",children:'function numberOfOccurrencesInText(word, text) {\n  const textArray = text.split(" ");\n  let wordCount = 0;\n  textArray.forEach(function(element) {\n    if (element.toLowerCase().includes(word.toLowerCase())) {\n      wordCount++;\n    }\n  });\n  return wordCount;\n}\n'})}),"\n",(0,o.jsx)(t.p,{children:"We've updated our conditional to check if the following is true:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-js",children:"element.toLowerCase().includes(word.toLowerCase())\n"})}),"\n",(0,o.jsxs)(t.p,{children:["So if an ",(0,o.jsx)(t.code,{children:"element"})," in the ",(0,o.jsx)(t.code,{children:"text"})," array (such as ",(0,o.jsx)(t.code,{children:'"red."'}),") includes the word we are searching for (",(0,o.jsx)(t.code,{children:'"red"'}),"), ",(0,o.jsx)(t.code,{children:"wordCount"})," will be incremented \u2014 and our test will pass!"]}),"\n",(0,o.jsxs)(t.p,{children:[(0,o.jsx)(t.code,{children:"String.prototype.includes()"})," is a ",(0,o.jsx)(t.em,{children:"very"})," helpful method. There is a problem, though:"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-js",children:'> "redo".includes("red");\ntrue\n'})}),"\n",(0,o.jsxs)(t.p,{children:["Yes, the word ",(0,o.jsx)(t.code,{children:'"redo"'})," ",(0,o.jsx)(t.em,{children:"contains"})," the word ",(0,o.jsx)(t.code,{children:'"red"'})," \u2014 but it's ",(0,o.jsx)(t.em,{children:"not"})," an occurrence of the word. We aren't going to worry about this issue, though you are welcome to refactor the application on your own to fix this with an additional test."]}),"\n",(0,o.jsxs)(t.p,{children:["So our ",(0,o.jsx)(t.code,{children:"numberOfOccurrencesInText()"})," function isn't perfect but that's okay. Once again, the main purpose here is to learn about Test-Driven Development: how it works, how to apply it, and how to write pseudocode tests to gradually build up robust functions and solve problems."]}),"\n",(0,o.jsxs)(t.p,{children:["For the next several sections, you will use this Test-Driven Development approach with pseudocode tests. As we've mentioned before, in the ",(0,o.jsx)(t.a,{href:"../../intermediate-javascript/test-driven-development-and-environments-with-javascript/2-2-0-1-test-driven-development-and-environments-with-javascript-objectives",children:"Test Driven Development and Environments with JavaScript"})," course section, we will start using Jest for our tests."]}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsxs)(t.strong,{children:["To view all of the tests that we wrote for both ",(0,o.jsx)(t.code,{children:"wordCounter()"})," and ",(0,o.jsx)(t.code,{children:"numberOfOccurrencesInText()"}),", check out the cheat sheet."]})})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}}}]);