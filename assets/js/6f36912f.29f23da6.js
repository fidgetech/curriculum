"use strict";(self.webpackChunklhtp=self.webpackChunklhtp||[]).push([[82982],{198:(e,n,l)=>{l.r(n),l.d(n,{assets:()=>i,contentTitle:()=>o,default:()=>u,frontMatter:()=>r,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"c-and-net/test-driven-development-with-c/3-1-2-6-nullable-types","title":"\ud83d\udcd3 3.1.2.6 Nullable Types","description":"The last fundamental C# concept that we\'ll learn about in this course section is nullable types, or using null values. We\'re already familiar with the concept of null from JavaScript \u2014 null means nothing, no value at all. But in a strongly-typed language like C#, how do we set a type to null? In this lesson, we\'re going to learn exactly how to do that.","source":"@site/docs/3_c-and-net/1_test-driven-development-with-c/3-1-2-06-nullable-types.md","sourceDirName":"3_c-and-net/1_test-driven-development-with-c","slug":"/c-and-net/test-driven-development-with-c/3-1-2-6-nullable-types","permalink":"/v1.2/c-and-net/test-driven-development-with-c/3-1-2-6-nullable-types","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"\ud83d\udcd3 3.1.2.6 Nullable Types","day":"tuesday","id":"3-1-2-6-nullable-types","hide_table_of_contents":true},"sidebar":"c-and-net","previous":{"title":"\ud83d\udcd3 3.1.2.5 More About Data Types: Value Types, Reference Types, Generic Types, and More","permalink":"/v1.2/c-and-net/test-driven-development-with-c/3-1-2-5-more-about-data-types-value-types-reference-types-generic-types-and-more"},"next":{"title":"\ud83d\udcd3 3.1.2.7 Workplace Accommodations","permalink":"/v1.2/c-and-net/test-driven-development-with-c/3-1-2-7-workplace-accommodations"}}');var a=l(74848),s=l(28453);const r={title:"\ud83d\udcd3 3.1.2.6 Nullable Types",day:"tuesday",id:"3-1-2-6-nullable-types",hide_table_of_contents:!0},o=void 0,i={},c=[{value:"Nullable Types",id:"nullable-types",level:2},{value:"Nullable Value Types",id:"nullable-value-types",level:3},{value:"Nullable Reference Types",id:"nullable-reference-types",level:3},{value:"Other Ways to Create a Nullable Aware Context",id:"other-ways-to-create-a-nullable-aware-context",level:3}];function d(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n.p,{children:["The last fundamental C# concept that we'll learn about in this course section is ",(0,a.jsx)(n.strong,{children:"nullable types"}),", or using ",(0,a.jsx)(n.code,{children:"null"})," values. We're already familiar with the concept of ",(0,a.jsx)(n.code,{children:"null"})," from JavaScript \u2014 ",(0,a.jsx)(n.code,{children:"null"})," means nothing, no value at all. But in a strongly-typed language like C#, how do we set a type to null? In this lesson, we're going to learn exactly how to do that."]}),"\n",(0,a.jsx)(n.h2,{id:"nullable-types",children:"Nullable Types"}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsxs)(n.p,{children:["When we make want a C# type to possibly be ",(0,a.jsx)(n.code,{children:"null"}),", we're working with ",(0,a.jsx)(n.strong,{children:"nullable types"})," in C#. Exactly what we need to do to use ",(0,a.jsx)(n.code,{children:"null"})," depends on whether we're working with a value type or a reference type. Let's first look at nullable values types to learn the basics of using ",(0,a.jsx)(n.code,{children:"null"}),"."]}),"\n",(0,a.jsx)(n.h3,{id:"nullable-value-types",children:"Nullable Value Types"}),"\n",(0,a.jsxs)(n.p,{children:["To create a nullable value type, we need to use ",(0,a.jsx)(n.code,{children:"?"}),". In formal terms, a nullable value type is expressed as ",(0,a.jsx)(n.code,{children:"T?"}),", where ",(0,a.jsx)(n.code,{children:"T"})," is the value type and ",(0,a.jsx)(n.code,{children:"?"})," is the syntax used to turn the value type into a nullable type. Let's see an example suing the ",(0,a.jsx)(n.code,{children:"dotnet-script"})," REPL:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"> int? test = 1;\n> test\n1\n> test = null;\n> test\n>\n"})}),"\n",(0,a.jsxs)(n.p,{children:["Pretty simple, right? Just add a question mark ",(0,a.jsx)(n.code,{children:"?"})," to transform a value type into a nullable value type. Now our ",(0,a.jsx)(n.code,{children:"test"})," variable can hold an integer or ",(0,a.jsx)(n.code,{children:"null"}),"."]}),"\n",(0,a.jsxs)(n.p,{children:["Under the hood, when we use ",(0,a.jsx)(n.code,{children:"int?"}),", or the ",(0,a.jsx)(n.code,{children:"T?"})," syntax, our value type is being transformed into ",(0,a.jsxs)(n.a,{href:"https://learn.microsoft.com/en-us/dotnet/api/system.nullable-1?view=net-6.0",children:["the ",(0,a.jsx)(n.code,{children:"Nullable<T>"})," type"]})," that lives in the ",(0,a.jsx)(n.code,{children:"System"})," namespace. The ",(0,a.jsx)(n.code,{children:"Nullable<T>"})," type has the helpful ",(0,a.jsx)(n.code,{children:"HasValue"})," property that can give us information about whether or not the variable is currently ",(0,a.jsx)(n.code,{children:"null"}),". Here's an example:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"> int? test2 = 33;\n> test2\n33\n> test2.HasValue\ntrue\n> test2 = null;\n> test2.HasValue\nfalse\n"})}),"\n",(0,a.jsx)(n.h3,{id:"nullable-reference-types",children:"Nullable Reference Types"}),"\n",(0,a.jsxs)(n.p,{children:["Next, let's look at nullable reference types. With ",(0,a.jsx)(n.strong,{children:"nullable reference types"}),", the syntax and concept is the same, but with a few differences."]}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"The first notable difference is that we need to create a nullable aware context"}),". For example, we'll get an error when we do the following in the ",(0,a.jsx)(n.code,{children:"dotnet-script"})," REPL:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-csharp",children:"> string? test = \"test\";\n(1,7): error CS8632: The annotation for nullable reference types should only be used in code within a '#nullable' annotations context.\n"})}),"\n",(0,a.jsxs)(n.p,{children:["We can resolve this error by creating a nullable context with ",(0,a.jsx)(n.code,{children:"#nullable enable"}),":"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-csharp",children:'> #nullable enable\n> string? test = "test";\n> test\n"test"\n> test = null;\n> test\n>\n'})}),"\n",(0,a.jsxs)(n.p,{children:["We create a ",(0,a.jsx)(n.strong,{children:"nullable aware context"})," so that the compiler can track the ",(0,a.jsx)(n.code,{children:"null"})," state of all reference types within the nullable aware context, and issue warnings and errors when necessary. The compiler will issue a warning if a reference type does not match it's expected state:"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:'Non-null reference types are expected to have a "not-null" state.'}),"\n",(0,a.jsx)(n.li,{children:'Nullable reference types are expected to have a "maybe-null" state.'}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"If those states are ever not true, then the compiler will let us know. Take the following class for example:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-csharp",children:"public class Test\n{\n  #nullable enable\n  string NonNullString { get; set; }\n  string? NullableString { get; set; }\n  public Test()\n  {\n\n  }\n  #nullable disable\n}\n"})}),"\n",(0,a.jsxs)(n.p,{children:["We've created a nullable aware context using the ",(0,a.jsx)(n.code,{children:"#nullable enable"})," and ",(0,a.jsx)(n.code,{children:"#nullable disable"})," annotations. However, if we run ",(0,a.jsx)(n.code,{children:"dotnet build"})," to compile our code, the compiler will issue a warning:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-csharp",children:"warning CS8618: Non-nullable property 'NonNullString' must contain a non-null value when exiting constructor. Consider declaring the property as nullable. \n"})}),"\n",(0,a.jsxs)(n.p,{children:["The compiler is letting us know that the ",(0,a.jsx)(n.code,{children:"NonNullString"}),' property should be in a "not-null" state, but is not! The solution is to either make ',(0,a.jsx)(n.code,{children:"NonNullString"})," nullable, or to give it a value, either in the constructor or a default value. Here's one way we can fix the warning:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-csharp",children:'public class Test\n{\n  #nullable enable\n  string NonNullString { get; set; } = "default value";\n  string? NullableString { get; set; }\n  public Test()\n  {\n\n  }\n  #nullable disable\n}\n'})}),"\n",(0,a.jsxs)(n.p,{children:["To read more about other warnings that the compiler can generate in a nullable aware context, visit the MS Docs on ",(0,a.jsx)(n.a,{href:"https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/builtin-types/nullable-reference-types#nullable-references-and-static-analysis",children:"Nullable References and Static Analysis"}),"."]}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"The second notable difference"})," between value types and reference types, is that reference types are not turned into ",(0,a.jsx)(n.code,{children:"Nullable<T>"})," objects, so they don't have access to the ",(0,a.jsx)(n.code,{children:"HasValue"})," property. Here's an example:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-csharp",children:"> #nullable enable\n> string? myVar = \"this is a test\";\n> myVar\n\"this is a test\"\n> myVar.HasValue\n(1,7): error CS1061: 'string' does not contain a definition for 'HasValue' and no accessible extension method 'HasValue' accepting a first argument of type 'string' could be found (are you missing a using directive or an assembly reference?)\n"})}),"\n",(0,a.jsxs)(n.p,{children:["The error lets us know that we're still dealing with the ",(0,a.jsx)(n.code,{children:"string"})," type, and not a new ",(0,a.jsx)(n.code,{children:"Nullable<T>"}),". In summary, only nullable value types are turned into ",(0,a.jsx)(n.code,{children:"Nullable<T>"})," objects."]}),"\n",(0,a.jsx)(n.h3,{id:"other-ways-to-create-a-nullable-aware-context",children:"Other Ways to Create a Nullable Aware Context"}),"\n",(0,a.jsxs)(n.p,{children:["We can configure a nullable aware context in a few different ways. As we just saw, we can use the ",(0,a.jsx)(n.code,{children:"#nullable enable"})," and ",(0,a.jsx)(n.code,{children:"#nullable disable"})," annotations to sandwich any amount of code to create a nullable aware context:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-csharp",children:'public class Test\n{\n  #nullable enable\n  string NonNullString { get; set; } = "default value";\n  string? NullableString { get; set; }\n  public Test()\n  {\n\n  }\n  #nullable disable\n}\n'})}),"\n",(0,a.jsxs)(n.p,{children:["We can also simply list the ",(0,a.jsx)(n.code,{children:"#nullable enable"})," annotation on its own at the top of a file to make the entire file have a nullable aware context. That would look something like this:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-csharp",children:'#nullable enable\n\npublic class Test\n{\n  string NonNullString { get; set; } = "default value";\n  string? NullableString { get; set; }\n  public Test()\n  {\n\n  }\n}\n'})}),"\n",(0,a.jsxs)(n.p,{children:["We can also enable a nullable aware context through our project file (",(0,a.jsx)(n.code,{children:".csproj"}),") by adding the ",(0,a.jsx)(n.code,{children:"<Nullable>enable</Nullable>"})," configuration like so:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:'<Project Sdk="Microsoft.NET.Sdk">\n\n  <PropertyGroup>\n    <OutputType>Exe</OutputType>\n    <TargetFramework>net6.0</TargetFramework>\n    <Nullable>enable</Nullable>\n  </PropertyGroup>\n\n</Project>\n'})}),"\n",(0,a.jsx)(n.p,{children:"When you are just starting out with nullable types, we recommend creating a nullable aware context as needed, instead of setting a project-wide configuration. In the end, it's totally up to you and your project as to what makes the most sense."}),"\n",(0,a.jsx)(n.p,{children:"Finally, you will not be required to use nullable types on the upcoming independent project. However, we encourage you to experiment with nullable types in the projects you create."})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},28453:(e,n,l)=>{l.d(n,{R:()=>r,x:()=>o});var t=l(96540);const a={},s=t.createContext(a);function r(e){const n=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);