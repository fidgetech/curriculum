"use strict";(self.webpackChunklhtp=self.webpackChunklhtp||[]).push([[14818],{6552:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>d,frontMatter:()=>o,metadata:()=>a,toc:()=>h});const a=JSON.parse('{"id":"react/react-with-nosql/4-4-0-8-the-cap-theorem-and-base","title":"\ud83d\udcd3 4.4.0.8 The CAP Theorem and BASE","description":"In this lesson, we will discuss the CAP theorem, a key concept developed by the computer scientist Eric Brewer that governs why and how NoSQL databases are scalable and good for big data. We\'ll also touch on Eric Brewer\'s acronym BASE, which describes how NoSQL databases achieve the requirements of the CAP theorem when distributed across multiple locations.","source":"@site/versioned_docs/version-v1_3/4_react/4_react-with-nosql/4-4-0-08-the-cap-theorem-and-base.md","sourceDirName":"4_react/4_react-with-nosql","slug":"/react/react-with-nosql/4-4-0-8-the-cap-theorem-and-base","permalink":"/v1.3/react/react-with-nosql/4-4-0-8-the-cap-theorem-and-base","draft":false,"unlisted":false,"tags":[],"version":"v1_3","frontMatter":{"title":"\ud83d\udcd3 4.4.0.8 The CAP Theorem and BASE","day":"weekend","id":"4-4-0-8-the-cap-theorem-and-base","hide_table_of_contents":true},"sidebar":"react","previous":{"title":"\ud83d\udcd3 4.4.0.7 Introduction to NoSQL","permalink":"/v1.3/react/react-with-nosql/4-4-0-7-introduction-to-nosql"},"next":{"title":"\ud83d\udcd3 4.4.0.9 Setting up a Firebase Project, Firestore Database, and Web App","permalink":"/v1.3/react/react-with-nosql/4-4-0-9-setting-up-a-firebase-project-firestore-database-and-web-app"}}');var n=s(74848),i=s(28453);const o={title:"\ud83d\udcd3 4.4.0.8 The CAP Theorem and BASE",day:"weekend",id:"4-4-0-8-the-cap-theorem-and-base",hide_table_of_contents:!0},r=void 0,l={},h=[{value:"The CAP Theorem",id:"the-cap-theorem",level:2},{value:"BASE",id:"base",level:2}];function c(e){const t={em:"em",h2:"h2",hr:"hr",li:"li",p:"p",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.p,{children:"In this lesson, we will discuss the CAP theorem, a key concept developed by the computer scientist Eric Brewer that governs why and how NoSQL databases are scalable and good for big data. We'll also touch on Eric Brewer's acronym BASE, which describes how NoSQL databases achieve the requirements of the CAP theorem when distributed across multiple locations."}),"\n",(0,n.jsx)(t.p,{children:"These are in contrast to ACID properties, which generally describe how SQL databases behave."}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Note:"})," You are not required to memorize this information or perfectly understand it. The goal is to give you a better idea of some of the tradeoffs in a distributed NoSQL system."]}),"\n",(0,n.jsx)(t.h2,{id:"the-cap-theorem",children:"The CAP Theorem"}),"\n",(0,n.jsx)(t.hr,{}),"\n",(0,n.jsxs)(t.p,{children:["While ACID properties include four principles that a SQL database ",(0,n.jsx)(t.strong,{children:"must"})," follow, the CAP theorem is different. The CAP theorem argues that a database system can use ",(0,n.jsx)(t.strong,{children:"at most"})," two of its three principles. Let's look at those three principles and then explore why there needs to be a compromise."]}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Consistency"}),": All users have access to the same data in the system at the same time."]}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Availability"}),": The data is always available for users."]}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Partition Tolerance"}),": The system works across a distributed network (such as multiple servers)."]}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(t.p,{children:['One of the reasons that NoSQL is often better for big data is the fact that it is designed to be distributed across multiple locations. (On the other hand, SQL databases were traditionally designed around a single server.) For instance, a big company might have database servers all over the world. If one of these databases goes down, there are always others to pick up the slack. This distribution is a huge advantage of NoSQL databases. This is the "P" in "CAP": ',(0,n.jsx)(t.strong,{children:"partition tolerance"}),"."]}),"\n",(0,n.jsxs)(t.p,{children:["Because of this, SQL databases are often said to ",(0,n.jsx)(t.strong,{children:"scale vertically"})," (by upgrading a single server) while NoSQL databases ",(0,n.jsx)(t.strong,{children:"scale horizontally"})," across many servers."]}),"\n",(0,n.jsx)(t.p,{children:"However, if we have partition tolerance, we can't have both consistency and availability. We'll demonstrate why with an example."}),"\n",(0,n.jsxs)(t.p,{children:["Let's say you work for a company that has database servers in Beijing, New York, and London. A user in Shanghai makes an update to their account. That information is now going to be sent to a database. But which one? Even if it's sent to every single server, it will probably reach the server in Beijing first. If the database in Beijing updates immediately, it will no longer be ",(0,n.jsx)(t.strong,{children:"consistent"})," with the databases in New York and London, which don't have that update yet. On the other hand, if the server in Beijing waits for the other servers so they can all be updated simultaneously, the data will be consistent but we will be compromising ",(0,n.jsx)(t.strong,{children:"availability"})," \u2014 we are delaying the update to the Beijing server. It may not seem like a big deal with one update near Beijing, but a large company like Facebook or Google could be handling thousands of updates per second all over the world."]}),"\n",(0,n.jsx)(t.p,{children:"Since having a strong distributed system (partition tolerance) is a huge advantage of many NoSQL options, either consistency or availability are compromised. This doesn't even account for occasional network failures, which are inevitable. However, large companies will introduce redundancy \u2014 databases and servers that have overlapping functionality \u2014 so that if a server or database goes down then others can pick up the slack. Those network failures will result in further compromises to consistency or availability."}),"\n",(0,n.jsxs)(t.p,{children:["Most distributed systems want data to be available all of the time, which leads to a tradeoff in consistency. The goal, then, is what is called ",(0,n.jsx)(t.strong,{children:"eventual consistency"}),". This means that when the update to the database server happens in Beijing, the databases won't be consistent across all servers yet \u2014 but they will be consistent eventually."]}),"\n",(0,n.jsxs)(t.p,{children:["This is in contrast to ",(0,n.jsx)(t.strong,{children:"strong consistency"}),", which means that everything has to be consistent everywhere at the same time (compromising either availability or partition tolerance). Strong consistency is a tenet of SQL databases. Distributed SQL databases do exist \u2014 tools like Google Spanner and CockroachDB \u2014 but they require more complexity and specialized tooling."]}),"\n",(0,n.jsxs)(t.p,{children:["For most web applications, eventual consistency is actually the right tradeoff. If a user updates their profile, it's acceptable for that change to propagate across servers in milliseconds \u2014 users won't notice. Strong consistency at global scale, by contrast, would require waiting for all servers to agree before confirming any write, adding real latency that users ",(0,n.jsx)(t.em,{children:"would"})," notice. For our purposes, Firestore within a single region is strongly consistent, so these tradeoffs are largely academic for the apps we're building."]}),"\n",(0,n.jsx)(t.h2,{id:"base",children:"BASE"}),"\n",(0,n.jsx)(t.hr,{}),"\n",(0,n.jsxs)(t.p,{children:["There's another acronym called ",(0,n.jsx)(t.strong,{children:"BASE"}),', also developed by Eric Brewer, which describes how NoSQL databases achieve consistency. BASE states that a system should be "basically available, have a soft state, and eventually consistent."']}),"\n",(0,n.jsxs)(t.p,{children:["When a system is ",(0,n.jsx)(t.strong,{children:"basically available"}),", data is available most of the time. For instance, the data in the Beijing server won't be immediately available to the server in London. Also, database servers can and will fail, leading to downtime in availability."]}),"\n",(0,n.jsxs)(t.p,{children:["When a database system has a ",(0,n.jsx)(t.strong,{children:"soft state"}),", it may update even when it hasn't been written to. When the server in London finally gets data from Beijing, it will update \u2014 but not because data was written directly to it. In order for data to become available and consistent, it may be written to the database at different times."]}),"\n",(0,n.jsxs)(t.p,{children:["Finally, we have ",(0,n.jsx)(t.strong,{children:"eventual consistency"}),", which we just discussed. Eventually, the data in London will match the data in Beijing."]}),"\n",(0,n.jsx)(t.p,{children:"The CAP theorem is essential to understanding how distributed systems work. Meanwhile, the BASE acronym shows how the requirements of CAP can be loosened enough that every condition is more or less met \u2014 just not stringently."}),"\n",(0,n.jsx)(t.p,{children:"By the way, Eric Brewer is vice-president of infrastructure at Google. His ideas aren't just concepts \u2014 they are widely applied at the world's largest software companies, and they underpin how Firebase and Firestore are designed."})]})}function d(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},28453:(e,t,s)=>{s.d(t,{R:()=>o,x:()=>r});var a=s(96540);const n={},i=a.createContext(n);function o(e){const t=a.useContext(i);return a.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:o(e.components),a.createElement(i.Provider,{value:t},e.children)}}}]);