"use strict";(self.webpackChunklhtp=self.webpackChunklhtp||[]).push([[63950],{28453:(e,n,o)=>{o.d(n,{R:()=>i,x:()=>l});var t=o(96540);const s={},r=t.createContext(s);function i(e){const n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),t.createElement(r.Provider,{value:n},e.children)}},56192:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"c-and-net/basic-web-applications/5-2-1-3-to-do-list-mvc-setup","title":"\ud83d\udcd3 5.2.1.3 To Do List MVC Setup","description":"Now that we\'ve had basic practice with the Model-View-Controller aspect of MVC web apps, let\'s create a more complex ASP.NET Core MVC application. We\'ll then continue building upon this codebase throughout the remainder of the C# and .NET course.","source":"@site/versioned_docs/version-WIP/c-and-net/2_basic-web-applications/3-2-1-03-to-do-list-mvc-setup.md","sourceDirName":"c-and-net/2_basic-web-applications","slug":"/c-and-net/basic-web-applications/5-2-1-3-to-do-list-mvc-setup","permalink":"/WIP/c-and-net/basic-web-applications/5-2-1-3-to-do-list-mvc-setup","draft":false,"unlisted":false,"tags":[],"version":"WIP","frontMatter":{"title":"\ud83d\udcd3 5.2.1.3 To Do List MVC Setup","day":"monday","id":"5-2-1-3-to-do-list-mvc-setup","hide_table_of_contents":true},"sidebar":"c-and-net","previous":{"title":"\u270f\ufe0f 3.2.1.2 ASP.NET Core MVC Practice","permalink":"/WIP/c-and-net/basic-web-applications/5-2-1-2-asp-net-core-mvc-practice"},"next":{"title":"\ud83d\udcd3 5.2.1.4 To Do List with MVC Forms","permalink":"/WIP/c-and-net/basic-web-applications/5-2-1-4-to-do-list-with-mvc-forms"}}');var s=o(74848),r=o(28453);const i={title:"\ud83d\udcd3 5.2.1.3 To Do List MVC Setup",day:"monday",id:"5-2-1-3-to-do-list-mvc-setup",hide_table_of_contents:!0},l=void 0,c={},a=[{value:"Starter Project for To Do List",id:"starter-project-for-to-do-list",level:2},{value:"Implementing an MVC Web Interface",id:"implementing-an-mvc-web-interface",level:2},{value:"Add ASP.NET Core MVC",id:"add-aspnet-core-mvc",level:3},{value:"<code>Program.cs</code>",id:"programcs",level:3},{value:"<code>Properties/launchSettings.json</code>",id:"propertieslaunchsettingsjson",level:3},{value:"<code>.gitignore</code>",id:"gitignore",level:3},{value:"Controller",id:"controller",level:3},{value:"Views",id:"views",level:3},{value:"Launching the Project",id:"launching-the-project",level:2}];function d(e){const n={a:"a",code:"code",div:"div",h2:"h2",h3:"h3",hr:"hr",i:"i",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"Now that we've had basic practice with the Model-View-Controller aspect of MVC web apps, let's create a more complex ASP.NET Core MVC application. We'll then continue building upon this codebase throughout the remainder of the C# and .NET course."}),"\n",(0,s.jsx)(n.h2,{id:"starter-project-for-to-do-list",children:"Starter Project for To Do List"}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.p,{children:["We'll call our new project the \"To Do List\". It will be an application that tracks our to-dos. We'll start simple and just have one ",(0,s.jsx)(n.code,{children:"Item"})," model that is meant to represent a single task on our To Do List. Later on we'll add a ",(0,s.jsx)(n.code,{children:"Category"}),' model that will represent different to-do lists within our application, like one for "School" or one for "Home Chores".']}),"\n",(0,s.jsx)(n.p,{children:'Since our goal is to practice with the ASP.NET Core MVC framework, we\'ve put together a basic starter project for the "To Do List" app that contains the following:'}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["An ",(0,s.jsx)(n.code,{children:"Item"})," class within the ",(0,s.jsx)(n.code,{children:"ToDoList.Models"})," namespace."]}),"\n",(0,s.jsxs)(n.li,{children:["Full testing for the ",(0,s.jsx)(n.code,{children:"Item"})," class. The tests will all be similar to those we wrote for the ",(0,s.jsx)(n.code,{children:"Triangle"})," class in the Shape Tracker app."]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["To begin this walkthrough, clone down the following code from the default branch ",(0,s.jsx)(n.code,{children:"1_mvc_setup"}),". Then, take a moment to explore the files and folders and run the tests to make sure they are all passing."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:(0,s.jsxs)(n.a,{href:"https://github.com/epicodus-lessons/section-2-to-do-list-csharp-net6/tree/1_mvc_setup",children:[(0,s.jsx)(n.i,{className:"glyphicon glyphicon-folder-open"}),'  Starter GitHub Repo for the "To Do List" Application']})})}),"\n",(0,s.jsx)(n.h2,{id:"implementing-an-mvc-web-interface",children:"Implementing an MVC Web Interface"}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.p,{children:"We'll update this project to work with ASP.NET Core MVC. First we'll add the necessary components to our project structure."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["In the ",(0,s.jsx)(n.code,{children:"ToDoList"})," production project, create the following file:\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"Program.cs"})}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Still within the ",(0,s.jsx)(n.code,{children:"ToDoList"})," directory, create the following subdirectories:\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"Controllers"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"Views"})}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["In ",(0,s.jsx)(n.code,{children:"ToDoList/Controllers"})," create a ",(0,s.jsx)(n.code,{children:"HomeController.cs"})," file."]}),"\n",(0,s.jsxs)(n.li,{children:["In ",(0,s.jsx)(n.code,{children:"ToDoList/Views"})," create a ",(0,s.jsx)(n.code,{children:"Home"})," subdirectory.\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["In this home subdirectory, create a single ",(0,s.jsx)(n.code,{children:"Index.cshtml"})," file."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Finally, in the uppermost parent directory, ",(0,s.jsx)(n.code,{children:"ToDoList.Solution"}),", create a ",(0,s.jsx)(n.code,{children:".gitignore"})," file."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"The resulting structure should look like this:"}),"\n",(0,s.jsx)(n.pre,{children:"ToDoList.Solution\n\u251c\u2500\u2500 .gitignore\n\u251c\u2500\u2500 ToDoList\n\u2502   \u251c\u2500\u2500 Controllers\n\u2502   \u2502   \u2514\u2500\u2500 HomeController.cs\n\u2502   \u251c\u2500\u2500 Models\n\u2502   \u2502   \u2514\u2500\u2500 Item.cs\n\u2502   \u251c\u2500\u2500 Program.cs\n\u2502   \u251c\u2500\u2500 Properties\n\u2502   \u2502   \u2514\u2500\u2500 launchSettings.json\n\u2502   \u251c\u2500\u2500 ToDoList.csproj\n\u2502   \u2514\u2500\u2500 Views\n\u2502       \u2514\u2500\u2500 Home\n\u2502           \u2514\u2500\u2500 Index.cshtml\n\u2514\u2500\u2500 ToDoList.Tests\n    \u251c\u2500\u2500 ModelTests\n    \u2502   \u2514\u2500\u2500 ItemTests.cs\n    \u2514\u2500\u2500 ToDoList.Tests.csproj\n"}),"\n",(0,s.jsx)(n.h3,{id:"add-aspnet-core-mvc",children:"Add ASP.NET Core MVC"}),"\n",(0,s.jsxs)(n.p,{children:["We'll also add the MVC framework package by updating the production project's ",(0,s.jsx)(n.code,{children:".csproj"})," file to include ",(0,s.jsx)(n.code,{children:".Web"})," in the Project SDK:"]}),"\n",(0,s.jsx)(n.div,{className:"filename",children:"ToDoList/ToDoList.csproj"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:'<Project Sdk="Microsoft.NET.Sdk.Web">\n  <PropertyGroup>\n    <TargetFramework>net6.0</TargetFramework>\n  </PropertyGroup>\n</Project>\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Navigate to the ",(0,s.jsx)(n.code,{children:"ToDoList"})," production project in the terminal and run ",(0,s.jsx)(n.code,{children:"$ dotnet restore"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"programcs",children:(0,s.jsx)(n.code,{children:"Program.cs"})}),"\n",(0,s.jsxs)(n.p,{children:["We'll populate ",(0,s.jsx)(n.code,{children:"ToDoList/Program.cs"})," with the same general configuration code we've used so far:"]}),"\n",(0,s.jsx)(n.div,{className:"filename",children:"ToDoList/Program.cs"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:'using Microsoft.AspNetCore.Builder;\nusing Microsoft.Extensions.DependencyInjection;\n\nnamespace ToDoList\n{\n  class Program\n  {\n    static void Main(string[] args)\n    {\n      WebApplicationBuilder builder = WebApplication.CreateBuilder(args);\n\n      builder.Services.AddControllersWithViews();\n\n      WebApplication app = builder.Build();\n\n      app.UseHttpsRedirection();\n\n      app.UseRouting();\n\n      app.MapControllerRoute(\n        name: "default",\n        pattern: "{controller=Home}/{action=Index}/{id?}"\n      );\n\n      app.Run();\n    }\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"propertieslaunchsettingsjson",children:(0,s.jsx)(n.code,{children:"Properties/launchSettings.json"})}),"\n",(0,s.jsxs)(n.p,{children:["We'll populate ",(0,s.jsx)(n.code,{children:"ToDoList/Properties/launchSettings.json"})," with the same general configuration we'll use in all of our projects."]}),"\n",(0,s.jsx)(n.div,{className:"filename",children:"ProjectName.Solution/ProjectName/Properties/launchSettings.json"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "profiles": {\n    "development": {\n      "commandName": "Project",\n      "dotnetRunMessages": true,\n      "launchBrowser": true,\n      "applicationUrl": "https://localhost:5001;http://localhost:5000",\n      "environmentVariables": {\n        "ASPNETCORE_ENVIRONMENT": "Development"\n      }\n    },\n    "production": {\n      "commandName": "Project",\n      "dotnetRunMessages": true,\n      "launchBrowser": true,\n      "applicationUrl": "https://localhost:5001;http://localhost:5000",\n      "environmentVariables": {\n        "ASPNETCORE_ENVIRONMENT": "Production"\n      }\n    }\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"gitignore",children:(0,s.jsx)(n.code,{children:".gitignore"})}),"\n",(0,s.jsxs)(n.p,{children:["Double check that there's a ",(0,s.jsx)(n.code,{children:".gitignore"})," file with the following folders listed within:"]}),"\n",(0,s.jsx)(n.div,{className:"filename",children:".gitignore"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"obj\nbin\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Let's also ensure any ",(0,s.jsx)(n.code,{children:"obj"})," or ",(0,s.jsx)(n.code,{children:"bin"})," directories already committed are no longer tracked by Git with the following commands in the top level of our project:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"$ git rm --cached obj -r\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"$ git rm --cached bin -r\n"})}),"\n",(0,s.jsxs)(n.p,{children:["If you receive a ",(0,s.jsx)(n.code,{children:"did not match any files"})," response, it means you're already ignoring these directories so there was nothing to remove from Git. This is normal."]}),"\n",(0,s.jsx)(n.h3,{id:"controller",children:"Controller"}),"\n",(0,s.jsxs)(n.p,{children:["In the ",(0,s.jsx)(n.code,{children:"ToDoList/Controllers/HomeController.cs"})," we'll add the standard import statements, namespace, and class:"]}),"\n",(0,s.jsx)(n.div,{className:"filename",children:"ToDoList/Controllers/HomeController.cs"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"using Microsoft.AspNetCore.Mvc;\nusing ToDoList.Models;\n\nnamespace ToDoList.Controllers\n{\n  public class HomeController : Controller\n  {\n\n\n  }\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["In addition to the ",(0,s.jsx)(n.code,{children:"Microsoft.AspNetCore.Mvc"})," namespace, we're also ",(0,s.jsx)(n.code,{children:"using"})," our ",(0,s.jsx)(n.code,{children:"ToDoList.Models"})," namespace. This grants access to our ",(0,s.jsx)(n.code,{children:"Item"})," class in the controller."]}),"\n",(0,s.jsx)(n.p,{children:"Now we can add our first route:"}),"\n",(0,s.jsx)(n.div,{className:"filename",children:"ToDoList/Controllers/HomeController.cs"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:'using Microsoft.AspNetCore.Mvc;\nusing ToDoList.Models;\n\nnamespace ToDoList.Controllers\n{\n  public class HomeController : Controller\n  {\n\n    [Route("/")]\n    public ActionResult Index()\n    {\n      Item starterItem = new Item("Add first item to To Do List");\n      return View(starterItem);\n    }\n\n  }\n}\n'})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["We create an ",(0,s.jsx)(n.code,{children:"Index()"})," route method with a route decorator specifying a URL path of ",(0,s.jsx)(n.code,{children:"/"}),", which means this is the root route for ",(0,s.jsx)(n.code,{children:"localhost:5000"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["When the route is invoked, we create a placeholder ",(0,s.jsx)(n.code,{children:"Item"})," to populate our To Do List. We can access ",(0,s.jsx)(n.code,{children:"Item"}),"s because we are ",(0,s.jsx)(n.code,{children:"using ToDoList.Models;"})," at the top of this file."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["We pass ",(0,s.jsx)(n.code,{children:"starterItem"})," into the ",(0,s.jsx)(n.code,{children:"View()"})," method. Let's create a corresponding view now."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"views",children:"Views"}),"\n",(0,s.jsxs)(n.p,{children:["Add the following to ",(0,s.jsx)(n.code,{children:"Index.cshtml"}),":"]}),"\n",(0,s.jsx)(n.div,{className:"filename",children:"ToDoList/Views/Home/Index.cshtml"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",children:'<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset="utf-8">\n    <title>My To-Do List!</title>\n    <link \n      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" \n      rel="stylesheet" \n      integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" \n      crossorigin="anonymous">\n  </head>\n  <body>\n    <h1>To Do List</h1>\n    <ul>\n      <li>@Model.Description</li>\n    </ul>\n  </body>\n</html>\n'})}),"\n",(0,s.jsxs)(n.p,{children:["We use ",(0,s.jsx)(n.code,{children:"@Model.Description"})," to display the property of the ",(0,s.jsx)(n.code,{children:"starterItem"})," object we passed into ",(0,s.jsx)(n.code,{children:"View()"})," in the controller."]}),"\n",(0,s.jsx)(n.h2,{id:"launching-the-project",children:"Launching the Project"}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.p,{children:["Let's check out the project in the browser. Enter the following command in the ",(0,s.jsx)(n.code,{children:"ToDoList"})," directory (the production directory) to build and run the project:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"$ dotnet watch run\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Remember: because we're using a ",(0,s.jsx)(n.code,{children:"launchSettings.json"})," with a development profile configured as the default profile, the above command will start our project in development mode, which enables Developer Exception Pages."]}),"\n",(0,s.jsxs)(n.p,{children:["If we visit ",(0,s.jsx)(n.code,{children:"https://localhost:5001"}),", our To Do List homepage loads correctly. If you get an error, you may not have your developer security certificate set up for HTTPS."]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);