"use strict";(self.webpackChunklhtp=self.webpackChunklhtp||[]).push([[24931],{28453:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>a});var i=n(96540);const o={},s=i.createContext(o);function r(e){const t=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),i.createElement(s.Provider,{value:t},e.children)}},84858:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"c-and-net/database-basics/3-3-2-3-delete-with-ef-core","title":"\ud83d\udcd3 3.3.2.3 Delete with EF Core","description":"Now let\'s make sure our application can also destroy an Item. We\'ll add a Delete link on the item\'s detail page. Clicking this link will take the user to a page that confirms they\'d like to delete this particular item.","source":"@site/versioned_docs/version-v1_3/3_c-and-net/3_database-basics/3-3-2-03-delete-with-ef-core.md","sourceDirName":"3_c-and-net/3_database-basics","slug":"/c-and-net/database-basics/3-3-2-3-delete-with-ef-core","permalink":"/v1.3/c-and-net/database-basics/3-3-2-3-delete-with-ef-core","draft":false,"unlisted":false,"tags":[],"version":"v1_3","frontMatter":{"title":"\ud83d\udcd3 3.3.2.3 Delete with EF Core","day":"tuesday","id":"3-3-2-3-delete-with-ef-core","hide_table_of_contents":true},"sidebar":"c-and-net","previous":{"title":"\ud83d\udcd3 3.3.2.2 Update with EF Core","permalink":"/v1.3/c-and-net/database-basics/3-3-2-2-update-with-ef-core"},"next":{"title":"\ud83d\udcd3 3.3.2.4 Establishing a One-To-Many Relationship with Navigation Properties","permalink":"/v1.3/c-and-net/database-basics/3-3-2-4-establishing-a-one-to-many-relationship-with-navigation-properties"}}');var o=n(74848),s=n(28453);const r={title:"\ud83d\udcd3 3.3.2.3 Delete with EF Core",day:"tuesday",id:"3-3-2-3-delete-with-ef-core",hide_table_of_contents:!0},a=void 0,l={},d=[{value:"Updating the Controller",id:"updating-the-controller",level:2},{value:"Updating the View",id:"updating-the-view",level:2},{value:"Repository Reference",id:"repository-reference",level:3}];function c(e){const t={a:"a",code:"code",div:"div",em:"em",h2:"h2",h3:"h3",hr:"hr",i:"i",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(t.p,{children:["Now let's make sure our application can also destroy an ",(0,o.jsx)(t.code,{children:"Item"}),". We'll add a ",(0,o.jsx)(t.em,{children:"Delete"})," link on the item's detail page. Clicking this link will take the user to a page that confirms they'd like to delete this particular item."]}),"\n",(0,o.jsx)(t.h2,{id:"updating-the-controller",children:"Updating the Controller"}),"\n",(0,o.jsx)(t.hr,{}),"\n",(0,o.jsx)(t.p,{children:"Once again, let's start with the necessary controller actions:"}),"\n",(0,o.jsx)(t.div,{className:"filename",children:"ItemsController.cs"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-csharp",children:'...\npublic ActionResult Delete(int id)\n{\n    Item thisItem = _db.Items.FirstOrDefault(item => item.ItemId == id);\n    return View(thisItem);\n}\n\n[HttpPost, ActionName("Delete")]\npublic ActionResult DeleteConfirmed(int id)\n{\n    Item thisItem = _db.Items.FirstOrDefault(item => item.ItemId == id);\n    _db.Items.Remove(thisItem);\n    _db.SaveChanges();\n    return RedirectToAction("Index");\n}\n...\n'})}),"\n",(0,o.jsxs)(t.p,{children:["Here, our ",(0,o.jsx)(t.code,{children:"POST"})," action is named ",(0,o.jsx)(t.code,{children:"DeleteConfirmed"})," instead of ",(0,o.jsx)(t.code,{children:"Delete"}),". This is because both the ",(0,o.jsx)(t.code,{children:"GET"})," and ",(0,o.jsx)(t.code,{children:"POST"})," action methods for ",(0,o.jsx)(t.code,{children:"Delete"})," take ",(0,o.jsx)(t.code,{children:"id"})," as a parameter. However, C# will not allow us to have two methods with the same signature. Remember that the ",(0,o.jsx)(t.strong,{children:"signature"})," is the method name and parameters. The ",(0,o.jsx)(t.code,{children:"POST"})," attribute is not considered part of the method signature so the C# compiler will think the actions above are the same method if we name them both ",(0,o.jsx)(t.code,{children:"Delete"}),"."]}),"\n",(0,o.jsxs)(t.p,{children:["To avoid errors, we call one of our methods ",(0,o.jsx)(t.code,{children:"Delete"})," and the other ",(0,o.jsx)(t.code,{children:"DeleteConfirmed"}),". Note that our annotation includes ",(0,o.jsx)(t.code,{children:'[ActionName("Delete")]'}),". This is so we can still utilize the proper ",(0,o.jsx)(t.code,{children:"Delete"})," action even though we've named our method ",(0,o.jsx)(t.code,{children:"DeleteConfirmed"}),"."]}),"\n",(0,o.jsxs)(t.p,{children:["Other than that, the code is very similar to what we've seen so far. The ",(0,o.jsx)(t.code,{children:"Delete()"})," action looks just like our ",(0,o.jsx)(t.code,{children:"GET"})," actions ",(0,o.jsx)(t.code,{children:"Create()"})," and ",(0,o.jsx)(t.code,{children:"Edit()"}),": we simply need to get the correct item and return it to the view."]}),"\n",(0,o.jsxs)(t.p,{children:["The ",(0,o.jsx)(t.code,{children:"DeleteConfirmed()"})," method is also very similar to the code we've used in other actions. The only difference is that we utilize ",(0,o.jsxs)(t.a,{href:"https://learn.microsoft.com/en-us/dotnet/api/microsoft.entityframeworkcore.dbset-1.remove?view=efcore-6.0",children:["the built-in ",(0,o.jsx)(t.code,{children:"Remove()"})," method"]})," on ",(0,o.jsx)(t.code,{children:"_db.Items"}),"."]}),"\n",(0,o.jsx)(t.h2,{id:"updating-the-view",children:"Updating the View"}),"\n",(0,o.jsx)(t.hr,{}),"\n",(0,o.jsx)(t.p,{children:"Now let's create the corresponding view:"}),"\n",(0,o.jsx)(t.div,{className:"filename",children:"Views/Items/Delete.cshtml"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-html",children:'@{\n  Layout = "_Layout";\n}\n\n@model ToDoList.Models.Item\n\n<h2>Are you sure you want to delete this?</h2>\n\n@Html.DisplayNameFor(model => model.Description): @Html.DisplayFor(model => model.Description)\n@using (Html.BeginForm())\n{\n    <input type="submit" value="Delete" />\n}\n@Html.ActionLink("Back to List", "Index")\n'})}),"\n",(0,o.jsxs)(t.p,{children:["By default, the HTML helper method ",(0,o.jsx)(t.code,{children:"BeginForm()"})," creates a ",(0,o.jsx)(t.code,{children:"POST"})," request to an action method whose name matches the ",(0,o.jsx)(t.code,{children:".cshtml"})," file it's contained in. That means the ",(0,o.jsx)(t.code,{children:"BeginForm()"})," helper seen in our ",(0,o.jsx)(t.code,{children:"Delete.cshtml"})," file above will automatically create a ",(0,o.jsx)(t.code,{children:"POST"})," request to our ",(0,o.jsx)(t.code,{children:"Delete"})," action. This is why our annotation includes ",(0,o.jsx)(t.code,{children:'ActionName("Delete")'}),"."]}),"\n",(0,o.jsxs)(t.p,{children:["Let's also add a delete link to ",(0,o.jsx)(t.code,{children:"details.cshtml"}),":"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-html",children:'<p>@Html.ActionLink("Delete Item", "Delete", new { id = Model.ItemId })</p>\n'})}),"\n",(0,o.jsx)(t.h3,{id:"repository-reference",children:"Repository Reference"}),"\n",(0,o.jsx)(t.p,{children:"Follow the link below to view how a sample version of the To Do List app should look like at this point. Note that this is a link to a specific branch in the repository."}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.strong,{children:(0,o.jsxs)(t.a,{href:"https://github.com/epicodus-lessons/section-3-to-do-list-with-ef-core-csharp-net6/tree/3_update_and_delete",children:[(0,o.jsx)(t.i,{className:"glyphicon glyphicon-folder-open"})," Example GitHub Repo for To Do List with EF Core: 3_update_and_delete"]})})})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}}}]);