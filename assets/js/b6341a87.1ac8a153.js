"use strict";(self.webpackChunklhtp=self.webpackChunklhtp||[]).push([[89419],{28453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>c});var i=n(96540);const s={},o=i.createContext(s);function a(e){const t=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),i.createElement(o.Provider,{value:t},e.children)}},80945:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>r,contentTitle:()=>c,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"react/react-with-redux/3-3-2-2-action-creators","title":"\ud83d\udcd3 3.3.2.2 Action Creators","description":"Over the next two lessons, we will learn some simple techniques that will allow us to clean up our code. These techniques are considered Redux best practices.","source":"@site/versioned_docs/version-WIP/3_react/3_react-with-redux/3-3-2-02-action-creators.md","sourceDirName":"3_react/3_react-with-redux","slug":"/react/react-with-redux/3-3-2-2-action-creators","permalink":"/WIP/react/react-with-redux/3-3-2-2-action-creators","draft":false,"unlisted":false,"tags":[],"version":"WIP","frontMatter":{"title":"\ud83d\udcd3 3.3.2.2 Action Creators","day":"tuesday","id":"3-3-2-2-action-creators","hide_table_of_contents":true},"sidebar":"react","previous":{"title":"\u270f\ufe0f 3.3.2.1 Forum, Word Puzzle, Tic Tac Toe (Three-Day Project) - Part 1","permalink":"/WIP/react/react-with-redux/3-3-2-1-forum-word-puzzle-tic-tac-toe-three-day-project---part-1"},"next":{"title":"\ud83d\udcd3 3.3.2.3 Action Constants","permalink":"/WIP/react/react-with-redux/3-3-2-3-action-constants"}}');var s=n(74848),o=n(28453);const a={title:"\ud83d\udcd3 3.3.2.2 Action Creators",day:"tuesday",id:"3-3-2-2-action-creators",hide_table_of_contents:!0},c=void 0,r={},l=[{value:"Action Creators",id:"action-creators",level:3},{value:"Files for Action Creators",id:"files-for-action-creators",level:4},{value:"Testing and Writing Action Creators",id:"testing-and-writing-action-creators",level:4},{value:"Adding Action Creators to Help Queue",id:"adding-action-creators-to-help-queue",level:4}];function d(e){const t={code:"code",div:"div",h3:"h3",h4:"h4",p:"p",pre:"pre",strong:"strong",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.p,{children:"Over the next two lessons, we will learn some simple techniques that will allow us to clean up our code. These techniques are considered Redux best practices."}),"\n",(0,s.jsxs)(t.p,{children:["In this lesson, we'll learn how to use ",(0,s.jsx)(t.strong,{children:"action creators"})," to simplify what an action looks like in our React applications."]}),"\n",(0,s.jsxs)(t.p,{children:["Then, in the next lesson, we'll learn how to use ",(0,s.jsx)(t.strong,{children:"action constants"})," to replace the strings we've been using to represent action types."]}),"\n",(0,s.jsx)(t.h3,{id:"action-creators",children:"Action Creators"}),"\n",(0,s.jsx)(t.p,{children:"Action creators are little helper functions that make it easier to use actions in our React applications."}),"\n",(0,s.jsx)(t.p,{children:"Let's look at an example. In our Help Queue, whenever we want to delete a ticket, we need to define an action like this:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",children:"const action = {\n  type: 'DELETE_TICKET',\n  id: id\n}\n"})}),"\n",(0,s.jsx)(t.p,{children:"It's okay if we have to do this in our code every once in a while, but imagine if we had many places in our code where we have to delete tickets. It would be nice to DRY this code up a bit."}),"\n",(0,s.jsx)(t.p,{children:"We can do this by writing a JavaScript function to handle the delete action:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",children:"const deleteTicket = id => ({\n  type: 'DELETE_TICKET',\n  id\n})\n"})}),"\n",(0,s.jsxs)(t.p,{children:["Note that we're defining a deleteTicket method, identifying id as a parameter, and implicitly returning an object literal (we wrap it in parentheses, otherwise it will return undefined). Note also that we're using a shorthand syntax to set ",(0,s.jsx)(t.code,{children:"id: id"}),". We can simply declare ",(0,s.jsx)(t.code,{children:"id"})," and javascript will handle the rest."]}),"\n",(0,s.jsx)(t.p,{children:"Now, whenever we need to define a delete action in a component, we can do the following:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",children:"const action = deleteTicket(id);\n"})}),"\n",(0,s.jsx)(t.p,{children:"This code is cleaner and less prone to bugs."}),"\n",(0,s.jsx)(t.p,{children:"We currently have three action types in our Help Queue application. Let's add action creators for all of them \u2014 and make sure to test our new action creators along the way."}),"\n",(0,s.jsx)(t.h4,{id:"files-for-action-creators",children:"Files for Action Creators"}),"\n",(0,s.jsxs)(t.p,{children:["We'll create a new subdirectory in ",(0,s.jsx)(t.code,{children:"__tests__"})," called ",(0,s.jsx)(t.code,{children:"actions"}),". Inside the ",(0,s.jsx)(t.code,{children:"actions"})," directory, create a file called ",(0,s.jsx)(t.code,{children:"index.test.js"}),". All of our tests for action creators will go here."]}),"\n",(0,s.jsxs)(t.p,{children:["Next, we'll create a directory in ",(0,s.jsx)(t.code,{children:"src"})," called ",(0,s.jsx)(t.code,{children:"actions"}),". This ",(0,s.jsx)(t.code,{children:"actions"})," directory should have a file called ",(0,s.jsx)(t.code,{children:"index.js"}),". The actual action creators will go in this file."]}),"\n",(0,s.jsx)(t.h4,{id:"testing-and-writing-action-creators",children:"Testing and Writing Action Creators"}),"\n",(0,s.jsxs)(t.p,{children:["We've already used the ",(0,s.jsx)(t.code,{children:"'DELETE_TICKET'"})," action as an example so let's start by writing a test for this action:"]}),"\n",(0,s.jsx)(t.div,{className:"filename",children:"__tests__/actions/index.test.js"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",children:"import * as actions from './../../actions';\n\ndescribe('Help Queue actions', () => {\n  it('deleteTicket should create DELETE_TICKET action', () => {\n    expect(actions.deleteTicket(1)).toEqual({\n      type: 'DELETE_TICKET',\n      id: 1\n    });\n  });\n});\n"})}),"\n",(0,s.jsxs)(t.p,{children:["Note that we will be importing all of our action creators as ",(0,s.jsx)(t.code,{children:"actions"}),". As expected, this test should fail because we haven't written any actions yet."]}),"\n",(0,s.jsxs)(t.p,{children:["You may be wondering why we aren't creating a ticket to be deleted. Well, we've already tested that the ",(0,s.jsx)(t.code,{children:"'DELETE_TICKET'"})," action properly deletes tickets. In this test, we just need to make sure that our action creator creates the right action \u2014 the action itself doesn't need to be executed."]}),"\n",(0,s.jsx)(t.p,{children:"Now let's add our first action creator:"}),"\n",(0,s.jsx)(t.div,{className:"filename",children:"src/actions/index.js"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",children:"export const deleteTicket = id => ({\n  type: 'DELETE_TICKET',\n  id\n});\n"})}),"\n",(0,s.jsx)(t.p,{children:"That's all we need. Our test will now pass."}),"\n",(0,s.jsxs)(t.p,{children:["Next, we'll do a test for our ",(0,s.jsx)(t.code,{children:"'TOGGLE_FORM'"})," action creator:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",children:"...\n  it('toggleForm should create TOGGLE_FORM action', () => {\n    expect(actions.toggleForm()).toEqual({\n      type: 'TOGGLE_FORM'\n    });\n  });\n...\n"})}),"\n",(0,s.jsx)(t.p,{children:"And here's the action:"}),"\n",(0,s.jsx)(t.div,{className:"filename",children:"src/actions/index.js"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",children:"export const toggleForm = () => ({\n  type: 'TOGGLE_FORM'\n});\n"})}),"\n",(0,s.jsxs)(t.p,{children:["It may not seem like much reduction in code but it will be easier to call ",(0,s.jsx)(t.code,{children:"toggleForm()"})," in our application instead of ",(0,s.jsx)(t.code,{children:"{ type: 'TOGGLE_FORM' }"}),"."]}),"\n",(0,s.jsxs)(t.p,{children:["Finally, let's add the test for our ",(0,s.jsx)(t.code,{children:"'ADD_TICKET'"})," action:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",children:"...\n  it('addTicket should create ADD_TICKET action', () => {\n    expect(actions.addTicket({\n      names: 'Jo and Jasmine', \n      location: '3E', \n      issue: 'Redux not working!', \n      id: 1\n    })).toEqual({\n      type: 'ADD_TICKET',\n      names: 'Jo and Jasmine',\n      location: '3E',\n      issue: 'Redux not working!',\n      id: 1\n    });\n  });\n...\n"})}),"\n",(0,s.jsxs)(t.p,{children:["Note that ",(0,s.jsx)(t.code,{children:"addTicket()"})," will take the entire object and then deconstruct it in the action creator. That will save us the trouble of deconstructing the ticket every time we call ",(0,s.jsx)(t.code,{children:"addTicket()"})," in our React application."]}),"\n",(0,s.jsx)(t.p,{children:"Verify this fails. Here's the code to make our test pass:"}),"\n",(0,s.jsx)(t.div,{className:"filename",children:"src/actions/index.js"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",children:"export const addTicket = (ticket) => {\n  const { names, location, issue, id } = ticket;\n  return {\n    type: 'ADD_TICKET',\n    names: names,\n    location: location,\n    issue: issue,\n    id: id\n  }\n}\n"})}),"\n",(0,s.jsx)(t.h4,{id:"adding-action-creators-to-help-queue",children:"Adding Action Creators to Help Queue"}),"\n",(0,s.jsxs)(t.p,{children:["Now that we've tested and written action creators for all of our action types, we are ready to add them to our Help Queue application. Since we only have one component handling state (",(0,s.jsx)(t.code,{children:"TicketControl.js"}),"), we'll only need to update that file."]}),"\n",(0,s.jsx)(t.p,{children:"We'll import all of our action creators. We'll only need to update four methods total, which are shown below:"}),"\n",(0,s.jsx)(t.div,{className:"filename",children:"src/components/TicketControl.js"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",children:"...\nimport * as a from './../actions';\n\n...\n\n  handleClick = () => {\n    if (this.state.selectedTicket != null) {\n      this.setState({\n        selectedTicket: null,\n        editing: false\n      });\n    } else {\n      const { dispatch } = this.props;\n      const action = a.toggleForm();\n      dispatch(action);\n    }\n  }\n\n...\n\n  handleAddingNewTicketToList = (newTicket) => {\n    const { dispatch } = this.props;\n    const action = a.addTicket(newTicket);\n    dispatch(action);\n    const action2 = a.toggleForm();\n    dispatch(action2);\n  }\n\n  handleEditingTicketInList = (ticketToEdit) => {\n    const { dispatch } = this.props;\n    const action = a.addTicket(ticketToEdit);\n    dispatch(action);\n    this.setState({\n      editing: false,\n      selectedTicket: null\n    });\n  }\n\n...\n\n  handleDeletingTicket = (id) => {\n    const { dispatch } = this.props;\n    const action = a.deleteTicket(id);\n    dispatch(action);\n    this.setState({selectedTicket: null});\n  }\n\n"})}),"\n",(0,s.jsxs)(t.p,{children:["We import our actions as ",(0,s.jsx)(t.code,{children:"a"})," for brevity, but it's also fine to use ",(0,s.jsx)(t.code,{children:"actions"})," as well. It's a common practice in the React community to use a single letter in this case, so you'll likely see this in other React code."]}),"\n",(0,s.jsx)(t.p,{children:"Our refactor cuts out a few lines of code and removes the need to spell out every action. In addition to making our code a little cleaner, it will be less prone to bugs as well."}),"\n",(0,s.jsx)(t.p,{children:"Going forward, make sure to test and write action creators for all of your actions."})]})}function h(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);