"use strict";(self.webpackChunklhtp=self.webpackChunklhtp||[]).push([[87391],{8146:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>d,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"react/react-fundamentals/4-2-3-6-deleting-a-ticket","title":"\ud83d\udcd3 4.2.3.6 Deleting a Ticket","description":"In the last lesson, we added the ability for a user to see an individual ticket\'s detail page. We had to alter or create four different components in order to add this relatively small piece of functionality.","source":"@site/versioned_docs/version-v1_3/4_react/2_react-fundamentals/4-2-3-06-deleting-a-ticket.md","sourceDirName":"4_react/2_react-fundamentals","slug":"/react/react-fundamentals/4-2-3-6-deleting-a-ticket","permalink":"/v1.3/react/react-fundamentals/4-2-3-6-deleting-a-ticket","draft":false,"unlisted":false,"tags":[],"version":"v1_3","frontMatter":{"title":"\ud83d\udcd3 4.2.3.6 Deleting a Ticket","day":"wednesday","id":"4-2-3-6-deleting-a-ticket","hide_table_of_contents":true},"sidebar":"react","previous":{"title":"\ud83d\udcd3 4.2.3.5 Showing Ticket Detail","permalink":"/v1.3/react/react-fundamentals/4-2-3-5-showing-ticket-detail"},"next":{"title":"\ud83d\udcd3 4.2.3.7 Reusing Components","permalink":"/v1.3/react/react-fundamentals/4-2-3-7-reusing-components"}}');var c=n(74848),l=n(28453);const o={title:"\ud83d\udcd3 4.2.3.6 Deleting a Ticket",day:"wednesday",id:"4-2-3-6-deleting-a-ticket",hide_table_of_contents:!0},d=void 0,s={},a=[{value:"<code>handleDeletingTicket</code> Function",id:"handledeletingticket-function",level:2},{value:"Passing <code>handleDeletingTicket</code> as Prop to <code>TicketDetail</code>",id:"passing-handledeletingticket-as-prop-to-ticketdetail",level:2},{value:"Adding a Delete Button and PropType to <code>TicketDetail</code>",id:"adding-a-delete-button-and-proptype-to-ticketdetail",level:2}];function r(e){const t={code:"code",em:"em",h2:"h2",hr:"hr",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(t.p,{children:"In the last lesson, we added the ability for a user to see an individual ticket's detail page. We had to alter or create four different components in order to add this relatively small piece of functionality."}),"\n",(0,c.jsxs)(t.p,{children:["However, some good news. Adding delete functionality to our application is going to be much easier. This is because we planned out our application carefully. We will only need to alter two components \u2014 ",(0,c.jsx)(t.code,{children:"TicketControl"})," (which holds our shared state) and ",(0,c.jsx)(t.code,{children:"TicketDetail"})," (where the delete button will live)."]}),"\n",(0,c.jsxs)(t.p,{children:["If we'd chosen to place ",(0,c.jsx)(t.code,{children:"TicketDetail"})," below ",(0,c.jsx)(t.code,{children:"Ticket"})," in the component tree, we'd have a prop-drilling nightmare. Our function for deleting tickets would affect four different components because we'd need to pass it as a prop through ",(0,c.jsx)(t.code,{children:"TicketList"}),", ",(0,c.jsx)(t.code,{children:"Ticket"})," and ",(0,c.jsx)(t.code,{children:"TicketDetail"}),"."]}),"\n",(0,c.jsx)(t.p,{children:"Here are the steps we will need to take to add delete functionality to our Help Queue:"}),"\n",(0,c.jsxs)(t.ul,{children:["\n",(0,c.jsxs)(t.li,{children:["Write a ",(0,c.jsx)(t.code,{children:"handleDeletingTicket"})," function in ",(0,c.jsx)(t.code,{children:"TicketControl"}),". This function will update the state of the ",(0,c.jsx)(t.code,{children:"mainTicketList"}),"."]}),"\n",(0,c.jsxs)(t.li,{children:["Pass this function down as a prop to ",(0,c.jsx)(t.code,{children:"TicketDetail"}),". We will call this prop ",(0,c.jsx)(t.code,{children:"onClickingDelete"}),"."]}),"\n",(0,c.jsxs)(t.li,{children:["Add a button to ",(0,c.jsx)(t.code,{children:"TicketDetail"})," with an ",(0,c.jsx)(t.code,{children:"onClick"})," event handler that will trigger ",(0,c.jsx)(t.code,{children:"onClickingDelete"}),"."]}),"\n",(0,c.jsxs)(t.li,{children:["As always, we will need to add a PropType for ",(0,c.jsx)(t.code,{children:"onClickingDelete"}),"."]}),"\n"]}),"\n",(0,c.jsxs)(t.h2,{id:"handledeletingticket-function",children:[(0,c.jsx)(t.code,{children:"handleDeletingTicket"})," Function"]}),"\n",(0,c.jsx)(t.hr,{}),"\n",(0,c.jsxs)(t.p,{children:["We will start by adding a function to our ",(0,c.jsx)(t.code,{children:"TicketControl"})," component that will delete a ticket from the ",(0,c.jsx)(t.code,{children:"mainTicketList"})," based on its ID. Once again, we can write this function in isolation without worrying about how it will interact with other components yet."]}),"\n",(0,c.jsx)(t.pre,{children:(0,c.jsx)(t.code,{className:"language-js",metastring:'title="src/components/TicketControl.js"',children:"const handleDeletingTicket = (id) => {\n  const newMainTicketList = mainTicketList.filter(ticket => ticket.id !== id);\n  setMainTicketList(newMainTicketList);\n  setSelectedTicket(null);\n}\n"})}),"\n",(0,c.jsxs)(t.p,{children:[(0,c.jsx)(t.code,{children:"handleDeletingTicket"})," will take an ",(0,c.jsx)(t.code,{children:"id"})," as a parameter."]}),"\n",(0,c.jsxs)(t.p,{children:["We will use the ",(0,c.jsx)(t.code,{children:"filter()"})," method again. This time, though, we want the ",(0,c.jsx)(t.code,{children:"newMainTicketList"})," to filter everything that ",(0,c.jsx)(t.em,{children:"doesn't"})," have the ticket ID that will be passed into the function. In other words, we are ",(0,c.jsx)(t.em,{children:"filtering out"})," the ticket that has the specified ID because we want it to be deleted from the list."]}),"\n",(0,c.jsxs)(t.p,{children:["Next, we call ",(0,c.jsx)(t.code,{children:"setMainTicketList"})," to update the state of ",(0,c.jsx)(t.code,{children:"mainTicketList"})," to our filtered ",(0,c.jsx)(t.code,{children:"newMainTicketList"}),"."]}),"\n",(0,c.jsxs)(t.p,{children:["Finally, we also need to set ",(0,c.jsx)(t.code,{children:"selectedTicket"})," back to ",(0,c.jsx)(t.code,{children:"null"}),". That way, once a ticket is closed, ",(0,c.jsx)(t.code,{children:"TicketControl"})," will ensure that the ",(0,c.jsx)(t.code,{children:"TicketList"})," component is showing."]}),"\n",(0,c.jsxs)(t.h2,{id:"passing-handledeletingticket-as-prop-to-ticketdetail",children:["Passing ",(0,c.jsx)(t.code,{children:"handleDeletingTicket"})," as Prop to ",(0,c.jsx)(t.code,{children:"TicketDetail"})]}),"\n",(0,c.jsx)(t.hr,{}),"\n",(0,c.jsxs)(t.p,{children:["Next, we need to pass our ",(0,c.jsx)(t.code,{children:"handleDeletingTicket"})," function as a prop to ",(0,c.jsx)(t.code,{children:"TicketDetail"}),". This just involves a small change in our conditional rendering:"]}),"\n",(0,c.jsx)(t.pre,{children:(0,c.jsx)(t.code,{className:"language-js",metastring:'title="src/components/TicketControl.js"',children:'if (selectedTicket != null) {\n  currentlyVisibleState = \n    <TicketDetail \n      ticket={selectedTicket} \n      onClickingDelete={handleDeletingTicket} />\n  buttonText = "Return to Ticket List";\n}\n'})}),"\n",(0,c.jsxs)(t.h2,{id:"adding-a-delete-button-and-proptype-to-ticketdetail",children:["Adding a Delete Button and PropType to ",(0,c.jsx)(t.code,{children:"TicketDetail"})]}),"\n",(0,c.jsx)(t.hr,{}),"\n",(0,c.jsxs)(t.p,{children:["We just need to make a few small changes to our ",(0,c.jsx)(t.code,{children:"TicketDetail"})," component:"]}),"\n",(0,c.jsx)(t.pre,{children:(0,c.jsx)(t.code,{className:"language-jsx",metastring:'title="src/components/TicketDetail.js"',children:'import React from "react";\nimport PropTypes from "prop-types";\n\nfunction TicketDetail(props){\n  const { ticket, onClickingDelete } = props;\n  \n  return (\n    <React.Fragment>\n      <h1>Ticket Detail</h1>\n      <h3>{ticket.location} - {ticket.names}</h3>\n      <p><em>{ticket.issue}</em></p>\n      <button onClick={() => onClickingDelete(ticket.id)}>Close Ticket</button>\n      <hr/>\n    </React.Fragment>\n  );\n}\n\nTicketDetail.propTypes = {\n  ticket: PropTypes.object,\n  onClickingDelete: PropTypes.func\n};\n\nexport default TicketDetail;\n'})}),"\n",(0,c.jsxs)(t.p,{children:["First, we add a button with an ",(0,c.jsx)(t.code,{children:"onClick"})," handler. When the button is clicked, ",(0,c.jsx)(t.code,{children:"onClickingDelete(ticket.id)"})," will be executed. Once again, we need to use ",(0,c.jsx)(t.code,{children:"() =>"})," in our JSX curly braces because our function has parens with an argument. Also note that we're destructuring props to create an ",(0,c.jsx)(t.code,{children:"onClickingDelete"})," variable, just like we did for ",(0,c.jsx)(t.code,{children:"ticket"}),"."]}),"\n",(0,c.jsxs)(t.p,{children:["Finally, we need to add a ",(0,c.jsx)(t.code,{children:"PropType"})," for ",(0,c.jsx)(t.code,{children:"onClickingDelete"}),"."]}),"\n",(0,c.jsx)(t.p,{children:"And that's it! We didn't have to add too much code, in large part because we didn't do any prop-drilling."})]})}function h(e={}){const{wrapper:t}={...(0,l.R)(),...e.components};return t?(0,c.jsx)(t,{...e,children:(0,c.jsx)(r,{...e})}):r(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>d});var i=n(96540);const c={},l=i.createContext(c);function o(e){const t=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:o(e.components),i.createElement(l.Provider,{value:t},e.children)}}}]);